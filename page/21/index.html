<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/blog/favicon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/blog/favicon.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/blog/favicon.png">
  <link rel="mask-icon" href="/blog/favicon.png" color="#222">

<link rel="stylesheet" href="/blog/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" integrity="sha256-Z1K5uhUaJXA7Ll0XrZ/0JhX4lAtZFpT6jkKrEDT0drU=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"shenlvmeng.github.com","root":"/blog/","images":"/blog/images","scheme":"Muse","darkmode":false,"version":"8.14.1","exturl":false,"sidebar":{"position":"right","display":"always","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"algolia":{"appID":"N573WZGUR1","apiKey":"f4b654279103617a4cefb92a132ff0c3","indexName":"blog","hits":{"per_page":10}}}</script><script src="/blog/js/config.js"></script>

    <meta name="description" content="Be sharp, my friend.">
<meta property="og:type" content="website">
<meta property="og:title" content="Shenlvmeng&#39;s Blog">
<meta property="og:url" content="http://shenlvmeng.github.com/blog/page/21/">
<meta property="og:site_name" content="Shenlvmeng&#39;s Blog">
<meta property="og:description" content="Be sharp, my friend.">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="shenlvmeng">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://shenlvmeng.github.com/blog/page/21/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/21/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Shenlvmeng's Blog</title>
  






  <script async defer data-website-id="" src=""></script>

  <script defer data-domain="" src=""></script>

  <noscript>
    <link rel="stylesheet" href="/blog/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/blog/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Shenlvmeng's Blog</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Blog</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container"></div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container">
  <div class="algolia-stats"><hr></div>
  <div class="algolia-hits"></div>
  <div class="algolia-pagination"></div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="shenlvmeng"
      src="/blog/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">shenlvmeng</p>
  <div class="site-description" itemprop="description">Be sharp, my friend.</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/blog/archives/">
          <span class="site-state-item-count">150</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/blog/categories/">
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/blog/tags/">
        <span class="site-state-item-count">459</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/shenlvmeng" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;shenlvmeng" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="http://weibo.com/shenlvmeng" title="Weibo → http:&#x2F;&#x2F;weibo.com&#x2F;shenlvmeng" rel="noopener me" target="_blank"><i class="fab fa-weibo fa-fw"></i>Weibo</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://shenlvmeng.github.com/blog/2017/07/27/interview-algorithm-md/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.jpg">
      <meta itemprop="name" content="shenlvmeng">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shenlvmeng's Blog">
      <meta itemprop="description" content="Be sharp, my friend.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Shenlvmeng's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/blog/2017/07/27/interview-algorithm-md/" class="post-title-link" itemprop="url">《剑指Offer》JavaScript版解决方案</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-07-27 19:52:57" itemprop="dateCreated datePublished" datetime="2017-07-27T19:52:57+08:00">2017-07-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2017-09-05 19:28:42" itemprop="dateModified" datetime="2017-09-05T19:28:42+08:00">2017-09-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog/categories/%E7%AE%97%E6%B3%95/" itemprop="url" rel="index"><span itemprop="name">算法</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/blog/2017/07/27/interview-algorithm-md/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2017/07/27/interview-algorithm-md/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>47k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1:18</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>问题全部来自《剑指Offer》，顺序一致。</p>
<h2 id="单例模式"><a href="#单例模式" class="headerlink" title="单例模式"></a>单例模式</h2><p>1.使用字面量声明对象</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Singleton</span> = &#123;</span><br><span class="line">  <span class="attr">prop1</span>: <span class="string">&quot;prop1&quot;</span></span><br><span class="line">  <span class="attr">prop2</span>: <span class="string">&quot;prop2&quot;</span></span><br><span class="line">  <span class="title function_">method1</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;I am a method.&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>或者通过闭包封装自己的私有变量和方法</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Singleton</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> privateProp = <span class="string">&quot;You can&#x27;t see me&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">privateMethod</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;You can&#x27;t see me either.&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">publicProp</span>: <span class="string">`<span class="subst">$&#123;privateProp&#125;</span>!`</span>,</span><br><span class="line">    <span class="title function_">publicMethod</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="title function_">privateMethod</span>();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2.利用闭包</p>
<p>本质上和上面的方法类似</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Singleton</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> instance;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">init</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">prop</span>: <span class="string">&quot;prop&quot;</span>,</span><br><span class="line">      <span class="title function_">method</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;I am a method.&quot;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="title function_">getInstance</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="comment">// JS单线程，不考虑锁的问题</span></span><br><span class="line">      <span class="keyword">if</span> (!instance) &#123;</span><br><span class="line">        instance = <span class="title function_">init</span>();</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>还有一个酷炫的变种，不过是上面的构造函数写法</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Singleton</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> instance = <span class="variable language_">this</span>;</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">prop</span> = <span class="string">&quot;prop&quot;</span>;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">method</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;I am a method.&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title class_">Singleton</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> instance;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3.借助构造函数和JS中函数也是对象的特点</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Singleton</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 这里不取名为instance也可以</span></span><br><span class="line">  <span class="comment">// 显式返回this</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="title class_">Singleton</span>.<span class="property">instance</span> === <span class="string">&quot;object&quot;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Singleton</span>.<span class="property">instance</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 成员和方法</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">prop</span> = <span class="string">&quot;prop&quot;</span>;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">method</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;I am a method.&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title class_">Singleton</span>.<span class="property">instance</span> = <span class="variable language_">this</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//隐式返回this</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="http://www.cnblogs.com/TomXu/archive/2012/02/20/2352817.html">参考</a></p>
<h2 id="找出数组中重复的数字"><a href="#找出数组中重复的数字" class="headerlink" title="找出数组中重复的数字"></a>找出数组中重复的数字</h2><p><strong>Set</strong>，使用ES6内建的数据结构。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> mySet = <span class="keyword">new</span> <span class="title class_">Set</span>();</span><br><span class="line">arr.<span class="title function_">forEach</span>(<span class="function">(<span class="params">val, index</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (mySet.<span class="title function_">has</span>(val)) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(val);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    mySet.<span class="title function_">add</span>(val);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><strong>Object</strong>或<strong>Array</strong>（空间复杂度O(n)），换汤不换药，略。</p>
<p><strong>传统方法</strong>，时间复杂度O(n)，空间复杂度O(1)。交换当前元素和当前索引对应的元素，直到两者相等。（请参考原书中的前提，数字都在0~n-1之间）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">findDuplicate</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">  <span class="comment">// 边界检测</span></span><br><span class="line">  <span class="keyword">if</span> (!arr || arr.<span class="property">length</span> === <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, len = arr.<span class="property">length</span>; i &lt; len; i++) &#123;</span><br><span class="line">    <span class="comment">// 循环交换元素直到arr[i] == i</span></span><br><span class="line">    <span class="keyword">while</span> (arr[i] != i) &#123;</span><br><span class="line">      <span class="keyword">if</span> (arr[i] === arr[arr[i]]) &#123;</span><br><span class="line">        <span class="keyword">return</span> arr[i];</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// 交换</span></span><br><span class="line">      [arr[i], arr[arr[i]]] = [arr[arr[i]], arr[i]];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>传统方法，且不修改数组</strong>，利用折半查找，递归寻找重复的元素。时间复杂度O(nlogn)，空间复杂度O(1)。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">findDuplicate</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">  <span class="comment">// 边界检测</span></span><br><span class="line">  <span class="keyword">if</span> (!arr || arr.<span class="property">length</span> === <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">countRange</span> (arr, start, end) &#123;</span><br><span class="line">    <span class="keyword">if</span> (start &gt; end) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (start === end) &#123;</span><br><span class="line">      <span class="keyword">return</span> start;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> split = (start + end) / <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">const</span> count = arr.<span class="title function_">reduce</span>(<span class="function">(<span class="params">last, val</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> last + +(val &gt;= start &amp;&amp; val &lt;= split);</span><br><span class="line">    &#125;, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">if</span> (count &gt; split - start + <span class="number">1</span>) &#123;</span><br><span class="line">      <span class="title function_">countRange</span>(arr, start, split);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="title function_">countRange</span>(arr, split + <span class="number">1</span>, end);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">countRange</span>(arr, <span class="number">0</span>, arr.<span class="property">length</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="二维数组中的查找"><a href="#二维数组中的查找" class="headerlink" title="二维数组中的查找"></a>二维数组中的查找</h2><p><strong>前提</strong>：数组的每一行和每一列都递增</p>
<p>贪婪算法，从右上角开始。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">find</span>(<span class="params">arr, val</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!arr || !arr.<span class="property">length</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> [rows, columns] = [arr.<span class="property">length</span>, arr[<span class="number">0</span>].<span class="property">length</span>];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!rows || !columns) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> [x, y] = [columns-<span class="number">1</span>, <span class="number">0</span>]</span><br><span class="line">  <span class="keyword">while</span>(x &gt; <span class="number">0</span> &amp;&amp; y &lt; rows) &#123;</span><br><span class="line">    <span class="keyword">if</span> (arr[y][x] === val) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (arr[y][x] &gt; val) &#123;</span><br><span class="line">      x--;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      y++;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="替换字符串中的空格"><a href="#替换字符串中的空格" class="headerlink" title="替换字符串中的空格"></a>替换字符串中的空格</h2><p>JavaScript中很好实现，可以直接使用库函数。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">replace</span>(<span class="params">str</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> str.<span class="title function_">replace</span>(<span class="string">&quot; &quot;</span>, <span class="string">&quot;%20&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用传统方法，思路是先从前到后找到空格数，扩展出足够空间。再使用两个指针，从后到前，P1指向旧字符串的末尾，P2指向新字符串的末尾。碰到空格时，P2插入”%20”。碰到其他字符时，挨个复制即可。</p>
<p>这种双指针从后向前的思维还可以用在两有序数组合并。从尾到头比较A1和A2数字。</p>
<h2 id="链表设计"><a href="#链表设计" class="headerlink" title="链表设计"></a>链表设计</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 单向链表</span></span><br><span class="line"><span class="keyword">let</span> <span class="title class_">LinkedList2</span> = (<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">class</span> <span class="title class_">Node</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">element</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">element</span> = element;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">next</span> = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">class</span> <span class="title class_">LinkedList</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">length</span> = <span class="number">0</span>;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">head</span> = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">append</span>(<span class="params">element</span>) &#123;</span><br><span class="line">      <span class="keyword">let</span> node = <span class="keyword">new</span> <span class="title class_">Node</span>(element);</span><br><span class="line">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">head</span> === <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">head</span> = node;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> curr = <span class="variable language_">this</span>.<span class="property">head</span>;</span><br><span class="line">        <span class="keyword">while</span>(curr.<span class="property">next</span>) &#123;</span><br><span class="line">          curr = curr.<span class="property">next</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        curr.<span class="property">next</span> = node;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">length</span>++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">insert</span>(<span class="params">pos, element</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (pos &lt; <span class="number">0</span> || pos &gt; <span class="variable language_">this</span>.<span class="property">length</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">let</span> curr = <span class="variable language_">this</span>.<span class="property">head</span>,</span><br><span class="line">          node = <span class="keyword">new</span> <span class="title class_">Node</span>(element);</span><br><span class="line">      <span class="keyword">while</span>(--pos &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">        curr = curr.<span class="property">next</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      node.<span class="property">next</span> = curr.<span class="property">next</span>;</span><br><span class="line">      curr.<span class="property">next</span> = node;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">length</span>++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">remove</span>(<span class="params">pos</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (pos &lt; <span class="number">0</span> || pos &gt; <span class="variable language_">this</span>.<span class="property">length</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">let</span> curr = <span class="variable language_">this</span>.<span class="property">head</span>;</span><br><span class="line">          prev;</span><br><span class="line">      <span class="keyword">while</span>(--pos &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">        prev = curr;</span><br><span class="line">        curr = curr.<span class="property">next</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span>(<span class="title function_">isUndefined</span>(prev)) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">head</span> = <span class="literal">null</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        prev.<span class="property">next</span> = curr.<span class="property">next</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">length</span>--;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">indexOf</span>(<span class="params">element</span>) &#123;</span><br><span class="line">      <span class="keyword">let</span> curr = <span class="variable language_">this</span>.<span class="property">head</span>,</span><br><span class="line">          index = <span class="number">0</span>;</span><br><span class="line">      <span class="keyword">while</span> (curr) &#123;</span><br><span class="line">        <span class="keyword">if</span> (element === curr.<span class="property">element</span>) &#123;</span><br><span class="line">          <span class="keyword">return</span> index;</span><br><span class="line">        &#125;</span><br><span class="line">        index++;</span><br><span class="line">        curr = curr.<span class="property">next</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 双向链表</span></span><br><span class="line"><span class="comment">// 略</span></span><br></pre></td></tr></table></figure>

<h2 id="从尾到头打印链表"><a href="#从尾到头打印链表" class="headerlink" title="从尾到头打印链表"></a>从尾到头打印链表</h2><p><strong>前提</strong>：单向链表。使用递归</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">recursivePrint</span>(<span class="params">node</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (node &amp;&amp; node.<span class="property">next</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">recursivePrint</span>(node.<span class="property">next</span>));</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(node.<span class="property">element</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="重建二叉树"><a href="#重建二叉树" class="headerlink" title="重建二叉树"></a>重建二叉树</h2><p><strong>前提</strong>：根据前序和中序遍历的结果。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">BinaryTreeNode</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">element, left, right</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">element</span> = element;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">left</span> = left;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">right</span> = right;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>通过前序遍历找到根节点，结合中序遍历找到左右子树，之后递归构建左右子树。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">constructTree</span>(<span class="params">preorder, inorder</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (preorder.<span class="property">length</span> === <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">construct</span>(<span class="params">preorder, inorder</span>) &#123;</span><br><span class="line">    <span class="comment">// 找到根节点元素</span></span><br><span class="line">    <span class="keyword">let</span> root = preorder[<span class="number">0</span>];</span><br><span class="line">    <span class="comment">// 确定左右子树</span></span><br><span class="line">    <span class="keyword">let</span> index = inorder.<span class="title function_">indexOf</span>(root),</span><br><span class="line">        left = (index === <span class="number">0</span> ? <span class="literal">null</span> : <span class="title function_">construct</span>(preorder.<span class="title function_">slice</span>(<span class="number">0</span>, index), inorder.<span class="title function_">slice</span>(<span class="number">0</span>, index)));</span><br><span class="line">        right = (index === inorder.<span class="property">length</span>-<span class="number">1</span> ? <span class="literal">null</span> : <span class="title function_">construct</span>(preorder.<span class="title function_">slice</span>(index+<span class="number">1</span>), inorder.<span class="title function_">slice</span>(index+<span class="number">1</span>)));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">BinaryTreeNode</span>(root, left, right);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">construct</span>(preorder, inorder);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="二叉树的下一个节点"><a href="#二叉树的下一个节点" class="headerlink" title="二叉树的下一个节点"></a>二叉树的下一个节点</h2><p><strong>前提</strong>：树的每个节点除了有两个子节点的指针，还有一个指向父节点的指针。寻找中序遍历的下一个节点。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">BinaryTreeNode</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">element, left, right, parent</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">element</span> = element;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">left</span> = left;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">right</span> = right;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">parent</span> = parent;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>二叉树中的节点和周围节点可能有四种关系（画图出来更直观）</p>
<ol>
<li>左子树的父节点</li>
<li>右子树的父节点</li>
<li>父节点的左子树</li>
<li>父节点的右子树</li>
</ol>
<p>从而有下面的流程：</p>
<ol>
<li>关系2存在时，返回右子树的最左节点，否则到步骤2</li>
<li>关系3存在时，返回父节点，否则到步骤3</li>
<li>关系4存在时，向上回溯，对父节点使用步骤2，否则到步骤4</li>
<li>（节点是根节点）返回null</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">findNextNode</span>(<span class="params">node</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> curr;</span><br><span class="line">  <span class="keyword">if</span> (node.<span class="property">right</span>) &#123;</span><br><span class="line">    curr = node.<span class="property">right</span>;</span><br><span class="line">    <span class="keyword">while</span>(curr = curr.<span class="property">left</span>) &#123;</span><br><span class="line">      ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> curr;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (node.<span class="property">parent</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (node.<span class="property">parent</span>.<span class="property">left</span> === node) &#123;</span><br><span class="line">      <span class="keyword">return</span> node.<span class="property">parent</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (node.<span class="property">parent</span>.<span class="property">right</span> === node) &#123;</span><br><span class="line">      curr = node.<span class="property">parent</span>;</span><br><span class="line">      <span class="keyword">while</span> (curr.<span class="property">parent</span> &amp;&amp; curr.<span class="property">parent</span>.<span class="property">right</span> === curr) &#123;</span><br><span class="line">        curr = node.<span class="property">parent</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (curr.<span class="property">parent</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> curr.<span class="property">parent</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="用两个栈实现队列"><a href="#用两个栈实现队列" class="headerlink" title="用两个栈实现队列"></a>用两个栈实现队列</h2><p><strong>前提</strong>，实现append和delete功能，完成在队尾插入和队首删除。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Stack</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">stack</span> = []</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">size</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">stack</span>.<span class="property">length</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">push</span>(<span class="params">element</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">stack</span>.<span class="title function_">push</span>(element);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">pop</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">stack</span>.<span class="title function_">pop</span>();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>思路</strong>，栈1只允许正序存放，栈2只允许倒序存放，由于栈2的内容始终较老，因此插入总发生在栈1。删除总发生在栈2（栈2为空时除外）。JS中没有泛型的概念，所以无需考虑栈中的数据类型。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Queue</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">stack</span> = <span class="keyword">new</span> <span class="title class_">Stack</span>();</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">inverseStack</span> = <span class="keyword">new</span> <span class="title class_">Stack</span>();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">append</span>(<span class="params">element</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">stack</span>.<span class="title function_">push</span>(element);</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">stack</span>.<span class="property">size</span> + <span class="variable language_">this</span>.<span class="property">inverseStack</span>.<span class="property">size</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">delete</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="property">inverseStack</span>.<span class="property">size</span>) &#123;</span><br><span class="line">      <span class="keyword">while</span> (!<span class="variable language_">this</span>.<span class="property">stack</span>.<span class="property">size</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">inverseStack</span>.<span class="title function_">push</span>(<span class="variable language_">this</span>.<span class="property">stack</span>.<span class="title function_">pop</span>());</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 判断是否为空</span></span><br><span class="line">    <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="property">inverseStack</span>.<span class="property">size</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">inverseStack</span>.<span class="title function_">pop</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">&quot;Empty queue!&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="用两个队列实现栈"><a href="#用两个队列实现栈" class="headerlink" title="用两个队列实现栈"></a>用两个队列实现栈</h2><p>前提同上。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Queue</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">queue</span> = []</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">size</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">stack</span>.<span class="property">length</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">in</span>(<span class="params">element</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">stack</span>.<span class="title function_">push</span>(element);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">out</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">stack</span>.<span class="title function_">shift</span>();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>思路和上面类似，但不大一样。每次元素出队时，所有元素一定会转移到另一个队列中。因此，插入和删除一定发生在有元素的队列。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Stack</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">queue</span> = <span class="keyword">new</span> <span class="title class_">Queue</span>();</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">backupQueue</span> = <span class="keyword">new</span> <span class="title class_">Queue</span>();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">append</span>(<span class="params">element</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (queue.<span class="property">size</span>) &#123;</span><br><span class="line">      queue.<span class="title function_">in</span>(element);</span><br><span class="line">      <span class="keyword">return</span> queue.<span class="property">size</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      backupQueue.<span class="title function_">in</span>(element);</span><br><span class="line">      <span class="keyword">return</span> backupQueue.<span class="property">size</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">delete</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (queue.<span class="property">size</span>) &#123;</span><br><span class="line">      <span class="keyword">let</span> element;</span><br><span class="line">      <span class="keyword">while</span>(queue.<span class="property">size</span> &gt; <span class="number">1</span>) &#123;</span><br><span class="line">        element = queue.<span class="title function_">out</span>();</span><br><span class="line">        backupQueue.<span class="title function_">in</span>(element);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> queue.<span class="title function_">out</span>();</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span>(backQueue.<span class="property">size</span> &gt; <span class="number">1</span>) &#123;</span><br><span class="line">      <span class="keyword">let</span> element;</span><br><span class="line">      <span class="keyword">while</span>(backupQueue.<span class="property">size</span>) &#123;</span><br><span class="line">        element = backupQueue.<span class="title function_">out</span>();</span><br><span class="line">        queue.<span class="title function_">in</span>(element);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> backupQueue.<span class="title function_">out</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">&quot;Empty stack!&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="斐波那契数列"><a href="#斐波那契数列" class="headerlink" title="斐波那契数列"></a>斐波那契数列</h2><p>使用递归的代码好写，但是效率低；使用循环更好。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fibonacci</span>(<span class="params">n</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (n &lt; <span class="number">2</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> n;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> a = <span class="number">0</span>,</span><br><span class="line">      b = <span class="number">1</span>,</span><br><span class="line">      res = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">2</span>; i &lt;= n; i++) &#123;</span><br><span class="line">    [res, a, b] = [a + b, b, res];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>变种还有“青蛙跳台阶”等类最优子问题的问题。</p>
<h2 id="旋转数组的最小数字"><a href="#旋转数组的最小数字" class="headerlink" title="旋转数组的最小数字"></a>旋转数组的最小数字</h2><p><strong>前提</strong>，将数组开头的部分元素搬运到数组的末尾，寻找最小的元素。</p>
<p>使用二分查找，右半边递增时，最小元素在左半边。左半边递增时，最小元素在右半边。注意下面两种情况：</p>
<ul>
<li>数组未做旋转</li>
<li>旋转后，头尾元素相等</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">findMin</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!arr || !.<span class="property">arr</span>.<span class="property">length</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> lindex = <span class="number">0</span>,</span><br><span class="line">      rindex = arr.<span class="property">length</span> - <span class="number">1</span>,</span><br><span class="line">      res = lindex;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (arr[lindex] &gt;= arr[rindex]) &#123;</span><br><span class="line">    <span class="keyword">if</span> (rindex - lindex === <span class="number">1</span>) &#123;</span><br><span class="line">      res = rindex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    res = (lindex + rindex) / <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 特殊情况</span></span><br><span class="line">    <span class="keyword">if</span> (arr[res] == arr[lindex] &amp;&amp; arr[res] == arr[rindex]) &#123;</span><br><span class="line">      <span class="keyword">return</span> arr.<span class="title function_">reduce</span>(<span class="function">(<span class="params">min, val</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">min</span>(min, val);</span><br><span class="line">      &#125;, arr[<span class="number">0</span>]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (arr[res] &gt;= arr[lindex]) &#123;</span><br><span class="line">      lindex = res;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (arr[res] &lt;= arr[rindex]) &#123;</span><br><span class="line">      rindex = res;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> arr[res];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="回溯法"><a href="#回溯法" class="headerlink" title="回溯法"></a>回溯法</h2><p>通常适合用递归法实现，到达某个节点时，尝试所有可能，并在满足条件时递归到下一节点。</p>
<h3 id="矩阵中的路径"><a href="#矩阵中的路径" class="headerlink" title="矩阵中的路径"></a>矩阵中的路径</h3><p><strong>前提</strong>，判断矩阵中有无一条不交叉路径能够返回指定字符串</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">hasPath</span>(<span class="params">arr, str</span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!arr || !arr.<span class="property">length</span> || !str) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 使用数组记录历史数据，防止交叉</span></span><br><span class="line">  <span class="keyword">let</span> occupied = arr.<span class="title function_">map</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> arr[<span class="number">0</span>].<span class="title function_">map</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> pathMath = <span class="keyword">function</span>(<span class="params">i, j, str</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!str) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (i &lt; <span class="number">0</span> || i &gt;= arr.<span class="property">length</span> || j &lt; <span class="number">0</span> || i &gt;= arr[<span class="number">0</span>].<span class="property">length</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (str.<span class="title function_">substr</span>(<span class="number">0</span>, <span class="number">1</span>) == arr[i][j]) &#123;</span><br><span class="line">      occupied[i][j] = <span class="literal">true</span>;</span><br><span class="line">      <span class="keyword">let</span> newStr = str.<span class="title function_">substr</span>(<span class="number">1</span>),</span><br><span class="line">          res = <span class="title function_">pathMath</span>(i-<span class="number">1</span>, j, newStr) || <span class="title function_">pathMath</span>(i+<span class="number">1</span>, j, newStr) || <span class="title function_">pathMath</span>(i, j-<span class="number">1</span>, newStr) || <span class="title function_">pathMath</span>(i, j+<span class="number">1</span>, newStr);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 回溯</span></span><br><span class="line">      <span class="keyword">if</span> (!res) &#123;</span><br><span class="line">        occupied[i][j] = <span class="literal">false</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  arr.<span class="title function_">foreach</span>(<span class="function">(<span class="params">val, i</span>) =&gt;</span> &#123;</span><br><span class="line">    val.<span class="title function_">foreach</span>(<span class="function">(<span class="params">val, j</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="title function_">pathMatch</span>(i, j, str)) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="机器人的运动范围"><a href="#机器人的运动范围" class="headerlink" title="机器人的运动范围"></a>机器人的运动范围</h3><p><strong>前提</strong>，m行n列的矩阵，机器人从(0,0)出发不能进入数位和大于k的格子，求能到的格子个数。</p>
<p>思路同上甚至更简单。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">gridCount</span>(<span class="params">rowCount, colCount, limit</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (limit &lt; <span class="number">0</span> || rowCount &lt;= <span class="number">0</span> || colCount &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 使用数组记录历史数据，减少冗余查询</span></span><br><span class="line">  <span class="keyword">let</span> walked = [];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> count = <span class="keyword">function</span>(<span class="params">row, col</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> cnt = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_">check</span>(row, col)) &#123;</span><br><span class="line">      <span class="comment">// 不必还原，减少重复查询</span></span><br><span class="line">      walked[row * rowCount + col] = <span class="literal">true</span>;</span><br><span class="line">      cnt = <span class="number">1</span> + <span class="title function_">count</span>(row-<span class="number">1</span>, col) + <span class="title function_">count</span>(row+<span class="number">1</span>, col) + <span class="title function_">count</span>(row, col-<span class="number">1</span>) + <span class="title function_">count</span>(row, col+<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> cnt;</span><br><span class="line">  &#125;,</span><br><span class="line">    check = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> row &gt;= <span class="number">0</span> &amp;&amp; col &gt;= <span class="number">0</span> &amp;&amp; !walked[row * rowCount + col] &amp;&amp; <span class="title function_">digitSum</span>(row) + <span class="title function_">digitSum</span>(col) &lt;= limit;</span><br><span class="line">  &#125;,</span><br><span class="line">    digitSum = <span class="keyword">function</span>(<span class="params">num</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(num &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      sum += num % <span class="number">10</span>;</span><br><span class="line">      num /= <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">count</span>(row, col)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="剪绳子"><a href="#剪绳子" class="headerlink" title="剪绳子"></a>剪绳子</h2><p><strong>前提</strong>，绳长为整数，切成若干段，使得绳长乘积最大。</p>
<p>类似于《算法导论》里的裁切钢管。首先可以用<strong>动态规划</strong>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">cutRope</span>(<span class="params">len</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (len &lt; <span class="number">4</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> len - <span class="number">2</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> cut = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">4</span>; i &lt;= len; i++) &#123;</span><br><span class="line">    <span class="keyword">let</span> max = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">1</span>; j &lt;= i / <span class="number">2</span>; j++) &#123;</span><br><span class="line">      <span class="keyword">let</span> mul = cut[j-<span class="number">1</span>] * cut[i-j-<span class="number">1</span>];</span><br><span class="line">      <span class="keyword">if</span> (max &lt; mul) &#123;</span><br><span class="line">        max = mul;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cut.<span class="title function_">push</span>(max);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> cut[len-<span class="number">1</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>经过数学推导，<code>n&gt;=5</code>时，<code>2(n-2)&gt;n</code>且<code>3(n-3)&gt;n</code>且<code>2(n-2)&gt;=3(n-3)</code>，因此有最优子问题的解法。根据<strong>贪婪算法</strong>，应该尽量多切长度为3的绳子段。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">cutRope</span>(<span class="params">len</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (len &lt; <span class="number">4</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> len - <span class="number">2</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 多切长度为3的绳子段</span></span><br><span class="line">  <span class="keyword">let</span> cntOf3 = len / <span class="number">3</span>,</span><br><span class="line">      cntOf2 = <span class="number">1</span>,</span><br><span class="line">      remain = len % <span class="number">3</span>;</span><br><span class="line">  <span class="comment">// 长度为4时，应该切成两个2</span></span><br><span class="line">  <span class="keyword">if</span> (remain === <span class="number">1</span>) &#123;</span><br><span class="line">    cntOf3--;</span><br><span class="line">    cntOf2 = <span class="number">2</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">pow</span>(<span class="number">3</span>, cntOf3) * cntOf2</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="位运算"><a href="#位运算" class="headerlink" title="位运算"></a>位运算</h2><p>经常用于奇技淫巧。在C风格的解法中常用。JS中应该不常出现。</p>
<h3 id="二进制中1的数目"><a href="#二进制中1的数目" class="headerlink" title="二进制中1的数目"></a>二进制中1的数目</h3><p>通过移位操作，需要注意的是，对入参移位容易出现死循环，可以对1进行移位并比较。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">numOf1</span>(<span class="params">n</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> cnt = <span class="number">0</span>,</span><br><span class="line">      flag = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span>(flag) &#123;</span><br><span class="line">    <span class="keyword">if</span> (n &amp; flag) &#123;</span><br><span class="line">      cnt++;</span><br><span class="line">    &#125;</span><br><span class="line">    flag &lt;&lt;= <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> cnt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>二进制整数减1相当于右侧0值变成1，最右侧1变成0，<strong>此时和原数做按位与，可以消掉最右侧0</strong>。利用这个特点可以进一步提高效率。这种思路可以用来解决很多二进制问题。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">numOf1</span>(<span class="params">n</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> cnt = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span>(n) &#123;</span><br><span class="line">    ++cnt;</span><br><span class="line">    n = (n-<span class="number">1</span>) &amp; n;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> cnt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="数值的整数次方"><a href="#数值的整数次方" class="headerlink" title="数值的整数次方"></a>数值的整数次方</h2><p><strong>前提</strong>，不得使用库函数，需要考虑大数问题</p>
<p>用类似二分法的思想，由2到4，由4到8，由8到16。时间复杂度O(logn)。同时注意边界情况。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">pow</span>(<span class="params">base, exp</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> isNeg = exp &gt; <span class="number">0</span>,</span><br><span class="line">      res = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (exp == <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (base == <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">unsignedPow</span>(<span class="params">base, exp</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (exp === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (exp === <span class="number">1</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> base;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> res = <span class="title function_">unsigned</span>(base, exp &gt;&gt; <span class="number">1</span>);</span><br><span class="line">    res *= res;</span><br><span class="line">    <span class="keyword">if</span> (exp &amp; <span class="number">0x1</span> === <span class="number">1</span>) &#123;</span><br><span class="line">      res *= base;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  res = <span class="title function_">unsignedPow</span>(base, <span class="title class_">Math</span>.<span class="title function_">abs</span>(exp));</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (isNeg) &#123;</span><br><span class="line">    res = <span class="number">1</span> / res;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="按顺序打印从0到最大的n位数字"><a href="#按顺序打印从0到最大的n位数字" class="headerlink" title="按顺序打印从0到最大的n位数字"></a>按顺序打印从0到最大的n位数字</h2><p>大数问题。自定义数据结构实现整数+1操作，或者通过递归for循环依次打印每一位数字，像下面这样。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">printNums</span>(<span class="params">n</span>) &#123;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">print</span>(<span class="params">str, n</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="number">1</span> === n) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(str + i);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      n--;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="number">0</span> === i) &#123;</span><br><span class="line">          <span class="title function_">print</span>(str, n);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="title function_">print</span>(str + i, n);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (n &lt; <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">print</span>(<span class="string">&#x27;&#x27;</span>, n);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="删除链表节点"><a href="#删除链表节点" class="headerlink" title="删除链表节点"></a>删除链表节点</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">LinkedListNode</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">value, next</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">value</span> = value;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">next</span> = next</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="O-1-时间删除单向链表中某节点"><a href="#O-1-时间删除单向链表中某节点" class="headerlink" title="O(1)时间删除单向链表中某节点"></a>O(1)时间删除单向链表中某节点</h3><p>通常思路，需要从头结点循环找到节点的上一个节点，将它的<code>next</code>属性设置删除节点的<code>next</code>。但是这么做是O(n)的复杂度。更好的方法是，借尸还魂，覆盖当前节点的<code>next</code>节点，然后重设<code>next</code>节点跳过下一节点。</p>
<p><em>（因为JS中没有指针一说，这种模拟不能完全还原原题的问题）</em></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">removeNode</span>(<span class="params">head, node</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!head || !node) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!node.<span class="property">next</span>) &#123; <span class="comment">// 不是尾节点</span></span><br><span class="line">    node.<span class="property">next</span> = node.<span class="property">next</span>.<span class="property">next</span>;</span><br><span class="line">    node.<span class="property">value</span> = node.<span class="property">value</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (node == head) &#123; <span class="comment">// 链表只有一个节点</span></span><br><span class="line">    head = <span class="literal">null</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123; <span class="comment">// 是尾节点，只能循环</span></span><br><span class="line">    <span class="keyword">let</span> n = head;</span><br><span class="line">    <span class="keyword">while</span> (n.<span class="property">next</span> !== node) &#123;</span><br><span class="line">      n = n.<span class="property">next</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    n.<span class="property">next</span> = <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="表示数值的字符串"><a href="#表示数值的字符串" class="headerlink" title="表示数值的字符串"></a>表示数值的字符串</h2><p>考察思维的全面性。包括正数负数、小数、科学技术法都要考虑。格式遵循<code>[+|-]?(\d+)(\.\d+)?([e|E][+|-]?\d+)?</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 正则表达式</span></span><br><span class="line">/\d/.<span class="title function_">test</span>(str);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 类型转换</span></span><br><span class="line">!<span class="built_in">isNaN</span>(+str);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>JS下解决问题并不如C++自然。下面是C++风格的解法</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">bool</span> <span class="title">judgeUnsignedInt</span><span class="params">(<span class="type">const</span> <span class="type">char</span> ** str)</span> </span>&#123;</span><br><span class="line">  <span class="type">const</span> <span class="type">char</span> * start = *str;</span><br><span class="line">  <span class="keyword">while</span>(**str != \<span class="number">0</span> &amp;&amp; **str &gt;= <span class="string">&#x27;0&#x27;</span> &amp;&amp; **str &lt;= <span class="string">&#x27;9&#x27;</span>) &#123;</span><br><span class="line">    ++(*str);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> *str &gt; start;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">judgeInt</span><span class="params">(<span class="type">const</span> <span class="type">char</span> ** str)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (**str === <span class="string">&#x27;+&#x27;</span> || **str === <span class="string">&#x27;-&#x27;</span>) &#123;</span><br><span class="line">    ++(*str);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">judgeUnisignedInt</span>(str);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">isNumber</span><span class="params">(<span class="type">const</span> <span class="type">char</span> * str)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (str == null) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 先扫描整数部分</span></span><br><span class="line">  <span class="type">bool</span> res = <span class="built_in">judgeInt</span>(&amp;str);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (*str == <span class="string">&#x27;.&#x27;</span>) &#123;</span><br><span class="line">    ++str;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 扫描小数部分</span></span><br><span class="line">    res = <span class="built_in">judgeUnsignedInt</span>(&amp;str) || res;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (*str == <span class="string">&#x27;e&#x27;</span> || *str == <span class="string">&#x27;E&#x27;</span>) &#123;</span><br><span class="line">    ++str;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 扫描指数部分</span></span><br><span class="line">    res = <span class="built_in">judgeInt</span>(&amp;str) &amp;&amp; res;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> res &amp;&amp; *str == <span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="调整整数数组中奇数和偶数的位置"><a href="#调整整数数组中奇数和偶数的位置" class="headerlink" title="调整整数数组中奇数和偶数的位置"></a>调整整数数组中奇数和偶数的位置</h2><p><strong>前提</strong>，使得奇数都位于前边，偶数都位于后边。</p>
<p>考虑拓展性，用一个函数作为衡量指标，判断元素应该在前还是在后。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">adjustArr</span>(<span class="params">arr, standard</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!arr || !arr.<span class="property">length</span> || arr.<span class="property">length</span> &lt; <span class="number">2</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> arr;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> start = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">let</span> end = arr.<span class="property">length</span> - <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">while</span> (start &lt; end) &#123;</span><br><span class="line">    <span class="keyword">while</span> (start &lt; end &amp;&amp; !<span class="title function_">standard</span>(arr[start])) &#123;</span><br><span class="line">      start++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (start &lt; end &amp;&amp; <span class="title function_">standard</span>(arr[end])) &#123;</span><br><span class="line">      end--;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (start &lt; end) &#123;</span><br><span class="line">      [arr[start], arr[end]] = [arr[end], arr[start]];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在后面的标准</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">standard</span> (num) &#123;</span><br><span class="line">  <span class="keyword">return</span> num / <span class="number">2</span> == <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h1 id="鲁棒性"><a href="#鲁棒性" class="headerlink" title="鲁棒性"></a>鲁棒性</h1><h2 id="链表的倒数第K的节点"><a href="#链表的倒数第K的节点" class="headerlink" title="链表的倒数第K的节点"></a>链表的倒数第K的节点</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">LinkedList</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">head</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">head</span> = head;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Node</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">next</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">next</span> = next;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>考虑鲁棒性：</p>
<ul>
<li>空数组</li>
<li>k超过数组长度</li>
<li>k&#x3D;0</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">findLastK</span>(<span class="params">head, k</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!head || k === <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> flag = head;</span><br><span class="line">  <span class="keyword">while</span> (--k &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (head.<span class="property">next</span>) &#123;</span><br><span class="line">      head = head.<span class="property">next</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> res = head;</span><br><span class="line">  <span class="keyword">while</span>(flag = flag.<span class="property">next</span>) &#123;</span><br><span class="line">    res = res.<span class="property">next</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<div class="tip">当一个指针不足以解决链表的问题时，通常两个指针就可以解决问题</div>

<h2 id="链表中环的入口节点"><a href="#链表中环的入口节点" class="headerlink" title="链表中环的入口节点"></a>链表中环的入口节点</h2><p>思路：</p>
<ol>
<li>链表中有环存在时，走得快的指针将会追上走得慢的指针。</li>
<li>确定环的长度k后，让两个指针同速，一个领先k位出发，相遇的位置即是入口</li>
</ol>
<p>考虑鲁棒性：</p>
<ul>
<li>无环时</li>
<li>寻找相遇点的时候注意next属性是否存在</li>
<li>头结点为环入口时</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">entryOfLoop</span>(<span class="params">list</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!list || !list.<span class="property">length</span> || !list.<span class="property">length</span> &lt; <span class="number">2</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 找到相遇位置</span></span><br><span class="line">  <span class="keyword">let</span> slow, fast, meet;</span><br><span class="line">  slow = fast = list.<span class="property">head</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (!!fast &amp;&amp; !!slow) &#123;</span><br><span class="line">    <span class="keyword">if</span> (fast === slow) &#123;</span><br><span class="line">      meet = fast;</span><br><span class="line">    &#125;</span><br><span class="line">    slow = slow.<span class="property">next</span>;</span><br><span class="line">    fast = fast.<span class="property">next</span>;</span><br><span class="line">    <span class="keyword">if</span> (!!fast) &#123;</span><br><span class="line">      fast = fast.<span class="property">next</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 无环存在时跳出</span></span><br><span class="line">  <span class="keyword">if</span> (!!meet) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 确定环的长度</span></span><br><span class="line">  <span class="keyword">let</span> length = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">let</span> tmpNode = meet.<span class="property">next</span>;</span><br><span class="line">  <span class="keyword">while</span> (tmpNode !== meet) &#123;</span><br><span class="line">    tmpNode = tmpNode.<span class="property">next</span>;</span><br><span class="line">    length++;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 先移动一个指针</span></span><br><span class="line">  <span class="keyword">let</span> first = list.<span class="property">head</span>;</span><br><span class="line">  <span class="keyword">while</span> (length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    first = first.<span class="property">next</span>;</span><br><span class="line">    length--;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 再移动第二个指针</span></span><br><span class="line">  <span class="keyword">let</span> next = list.<span class="property">head</span>；</span><br><span class="line">  <span class="keyword">while</span> (next !== first) &#123;</span><br><span class="line">    first = first.<span class="property">next</span>;</span><br><span class="line">    next = next.<span class="property">next</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> first;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="反转链表"><a href="#反转链表" class="headerlink" title="反转链表"></a>反转链表</h2><p><strong>前提</strong>：反转链表并输出反转后的头节点。</p>
<p>考虑鲁棒性：</p>
<ul>
<li>边界情况，如空链表或长度为1的链表</li>
<li>反转过程中链表断裂</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">reverseList</span>(<span class="params">list</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> node = list.<span class="property">head</span>;</span><br><span class="line">  <span class="keyword">let</span> prev = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span>(!!node) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!node.<span class="property">next</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> node;</span><br><span class="line">    &#125;</span><br><span class="line">    node.<span class="property">next</span> = prev;</span><br><span class="line">    prev = node;</span><br><span class="line">    node = node.<span class="property">next</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="合并两个排序的链表"><a href="#合并两个排序的链表" class="headerlink" title="合并两个排序的链表"></a>合并两个排序的链表</h2><p>类似归并排序。</p>
<p>考虑鲁棒性：</p>
<ul>
<li>空链表</li>
<li>链表长度为1</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">merge</span>(<span class="params">list1, list2</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!list1) &#123;</span><br><span class="line">    <span class="keyword">return</span> list2;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!list2) &#123;</span><br><span class="line">    <span class="keyword">return</span> list1;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> node = <span class="keyword">new</span> <span class="title class_">Node</span>();</span><br><span class="line">  <span class="keyword">let</span> list = <span class="keyword">new</span> <span class="title class_">List</span>(node);</span><br><span class="line">  <span class="keyword">let</span> h1 = list1.<span class="property">head</span>;</span><br><span class="line">  <span class="keyword">let</span> h2 = list2.<span class="property">head</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (!!h1 || !!h2) &#123;</span><br><span class="line">    <span class="keyword">let</span> next;</span><br><span class="line">    <span class="keyword">if</span> (!!h1 &amp;&amp; !h2 || h1.<span class="property">value</span> &lt; h2.<span class="property">value</span>) &#123;</span><br><span class="line">      next = h1.<span class="property">value</span>;</span><br><span class="line">      node = node.<span class="property">next</span>;</span><br><span class="line">      h1 = h1.<span class="property">next</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      next = h2.<span class="property">value</span>;</span><br><span class="line">      h2 = h2.<span class="property">next</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    node.<span class="property">next</span> = <span class="keyword">new</span> <span class="title class_">Node</span>(next);</span><br><span class="line">    node = node.<span class="property">next</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  list.<span class="property">head</span> = list.<span class="property">head</span>.<span class="property">next</span>;</span><br><span class="line">  <span class="keyword">return</span> list;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="树的子结构"><a href="#树的子结构" class="headerlink" title="树的子结构"></a>树的子结构</h2><p><strong>前提</strong>：判断树A中是否能找到和树B结构一样的子树。</p>
<p>使用递归思路更简单。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">hasSubTree</span>(<span class="params">heap, needle</span>) &#123;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">match</span>(<span class="params">root1, root2</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!root2) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!root1) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">match</span>(root1.<span class="property">left</span>, root2.<span class="property">left</span>) &amp;&amp; <span class="title function_">match</span>(root1.<span class="property">right</span>, root2.<span class="property">right</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> root1 = heap.<span class="property">root</span>;</span><br><span class="line">  <span class="keyword">let</span> root2 = needle.<span class="property">root</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> res = <span class="literal">false</span>;</span><br><span class="line">  <span class="keyword">if</span> (!root1 &amp;&amp; !root2) &#123;</span><br><span class="line">    <span class="keyword">if</span> (root1.<span class="property">value</span> === root2.<span class="property">value</span>) &#123;</span><br><span class="line">      res = <span class="title function_">match</span>(root1, root2);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!res) &#123;</span><br><span class="line">      res = <span class="title function_">hasSubTree</span>(root1.<span class="property">left</span>, root2);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!res) &#123;</span><br><span class="line">      res = <span class="title function_">hasSubTree</span>(root1.<span class="property">right</span>, root2);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="形象化"><a href="#形象化" class="headerlink" title="形象化"></a>形象化</h1><h2 id="二叉树的镜像"><a href="#二叉树的镜像" class="headerlink" title="二叉树的镜像"></a>二叉树的镜像</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">mirrorBinaryTree</span>(<span class="params">root</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!root) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 跳过叶子节点</span></span><br><span class="line">  <span class="keyword">if</span> (!root.<span class="property">left</span> &amp;&amp; !root.<span class="property">right</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  [root.<span class="property">left</span>, root.<span class="property">right</span>] = [root.<span class="property">right</span>, root.<span class="property">left</span>];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!!root.<span class="property">left</span>) &#123;</span><br><span class="line">    <span class="title function_">mirrotBinaryTree</span>(root.<span class="property">left</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!!root.<span class="property">right</span>) &#123;</span><br><span class="line">    <span class="title function_">mirrotBinaryTree</span>(root.<span class="property">right</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="对称的二叉树"><a href="#对称的二叉树" class="headerlink" title="对称的二叉树"></a>对称的二叉树</h2><p>即前序和对称遍历结果一致。和上面类似。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">isSymmetrical</span>(<span class="params">root</span>) &#123;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">judge</span>(<span class="params">root1, root2</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (root1 === <span class="literal">null</span> &amp;&amp; root2 === <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (root1 === <span class="literal">null</span> || root2 === <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (root1.<span class="property">value</span> !== root2.<span class="property">value2</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">judge</span>(root1.<span class="property">left</span>, root2.<span class="property">right</span>) &amp;&amp; <span class="title function_">judge</span>(root1.<span class="property">right</span>, root2.<span class="property">left</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">judge</span>(root, root);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="顺时针打印矩阵"><a href="#顺时针打印矩阵" class="headerlink" title="顺时针打印矩阵"></a>顺时针打印矩阵</h2><ul>
<li>打印一行“删去”一行，打印一列“删去”一列。</li>
<li>最后一圈先向右再向下再向上再向左，根据顺序共有4种可能，通过if语句区分</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">printMatrix</span>(<span class="params">matrix</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!matrix || !matrix.<span class="property">length</span> || !matrix[<span class="number">0</span>].<span class="property">length</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> top = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">let</span> left = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">let</span> bottom = matrix.<span class="property">length</span> - <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">let</span> right = (matrix[<span class="number">0</span>].<span class="property">length</span> ? matrix[<span class="number">0</span>].<span class="property">length</span> - <span class="number">1</span> : <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (left &lt;= right &amp;&amp; top &lt;= bottom) &#123;</span><br><span class="line">    <span class="comment">// 向右</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = left; i &lt;= right; i++) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(matrix[top][i] + <span class="string">&#x27; &#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    top++;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 向下</span></span><br><span class="line">    <span class="keyword">if</span> (top &lt;= bottom) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> i = top; i &lt;= bottom; i++) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(matrix[i][right] + <span class="string">&#x27; &#x27;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      right--;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 向左</span></span><br><span class="line">    <span class="keyword">if</span> (left &lt;= right) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> i = right; i &gt;= left; i--) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(matrix[bottom][i] + <span class="string">&#x27; &#x27;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      bottom--;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 向上</span></span><br><span class="line">    <span class="keyword">if</span> (top &lt;= bottom) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> i = bottom; i &gt;= top; i--) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(matrix[i][left] + <span class="string">&#x27; &#x27;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      left++;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>剑指offer上的思路是利用每圈的起始x和y坐标相等，判断循环终止条件，再根据条件决定一圈打印几行。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">printMatrix</span>(<span class="params">matrix</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!matrix || !matrix.<span class="property">length</span> || !matrix[<span class="number">0</span>].<span class="property">length</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">print</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> width = column - start - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">let</span> height = rows - start - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = start; i &lt;= width; i++) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(matrix[start][i]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (start &lt; height) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt;= height; i++) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(matrix[i][width]);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (start &lt; width &amp;&amp; start &lt; height) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> i = width-<span class="number">1</span>; i &gt;= start; i--) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(matrix[height][i]);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (start &lt; width &amp;&amp; start &lt; height - <span class="number">1</span>) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> i = height-<span class="number">1</span>; i &lt; start+<span class="number">1</span>; i--) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(matrix[i][start]);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> start = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">let</span> rows = matrix.<span class="property">length</span>;</span><br><span class="line">  <span class="keyword">let</span> column = matrix[<span class="number">0</span>].<span class="property">length</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (column &gt; <span class="number">2</span> * start &amp;&amp; rows &gt; <span class="number">2</span> * start) &#123;</span><br><span class="line">    <span class="title function_">print</span>();</span><br><span class="line">    ++start;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="包含min函数的栈"><a href="#包含min函数的栈" class="headerlink" title="包含min函数的栈"></a>包含min函数的栈</h2><p><strong>前提</strong>，设计栈的数据结构，使min、push和pop的时间复杂度都是O(1)。</p>
<p>注意：若使用变量保存最小元素，那么在最小元素出栈后会找不到次小元素。可见只使用一个变量是不够的，为配合原始栈的结构，需要有一个辅助栈记录最小元素的位置。（画图可以很容易理解）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Stack</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">stack</span> = [];</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">minStack</span> = [];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">min</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> len = <span class="variable language_">this</span>.<span class="property">minStack</span>.<span class="property">length</span>;</span><br><span class="line">    <span class="keyword">return</span> (len ? <span class="variable language_">this</span>.<span class="property">minStack</span>[len-<span class="number">1</span>] : <span class="title class_">Infinity</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">push</span>(<span class="params">element</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">stack</span>.<span class="title function_">push</span>(element);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">minStack</span>.<span class="title function_">push</span>(<span class="title class_">Math</span>.<span class="title function_">min</span>(<span class="variable language_">this</span>.<span class="property">min</span>, element));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">pop</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">stack</span>.<span class="title function_">pop</span>();</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">minStack</span>.<span class="title function_">pop</span>();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">top</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="variable language_">this</span>.<span class="property">stack</span>.<span class="property">length</span> ? <span class="variable language_">this</span>.<span class="property">stack</span>[<span class="variable language_">this</span>.<span class="property">stack</span>.<span class="property">length</span>-<span class="number">1</span>] : <span class="literal">null</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="栈的压入、弹出序列"><a href="#栈的压入、弹出序列" class="headerlink" title="栈的压入、弹出序列"></a>栈的压入、弹出序列</h2><p><strong>前提</strong>：给定栈的压入顺序，判断某个出栈顺序是否可能</p>
<p>通过举例具象化思考。如入栈顺序为[1, 2, 3, 4, 5]，[4, 3, 5, 2, 1]就是一个可能的例子。首先，4是第一个出栈元素，则[1,2,3]此时已经入栈，4出栈后，3位栈顶，出栈后，5不在栈内，将5入栈。剩下的5，2，1同理。因此，可以发现下面规律。</p>
<ol>
<li>第一个出栈元素前的入栈序列此时正在栈内</li>
<li>之后所有的出栈元素，先在栈顶寻找，若有，则出栈；若没有，在栈外元素中寻找</li>
<li>若找到，将其入栈，若找不到，则返回false</li>
<li>如此循环直到栈空</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">isPopOrder</span>(<span class="params">push, pop</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (push.<span class="property">length</span> !== pop.<span class="property">length</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (!push.<span class="property">length</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 寻找当前栈内元素</span></span><br><span class="line">  <span class="keyword">let</span> first = pop[<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">let</span> index = push.<span class="title function_">indexOf</span>(first);</span><br><span class="line">  <span class="keyword">let</span> stack = [];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (index === -<span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt;= index-<span class="number">1</span>; i++) &#123;</span><br><span class="line">    stack.<span class="title function_">push</span>(push[i]);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> rest = push.<span class="title function_">slice</span>(index);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">2</span>, len = pop.<span class="property">length</span>; i &lt; len; i++) &#123;</span><br><span class="line">    <span class="keyword">let</span> value = pop[i];</span><br><span class="line">    <span class="keyword">if</span> (!push.<span class="property">length</span> || push[push.<span class="property">length</span>-<span class="number">1</span>] !== value) &#123;</span><br><span class="line">      <span class="keyword">let</span> index = rest.<span class="title function_">indexOf</span>(value);</span><br><span class="line">      <span class="keyword">if</span> (index === -<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      push.<span class="title function_">push</span>(value);</span><br><span class="line">      rest.<span class="title function_">splice</span>(index, <span class="number">1</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      push.<span class="title function_">pop</span>();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="从上到下打印二叉树"><a href="#从上到下打印二叉树" class="headerlink" title="从上到下打印二叉树"></a>从上到下打印二叉树</h2><p>使用队列保证先后顺序。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Queue</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">queue</span> = []</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">length</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">queue</span>.<span class="property">length</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">in</span>(<span class="params">element</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">queue</span>.<span class="title function_">push</span>(element);</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">queue</span>.<span class="property">length</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">out</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">queue</span>.<span class="title function_">shift</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">printTreeByTier</span>(<span class="params">root</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!root) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> q = <span class="keyword">new</span> <span class="title class_">Queue</span>();</span><br><span class="line">  q.<span class="title function_">in</span>(root);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span>(q.<span class="property">length</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> node = q.<span class="title function_">out</span>();</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(node.<span class="property">value</span>);</span><br><span class="line">    <span class="keyword">if</span> (node.<span class="property">left</span>) &#123;</span><br><span class="line">      q.<span class="title function_">in</span>(node.<span class="property">left</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (node.<span class="property">right</span>) &#123;</span><br><span class="line">      q.<span class="title function_">in</span>(node.<span class="property">right</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="进阶：分行从上到下打印二叉树"><a href="#进阶：分行从上到下打印二叉树" class="headerlink" title="进阶：分行从上到下打印二叉树"></a>进阶：分行从上到下打印二叉树</h3><p>和上面类似，区别在入队时需要携带层数信息。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Queue</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">queue</span> = []</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">length</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">queue</span>.<span class="property">length</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">in</span>(<span class="params">element</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">queue</span>.<span class="title function_">push</span>(element);</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">queue</span>.<span class="property">length</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">out</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">queue</span>.<span class="title function_">shift</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">printTreeByTier</span>(<span class="params">root</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!root) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> tier = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">let</span> q = <span class="keyword">new</span> <span class="title class_">Queue</span>();</span><br><span class="line">  q.<span class="title function_">in</span>(&#123;</span><br><span class="line">    root,</span><br><span class="line">    tier,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (q.<span class="property">length</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> node = q.<span class="title function_">out</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (node.<span class="property">tier</span> !== tier) &#123;</span><br><span class="line">      tier = node.<span class="property">tier</span>;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;换行&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (q.<span class="property">root</span>.<span class="property">left</span>) &#123;</span><br><span class="line">      q.<span class="title function_">in</span>(&#123;</span><br><span class="line">        <span class="attr">root</span>: q.<span class="property">root</span>.<span class="property">left</span>,</span><br><span class="line">        <span class="attr">tier</span>: tier+<span class="number">1</span>,</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (q.<span class="property">root</span>.<span class="property">right</span>) &#123;</span><br><span class="line">      q.<span class="title function_">in</span>(&#123;</span><br><span class="line">        <span class="attr">root</span>: q.<span class="property">root</span>.<span class="property">right</span>,</span><br><span class="line">        <span class="attr">tier</span>: tier+<span class="number">1</span>,</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="进阶2：之字形打印二叉树"><a href="#进阶2：之字形打印二叉树" class="headerlink" title="进阶2：之字形打印二叉树"></a>进阶2：之字形打印二叉树</h3><p><strong>前提</strong>：第一行从左到右打印，第二行从右到左打印，以此类推。</p>
<p>因为每层的顺序都相反，很适合栈存储。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 栈的数据结构实现略</span></span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">printTreeByZ</span>(<span class="params">root</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!root) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> stack1 = <span class="keyword">new</span> <span class="title class_">Stack</span>();</span><br><span class="line">  <span class="keyword">let</span> stack2 = <span class="keyword">new</span> <span class="title class_">Stack</span>();</span><br><span class="line">  <span class="comment">// 当前在哪个栈内</span></span><br><span class="line">  <span class="keyword">let</span> curr = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">  stack1.<span class="title function_">push</span>(root);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (!stack1.<span class="title function_">empty</span>() || !stack2.<span class="title function_">empty</span>()) &#123;</span><br><span class="line">    <span class="keyword">if</span> (curr == <span class="number">1</span>) &#123;</span><br><span class="line">      <span class="keyword">let</span> node = stack1.<span class="title function_">pop</span>();</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(node.<span class="property">value</span>);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (node.<span class="property">left</span>) &#123;</span><br><span class="line">        stack2.<span class="title function_">push</span>(node.<span class="property">left</span>);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (node.<span class="property">right</span>) &#123;</span><br><span class="line">        stack2.<span class="title function_">push</span>(node.<span class="property">right</span>);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (stack1.<span class="title function_">empty</span>()) &#123;</span><br><span class="line">        curr = <span class="number">2</span>;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;换行&quot;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> node = stack2.<span class="title function_">pop</span>();</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(node.<span class="property">value</span>);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (node.<span class="property">right</span>) &#123;</span><br><span class="line">        stack1.<span class="title function_">push</span>(node.<span class="property">right</span>);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (node.<span class="property">left</span>) &#123;</span><br><span class="line">        stack1.<span class="title function_">push</span>(node.<span class="property">left</span>);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (stack2.<span class="title function_">emtpy</span>()) &#123;</span><br><span class="line">        curr = <span class="number">1</span>;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;换行&quot;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="二叉搜索树的后序遍历序列"><a href="#二叉搜索树的后序遍历序列" class="headerlink" title="二叉搜索树的后序遍历序列"></a>二叉搜索树的后序遍历序列</h2><p><strong>前提</strong>：判断整数序列是否是某个二叉搜索树的后序遍历序列，并假设所有数字都不相同</p>
<p>利用二叉搜索树的特点，结合后序遍历时尾元素为根节点，递归判断。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">verifySeqOfBST</span>(<span class="params">seq</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!seq || seq.<span class="property">length</span> &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> len = seq.<span class="property">length</span>;</span><br><span class="line">  <span class="keyword">let</span> root = seq[len-<span class="number">1</span>];</span><br><span class="line">  <span class="comment">// 找到右子树的起点</span></span><br><span class="line">  <span class="keyword">let</span> rightIndex = seq.<span class="title function_">findIndex</span>(<span class="function">(<span class="params">element</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> element &gt; root;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 右子树的节点需要都大于左节点</span></span><br><span class="line">  <span class="keyword">if</span> (rightIndex == -<span class="number">1</span> || seq.<span class="title function_">slice</span>(rightIndex).<span class="title function_">every</span>(<span class="function">(<span class="params">element</span>)=&gt;</span>&#123; <span class="keyword">return</span> element &gt; root; &#125;)) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 递归判断左右子树</span></span><br><span class="line">  <span class="keyword">let</span> left = rightIndex &lt;= <span class="number">0</span> || <span class="title function_">verifySeqOfBST</span>(seq.<span class="title function_">slice</span>(<span class="number">0</span>, rightIndex));</span><br><span class="line">  <span class="keyword">let</span> right = rightIndex == -<span class="number">1</span> || <span class="title function_">verifySeqOfBST</span>(seq.<span class="title function_">slice</span>(rightIndex));</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> left &amp;&amp; right;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="二叉树中和为某值的路径"><a href="#二叉树中和为某值的路径" class="headerlink" title="二叉树中和为某值的路径"></a>二叉树中和为某值的路径</h2><p><strong>前提</strong>：找到所有满足要求的路径</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">findPaths</span>(<span class="params">root, target</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> path = [];</span><br><span class="line">  <span class="keyword">let</span> sum = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">let</span> node = root;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 利用闭包共享变量</span></span><br><span class="line">  <span class="keyword">let</span> <span class="title function_">find</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    path.<span class="title function_">push</span>(node);</span><br><span class="line">    sum += node.<span class="property">value</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (sum === target) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(path)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (node.<span class="property">left</span>) &#123;</span><br><span class="line">      node = node.<span class="property">left</span>;</span><br><span class="line">      <span class="title function_">find</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (node.<span class="property">right</span>) &#123;</span><br><span class="line">      node = node.<span class="property">right</span>;</span><br><span class="line">      <span class="title function_">find</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 不要忘了弹出栈顶元素</span></span><br><span class="line">    path.<span class="title function_">pop</span>();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">find</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="分解"><a href="#分解" class="headerlink" title="分解"></a>分解</h1><h2 id="复杂链表的复制"><a href="#复杂链表的复制" class="headerlink" title="复杂链表的复制"></a>复杂链表的复制</h2><p><strong>前提</strong>：复杂链表中每个节点除了一个指向下个节点的指针外，还有一个指向任意节点的指针</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ComplexLinkedListNode</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">&#123;value, next, extra&#125;</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">value</span> = value;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">next</span> = next;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">extra</span> = extra;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>困难在extra属性的复制，在O(n)的时间复杂度，O(1)的空间复杂度的要求下，问题可以分解成3步</p>
<ol>
<li>在每个原始节点后接上复制节点</li>
<li>原样复制extra属性</li>
<li>将复制的链表拆出来</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">copyLinkedList</span>(<span class="params">head</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!head) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> node = head;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Step1: 在每个节点后添加一个复制节点</span></span><br><span class="line">  <span class="keyword">while</span> (node) &#123;</span><br><span class="line">    node.<span class="property">next</span> = <span class="keyword">new</span> <span class="title class_">ComplexLinkedListNode</span>()(&#123;</span><br><span class="line">      <span class="attr">value</span>: node.<span class="property">value</span>,</span><br><span class="line">      <span class="attr">next</span>: node.<span class="property">next</span></span><br><span class="line">    &#125;);</span><br><span class="line">    node = node.<span class="property">next</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Step2: 复制每个节点的extra属性</span></span><br><span class="line">  node = head;</span><br><span class="line">  <span class="keyword">while</span> (node) &#123;</span><br><span class="line">    <span class="comment">// 这一步大大减少了时间复杂度</span></span><br><span class="line">    node.<span class="property">next</span>.<span class="property">extra</span> = node.<span class="property">extra</span>.<span class="property">next</span>;</span><br><span class="line">    node = node.<span class="property">next</span>.<span class="property">next</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Step3: 拆开两条链</span></span><br><span class="line">  node = head</span><br><span class="line">  <span class="keyword">let</span> newNode = <span class="keyword">new</span> <span class="title class_">ComplexLinkedListNode</span>();</span><br><span class="line">  <span class="keyword">while</span> (node) &#123;</span><br><span class="line">    newNode.<span class="property">next</span> = node.<span class="property">next</span>;</span><br><span class="line">    node.<span class="property">next</span> = node.<span class="property">next</span>.<span class="property">next</span>;</span><br><span class="line">    node = node.<span class="property">next</span>;</span><br><span class="line">    newNode = newNode.<span class="property">next</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> newNode.<span class="property">next</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="二叉搜索树和双向链表"><a href="#二叉搜索树和双向链表" class="headerlink" title="二叉搜索树和双向链表"></a>二叉搜索树和双向链表</h2><p><strong>前提</strong>：将一个二叉搜索树转换成一个排序的双向链表，不允许新建节点。</p>
<p>一般涉及到树结构的问题，使用递归都要更直观方便。本题中，可以把问题拆解成，将根节点和已组装好的左右双向链表组装。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">transBSTToBilink</span>(<span class="params">root</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!root) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> <span class="title function_">split</span> = (<span class="params">root, type</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> node = <span class="keyword">new</span> <span class="title class_">Node</span>(root.<span class="property">value</span>);</span><br><span class="line">    <span class="keyword">let</span> left = node;</span><br><span class="line">    <span class="keyword">let</span> right = node;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (root.<span class="property">left</span>) &#123;</span><br><span class="line">      left = <span class="title function_">split</span>(root.<span class="property">left</span>, <span class="string">&#x27;left&#x27;</span>);</span><br><span class="line">      left.<span class="property">next</span> = node;</span><br><span class="line">      node.<span class="property">next</span> = left;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (root.<span class="property">right</span>) &#123;</span><br><span class="line">      right = <span class="title function_">split</span>(root.<span class="property">right</span>, <span class="string">&#x27;right&#x27;</span>)</span><br><span class="line">      node.<span class="property">next</span> = right;</span><br><span class="line">      right.<span class="property">next</span> = node;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 通过type区分当前是左子树还是右子树，从而返回最大点或最小点</span></span><br><span class="line">    <span class="keyword">return</span> (type === <span class="string">&#x27;left&#x27;</span> ? right : left);</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">split</span>(root);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="序列化二叉树"><a href="#序列化二叉树" class="headerlink" title="序列化二叉树"></a>序列化二叉树</h2><p><strong>要求</strong>：实习序列化和反序列化函数</p>
<p>通常情况需要两种遍历序列才能还原二叉树，这是因为二叉树非完全。对空缺的节点使用特殊字符，即可消除二义性，使用单一遍历序列还原二叉树。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">BinaryTree</span> &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">BinaryTree</span>.<span class="property">serialize</span> = <span class="function">(<span class="params">root</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> str = [];</span><br><span class="line">  <span class="keyword">let</span> <span class="title function_">serialize</span> = (<span class="params">root</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (!root) &#123;</span><br><span class="line">      str.<span class="title function_">push</span>(<span class="string">&#x27;$&#x27;</span>);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    str.<span class="title function_">push</span>(root.<span class="property">value</span>);</span><br><span class="line">    <span class="title function_">serialize</span>(root.<span class="property">left</span>);</span><br><span class="line">    <span class="title function_">serialize</span>(root.<span class="property">right</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="title function_">serialize</span>(root);</span><br><span class="line">  <span class="keyword">return</span> str.<span class="title function_">join</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">BinaryTree</span>.<span class="property">parse</span> = <span class="function">(<span class="params">str</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (!str) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> i = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">let</span> len = str.<span class="property">length</span>;</span><br><span class="line">  <span class="keyword">let</span> <span class="title function_">parse</span> = (<span class="params">str</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (str[i] === <span class="string">&#x27;$&#x27;</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> root = <span class="keyword">new</span> <span class="title class_">Node</span>(+str[i]);</span><br><span class="line">    <span class="comment">// 最后一个节点必是叶节点</span></span><br><span class="line">    ++i, root.<span class="property">left</span> = <span class="title function_">parse</span>(str);</span><br><span class="line">    ++i, root.<span class="property">right</span> = <span class="title function_">parse</span>(str);</span><br><span class="line">    <span class="keyword">return</span> root;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">parse</span>(str);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="字符串的排列"><a href="#字符串的排列" class="headerlink" title="字符串的排列"></a>字符串的排列</h2><p><strong>前提</strong>：不考虑重复字符的问题<br><strong>要求</strong>：输入一个字符串，输出字符串中字符的所有排列</p>
<p>此题可以用递归，《剑指offer》上的解法简单易行。JS中对字符串的限制（只读）使得代码和C风格有别。这里我们考虑输入是一个字符数组。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">combinations</span>(<span class="params">str</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!str.<span class="property">length</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> len = str.<span class="property">length</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">combine</span>(<span class="params">comb, strs, start</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (start === len - <span class="number">1</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(comb + strs[start]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = start; i &lt; len; i++) &#123;</span><br><span class="line">      [strs[start], strs[i]] = [strs[i], strs[start]];</span><br><span class="line">      <span class="comment">// 需要通过slice方法传递复制</span></span><br><span class="line">      <span class="title function_">combine</span>(comb + strs[start], strs.<span class="title function_">slice</span>(), start+<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">combine</span>(<span class="string">&#x27;&#x27;</span>, str, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="求字符串的组合（也可以叫求子集）"><a href="#求字符串的组合（也可以叫求子集）" class="headerlink" title="求字符串的组合（也可以叫求子集）"></a>求字符串的组合（也可以叫求子集）</h3><p>总共的解数目为$2^n$。从最低位开始，向上寻找时，有两种可能：新字符不出现，新字符出现。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">subsets</span>(<span class="params">str</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!str.<span class="property">length</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">reduce</span>(<span class="params">res, i</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (i === str.<span class="property">length</span>-<span class="number">1</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(res + str[i]);</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">reduce</span>(res+str[i], i+<span class="number">1</span>);</span><br><span class="line">    <span class="title function_">reduce</span>(res, i+<span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">reduce</span>(<span class="string">&#x27;&#x27;</span>, <span class="number">0</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="输入8个数字的数组放在正方体的8个顶点，有无可能每对面对应的4个顶点和相等"><a href="#输入8个数字的数组放在正方体的8个顶点，有无可能每对面对应的4个顶点和相等" class="headerlink" title="输入8个数字的数组放在正方体的8个顶点，有无可能每对面对应的4个顶点和相等"></a>输入8个数字的数组放在正方体的8个顶点，有无可能每对面对应的4个顶点和相等</h3><p>相等于寻找全排列，使得a1+a2+a3+a4&#x3D;a5+a6+a7+a8，且a1+a3+a5+a7&#x3D;a2+a4+a6+a8，且a1+a2+a5+a6&#x3D;a3+a4+a7+a8。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">findComb</span>(<span class="params">nums</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> len = nums.<span class="property">length</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">combine</span>(<span class="params">nums, start</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (start === len-<span class="number">1</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span>(<span class="title function_">test</span>(nums)) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(nums);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = start; i &lt; len; i++) &#123;</span><br><span class="line">      [nums[start], nums[i]] = [nums[i], nums[start]];</span><br><span class="line">      <span class="title function_">combine</span>(nums.<span class="title function_">slice</span>(), start + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">nums</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> nums[<span class="number">0</span>] + nums[<span class="number">1</span>] + nums[<span class="number">2</span>] + nums[<span class="number">3</span>] == nums[<span class="number">4</span>] + nums[<span class="number">5</span>] + nums[<span class="number">6</span>] + nums[<span class="number">7</span>] &amp;&amp;</span><br><span class="line">        nums[<span class="number">0</span>] + nums[<span class="number">2</span>] + nums[<span class="number">4</span>] + nums[<span class="number">5</span>] == nums[<span class="number">1</span>] + nums[<span class="number">3</span>] + nums[<span class="number">5</span>] + nums[<span class="number">7</span>] &amp;&amp;</span><br><span class="line">        nums[<span class="number">0</span>] + nums[<span class="number">1</span>] + nums[<span class="number">6</span>] + nums[<span class="number">7</span>] == nums[<span class="number">2</span>] + nums[<span class="number">3</span>] + nums[<span class="number">4</span>] + nums[<span class="number">5</span>];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">combine</span>(nums, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="8皇后问题"><a href="#8皇后问题" class="headerlink" title="8皇后问题"></a>8皇后问题</h3><p>8皇后的限制条件在，不得同行同列，不得位于同一对角线。因此，为长度为8的数组初始化填入1~8，代表行数。填入的数代表列数，因为每行每列都只有一个皇后。所以全排列中，只需要删除满足下面条件的排列即可：</p>
<ul>
<li><code>i-j != columns[i] - columns[j]</code>且<code>j-i != columns[i] - columns[j]</code>，即不在一个对角线上</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">eightQueens</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> count = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">combine</span>(<span class="params">queens, start</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (start === <span class="number">7</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(queens);</span><br><span class="line">      count++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = start; i &lt; <span class="number">8</span>; i++) &#123;</span><br><span class="line">      [queens[start], queens[i]] = [queens[i], queens[start]];</span><br><span class="line">      <span class="keyword">if</span> (<span class="title function_">test</span>(queens, start)) &#123;</span><br><span class="line">        <span class="title function_">combine</span>(queens.<span class="title function_">slice</span>(), start+<span class="number">1</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        [queens[start], queens[i]] = [queens[i], queens[start]];</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">queens, end</span>) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; end; i++) &#123;</span><br><span class="line">      <span class="keyword">let</span> diff = queens[end] - queens[i];</span><br><span class="line">      <span class="keyword">if</span> (diff == end - i || -diff == end - i) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">combine</span>([<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>], <span class="number">0</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(count);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这种思路会带来重复的解，按照<a target="_blank" rel="noopener" href="http://www.matrix67.com/blog/archives/266">Matrix67的思路</a>，可以通过位运算求解。使用row（列占用情况），ld（左下右上对角线占用），rd（右下左上对角线占用）三个变量存储当前列的禁用情况。使用“1”表示禁用，“0”表示可用。解决n皇后的问题代码仅在10行左右。详细解释见链接。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">nQueens</span>(<span class="params">n</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!n || n &lt;= <span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line">  <span class="keyword">let</span> limit = (<span class="number">1</span> &lt;&lt; n) - <span class="number">1</span>, sum = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">queen</span>(<span class="params">row, ld, rd</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (row !== limit) &#123;</span><br><span class="line">      <span class="keyword">let</span> pos = limit &amp; ~(row | ld | rd);</span><br><span class="line">      <span class="keyword">while</span> (pos) &#123;</span><br><span class="line">        <span class="keyword">let</span> p = pos &amp; -pos; <span class="comment">// 得到最右侧可放子的位置</span></span><br><span class="line">        pos -= p; <span class="comment">// 除去这个位置</span></span><br><span class="line">        <span class="title function_">queen</span>(row|p, (ld|p) &lt;&lt; <span class="number">1</span>, (rd|p) &gt;&gt; <span class="number">1</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> sum++;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">queen</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">  <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h1 id="时间效率"><a href="#时间效率" class="headerlink" title="时间效率"></a>时间效率</h1><h2 id="数组中出现次数超过一半的数字"><a href="#数组中出现次数超过一半的数字" class="headerlink" title="数组中出现次数超过一半的数字"></a>数组中出现次数超过一半的数字</h2><p>思路1：超过一半的数组一定出现在中位数的位置，结合快排的思想，找到中位数<br>思路2：遍历所有数字，遇到与major相同的元素时，计数器+1，反之-1。计数器为0时，更换major。返回最后的major</p>
<p>注意：最后需要检查数组是否有满足条件的元素</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">findMajor</span>(<span class="params">nums</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!nums.<span class="property">length</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> major;</span><br><span class="line">  times = <span class="number">0</span>;</span><br><span class="line">  nums.<span class="title function_">forEach</span>(<span class="function">(<span class="params">num</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (times === <span class="number">0</span>) &#123;</span><br><span class="line">      major = num;</span><br><span class="line">      times = <span class="number">1</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (num === major) &#123;</span><br><span class="line">      times++;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      times--;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (nums.<span class="title function_">reduce</span>(<span class="function">(<span class="params">sum, num</span>) =&gt;</span> &#123; <span class="keyword">return</span> sum + (num === major); &#125;, <span class="number">0</span>) * <span class="number">2</span> &gt; nums.<span class="property">length</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> major;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="最小的k个数"><a href="#最小的k个数" class="headerlink" title="最小的k个数"></a>最小的k个数</h2><p>同样的两种思路：</p>
<ol>
<li>利用快排的中的partition，找到前k个数，时间复杂度O(n)，但是会修改数组<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">partition</span>(<span class="params">arr, start, end</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (start &gt;= end) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> index = start -<span class="number">1</span>;</span><br><span class="line">  <span class="keyword">let</span> split = arr[end];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = start; i &lt; end; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (arr[i] &lt; split) &#123;</span><br><span class="line">      index++;</span><br><span class="line">      <span class="keyword">if</span> (i != index) &#123;</span><br><span class="line">        [arr[i], arr[index]] = [arr[index], arr[i]];</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  index++;</span><br><span class="line">  arr[end] = arr[index];</span><br><span class="line">  arr[index] = split;</span><br><span class="line">  <span class="keyword">return</span> index;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">minKNums</span>(<span class="params">nums, k</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!nums || k &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (k &gt;= nums.<span class="property">length</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> nums;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> start = <span class="number">0</span>,</span><br><span class="line">      end = nums.<span class="property">length</span> - <span class="number">1</span>,</span><br><span class="line">      index = <span class="title function_">partition</span>(nums, start, end);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span>(index != k-<span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (index &gt; k-<span class="number">1</span>) &#123;</span><br><span class="line">      end = index - <span class="number">1</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      start = index + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    index = <span class="title function_">partition</span>(nums, start, end);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(nums.<span class="title function_">slice</span>(<span class="number">0</span>, k));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>维护一个排序的长度为k的数据容器，当容器满时，根据容器最大值更新容器，时间复杂度O(nlogk)，空间复杂度O(k)，但是在k较小时，性能很接近</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MinSet</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">max</span>() &#123;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">len</span>() &#123;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">input</span>(<span class="params">element</span>) &#123;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">remove</span>(<span class="params">element</span>) &#123;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">toString</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">minKNums</span>(<span class="params">nums, k</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!nums || k &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (k &gt;= nums.<span class="property">length</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> nums;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> set = <span class="keyword">new</span> <span class="title class_">MinSet</span>();</span><br><span class="line">  nums.<span class="title function_">forEach</span>(<span class="function"><span class="params">num</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (set.<span class="property">len</span> === k) &#123;</span><br><span class="line">      <span class="keyword">if</span> (set.<span class="property">max</span>.<span class="property">value</span> &gt; num) &#123;</span><br><span class="line">        set.<span class="title function_">remove</span>(set.<span class="property">max</span>);</span><br><span class="line">        set.<span class="title function_">input</span>(num);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      set.<span class="title function_">input</span>(num);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  set.<span class="title function_">toString</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="数据流的中位数"><a href="#数据流的中位数" class="headerlink" title="数据流的中位数"></a>数据流的中位数</h2><p>使用二叉树、最大堆最小堆完成。保证最大堆和最小堆的数目差不超过1即可。当然，首先要实现最大和最小堆</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">inherit</span>(<span class="params">son, father</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> prototype = <span class="title class_">Object</span>.<span class="title function_">create</span>(father.<span class="property"><span class="keyword">prototype</span></span>);</span><br><span class="line">  prototype.<span class="property">constructor</span> = son;</span><br><span class="line">  son.<span class="property">constructor</span> = prototype;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Heap</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">heap</span> = [];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Heap</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">parent</span> = <span class="keyword">function</span>(<span class="params">i</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (i+<span class="number">1</span>) / <span class="number">2</span> - <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Heap</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">left</span> = <span class="keyword">function</span>(<span class="params">i</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">2</span> * i + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Heap</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">right</span> = <span class="keyword">function</span>(<span class="params">i</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">2</span> * i + <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Heap</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">size</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">heap</span>.<span class="property">length</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">MinHeap</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title class_">Heap</span>.<span class="title function_">call</span>(<span class="variable language_">this</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">minify</span>(<span class="params">index</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> l = <span class="variable language_">this</span>.<span class="title function_">left</span>(index),</span><br><span class="line">        r = <span class="variable language_">this</span>.<span class="title function_">right</span>(index),</span><br><span class="line">        size = <span class="variable language_">this</span>.<span class="property">length</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (l &lt; size &amp;&amp; <span class="variable language_">this</span>.<span class="property">heap</span>[l] &lt; <span class="variable language_">this</span>.<span class="property">heap</span>[index]) &#123;</span><br><span class="line">      i = l;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      i = index;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (r &lt; size &amp;&amp; <span class="variable language_">this</span>.<span class="property">heap</span>[r] &lt; <span class="variable language_">this</span>.<span class="property">heap</span>[i]) &#123;</span><br><span class="line">      i = r;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (i != index) &#123;</span><br><span class="line">      [<span class="variable language_">this</span>.<span class="property">heap</span>[index], <span class="variable language_">this</span>.<span class="property">heap</span>[i]] = [<span class="variable language_">this</span>.<span class="property">heap</span>[i], <span class="variable language_">this</span>.<span class="property">heap</span>[index]];</span><br><span class="line">      <span class="title function_">minify</span>(i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">add</span> = <span class="keyword">function</span>(<span class="params">num</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">heap</span>.<span class="title function_">push</span>(num);</span><br><span class="line">    <span class="title function_">minify</span>(<span class="variable language_">this</span>.<span class="property">heap</span>.<span class="property">length</span> / <span class="number">2</span> - <span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">shift</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> num = <span class="variable language_">this</span>.<span class="property">heap</span>.<span class="title function_">shift</span>();</span><br><span class="line">    <span class="title function_">minify</span>(<span class="variable language_">this</span>.<span class="property">heap</span>.<span class="property">length</span> / <span class="number">2</span> - <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> num;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">top</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">heap</span>[<span class="number">0</span>];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">inherit</span>(<span class="title class_">MinHeap</span>, <span class="title class_">Heap</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">MaxHeap</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title class_">Heap</span>.<span class="title function_">call</span>(<span class="variable language_">this</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">maxify</span>(<span class="params">index</span>) &#123;</span><br><span class="line">    <span class="comment">//... 同上</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">add</span> = <span class="keyword">function</span>(<span class="params">num</span>) &#123;</span><br><span class="line">    <span class="comment">//... 同上</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">shift</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> num = <span class="variable language_">this</span>.<span class="property">heap</span>.<span class="title function_">shift</span>();</span><br><span class="line">    <span class="title function_">maxify</span>(<span class="variable language_">this</span>.<span class="property">heap</span>.<span class="property">length</span> / <span class="number">2</span> - <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> num;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">top</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">   <span class="comment">//... 同上</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 借助上面的MinHeap和MaxHeap实现 */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">DynamicArray</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">min</span> = <span class="keyword">new</span> <span class="title class_">MinHeap</span>();</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">max</span> = <span class="keyword">new</span> <span class="title class_">MaxHeap</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">DynamicArray</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">insert</span> = <span class="keyword">function</span>(<span class="params">num</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> minSize = <span class="variable language_">this</span>.<span class="property">min</span>.<span class="title function_">size</span>(),</span><br><span class="line">      maxSize = <span class="variable language_">this</span>.<span class="property">max</span>.<span class="title function_">size</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (minSize === maxSize) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">min</span>.<span class="title function_">add</span>(num);</span><br><span class="line">    <span class="comment">// 插入在最小堆，但是数字在最大堆的范围</span></span><br><span class="line">    <span class="keyword">if</span> (maxSize &gt; <span class="number">0</span> &amp;&amp; num &lt; <span class="variable language_">this</span>.<span class="property">max</span>.<span class="title function_">top</span>()) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">max</span>.<span class="title function_">add</span>(<span class="variable language_">this</span>.<span class="property">min</span>.<span class="title function_">shift</span>());</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">max</span>.<span class="title function_">add</span>(num);</span><br><span class="line">    <span class="comment">// 同理，插入在最大堆，但是数字在最小堆的范围</span></span><br><span class="line">    <span class="keyword">if</span> (minSize &gt; <span class="number">0</span> &amp;&amp; num &lt; <span class="variable language_">this</span>.<span class="property">min</span>.<span class="title function_">top</span>()) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">min</span>.<span class="title function_">add</span>(<span class="variable language_">this</span>.<span class="property">max</span>.<span class="title function_">shift</span>());</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">DynamicArray</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">getMedian</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> size = <span class="variable language_">this</span>.<span class="property">min</span>.<span class="title function_">size</span>() + <span class="variable language_">this</span>.<span class="property">max</span>.<span class="title function_">size</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!size) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">&#x27;Empty array.&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (size &amp; <span class="number">0x01</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">min</span>.<span class="title function_">top</span>();</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="variable language_">this</span>.<span class="property">min</span>.<span class="title function_">top</span>() + <span class="variable language_">this</span>.<span class="property">max</span>.<span class="title function_">top</span>()) / <span class="number">2</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="连续子数组的最大和"><a href="#连续子数组的最大和" class="headerlink" title="连续子数组的最大和"></a>连续子数组的最大和</h2><p><strong>前提</strong>：数组由正负数组成。</p>
<p>经典的动态规划问题。用双指针的方法，采用贪婪算法，用<code>f[i]</code>表示以第i位结尾的最大和，当<code>f[i-1]&lt;=0</code>时，可以抛弃之前的和，以当前元素为<code>f[i]</code>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">maxSum</span>(<span class="params">nums</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!nums.<span class="property">length</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> len = nums.<span class="property">length</span>;</span><br><span class="line">  <span class="keyword">let</span> res = nums[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; len; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (res &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">      res = nums[i];</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      res += nums[i];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="1-n整数中1出现的次数"><a href="#1-n整数中1出现的次数" class="headerlink" title="1~n整数中1出现的次数"></a>1~n整数中1出现的次数</h2><p>这种数学题，多半会有找规律的简单方法。普通的方法是，逐个寻找每个数字中1出现的次数，时间复杂度O(nlogn)。逐位寻找1出现的次数，再累加，时间复杂度可以降至O(logn)。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">numOf1</span>(<span class="params">num</span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">count</span>(<span class="params">str</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> first = str[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">let</span> len = str.<span class="property">length</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (str.<span class="property">length</span> === <span class="number">1</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> first &gt; <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 第一位中1出现的次数</span></span><br><span class="line">    <span class="keyword">let</span> firstCount = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (first &gt; <span class="number">1</span>) &#123;</span><br><span class="line">      firstCount = <span class="title class_">Math</span>.<span class="title function_">pow</span>(<span class="number">10</span>, len-<span class="number">1</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (first == <span class="number">1</span>) &#123;</span><br><span class="line">      firstCount = +str.<span class="title function_">substr</span>(<span class="number">1</span>) + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 剩下的位数可以通过排列组合计算</span></span><br><span class="line">    <span class="keyword">let</span> otherCount = first * (len - <span class="number">1</span>) * <span class="title class_">Math</span>.<span class="title function_">pow</span>(<span class="number">10</span>, len-<span class="number">2</span>);</span><br><span class="line">    <span class="keyword">return</span> firstCount + otherCount + <span class="title function_">count</span>(str.<span class="title function_">substr</span>(<span class="number">1</span>));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (num &lt; <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> numStr = <span class="string">`<span class="subst">$&#123;num&#125;</span>`</span>;</span><br><span class="line">  <span class="title function_">count</span>(numStr);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="数字序列中某一位的数字"><a href="#数字序列中某一位的数字" class="headerlink" title="数字序列中某一位的数字"></a>数字序列中某一位的数字</h2><p><strong>前提</strong>：数字以<code>0123456789101112131415...</code>的格式序列化</p>
<p>需要找到规律。1位数占用10位，2位数占用180位，3位数占用2700位，……，n位数占用9 * (10 ^ n)位。通过循环确定位数后，对n取余，能知道是n位数第几个数的第几位。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">findKthDigit</span>(<span class="params">k</span>) &#123;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">countInDigits</span>(<span class="params">n</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (n === <span class="number">1</span> ? <span class="number">10</span> : <span class="number">9</span> * <span class="title class_">Math</span>.<span class="title function_">pow</span>(<span class="number">10</span>, n-<span class="number">1</span>));</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 第m个n位数的第k位</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">find</span>(<span class="params">n, m, k</span>) &#123;</span><br><span class="line">    <span class="comment">// 找到n位数的起始</span></span><br><span class="line">    <span class="keyword">let</span> start = <span class="title class_">Math</span>.<span class="title function_">pow</span>(<span class="number">10</span>, n - <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">let</span> num = start + m;</span><br><span class="line">    <span class="keyword">return</span> num / <span class="title class_">Math</span>.<span class="title function_">pow</span>(<span class="number">10</span>, n - k - <span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (k &lt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> digits = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">while</span> (k &gt;= <span class="title function_">countInDigits</span>(digits)) &#123;</span><br><span class="line">    k -= <span class="title function_">countInDigits</span>(digits++);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">find</span>(digits, k / digits, k % digits);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="把数组排成最小的数"><a href="#把数组排成最小的数" class="headerlink" title="把数组排成最小的数"></a>把数组排成最小的数</h2><p><strong>要求</strong>：拼接数组中的数，使之最小</p>
<p>此题的思路在拓展排序的规则。当组合<code>mn &lt; nm</code>时，说明m应该在前，即元素间的比较准则是mn和nm的大小关系。注意大数问题，应该比较字符串。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">minComb</span>(<span class="params">nums</span>) &#123;</span><br><span class="line">  nums.<span class="title function_">sort</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="string">&#x27;&#x27;</span> + a + b &gt; <span class="string">&#x27;&#x27;</span> + b + a ? <span class="number">1</span> : -<span class="number">1</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="把数字翻译成字符串"><a href="#把数字翻译成字符串" class="headerlink" title="把数字翻译成字符串"></a>把数字翻译成字符串</h2><p><strong>前提</strong>：0翻译成‘a’，1翻译成‘b’，逐位进行翻译，有时会有多种结果<br><strong>要求</strong>：求可能的结果数目</p>
<p>动态规划，避免重复解决子问题。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">translateCount</span>(<span class="params">numStr</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!numStr || +numStr &lt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> count;</span><br><span class="line">  <span class="keyword">let</span> counts = [];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = numStr.<span class="property">length</span> - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">    <span class="keyword">if</span> (i === numStr.<span class="property">length</span>) &#123;</span><br><span class="line">      count[i] = <span class="number">1</span>;</span><br><span class="line">      <span class="keyword">continue</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    count = count[i+<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">let</span> comb = +(count[i] + count[i+<span class="number">1</span>]);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (comb &lt;= <span class="number">25</span> &amp;&amp; comb &gt;= <span class="number">10</span>) &#123;</span><br><span class="line">      count += (i &lt; numStr.<span class="property">length</span> - <span class="number">2</span> ? counts[i+<span class="number">2</span>] : <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    count[i] = count;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> count[<span class="number">0</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="礼物的最大价值"><a href="#礼物的最大价值" class="headerlink" title="礼物的最大价值"></a>礼物的最大价值</h2><p><strong>前提</strong>：从m*n的格子中拿礼物，从左上角开始，每次向下或向右取一格，直到右下角<br><strong>要求</strong>：礼物价值总和最大</p>
<p>和上面的思路很类似，通过循环替代递归。比带有备忘录的递归更省时间和空间。坐标是(i, j)的格子最大总和只取决于(i-1, j)和(i, j-1)。因此可以用一维数组代替二维数组，减少空间使用。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">getMaxValue</span>(<span class="params">nums</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!nums.<span class="property">length</span> || !nums[<span class="number">0</span>].<span class="property">length</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> row = nums[<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">let</span> rows = nums.<span class="property">length</span>;</span><br><span class="line">  <span class="keyword">let</span> columns = nums[<span class="number">0</span>].<span class="property">length</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; rows; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; columns; j++) &#123;</span><br><span class="line">      <span class="keyword">let</span> up = (i &gt; <span class="number">0</span> ? row[j] : <span class="number">0</span>)</span><br><span class="line">      <span class="keyword">let</span> left = (j &gt; <span class="number">0</span> ? row[j-<span class="number">1</span>] : <span class="number">0</span>);</span><br><span class="line">      row[j] = <span class="title class_">Math</span>.<span class="title function_">max</span>(left, up) + nums[i][j];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> row[columns - <span class="number">1</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="最长的不包括重复字符的子字符串"><a href="#最长的不包括重复字符的子字符串" class="headerlink" title="最长的不包括重复字符的子字符串"></a>最长的不包括重复字符的子字符串</h2><p><strong>要求</strong>：返回字符串的长度</p>
<p>用类似动态规划的思路，借助之前的结果递推。同时，使用Object存储对应字符上次出现的位置，可以保证O(n)的时间复杂度。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">longestSubStrWithDup</span>(<span class="params">str</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!str.<span class="property">length</span> || str.<span class="property">length</span> &lt; <span class="number">2</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> str.<span class="property">length</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> pos = &#123;&#125;;</span><br><span class="line">  <span class="keyword">let</span> strArr = <span class="title class_">Array</span>.<span class="title function_">from</span>(str);</span><br><span class="line">  <span class="keyword">let</span> maxLen = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">let</span> curLen = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  strArr.<span class="title function_">forEach</span>(<span class="function">(<span class="params">char, num</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 此前未出现过或出现在当前最长子字符串之外</span></span><br><span class="line">    <span class="keyword">let</span> position = pos[char];</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> position !== <span class="string">&#x27;undefined&#x27;</span> || position + curLen &lt; i) &#123;</span><br><span class="line">      curLen++;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// 出现在此前的最长子字符串中时，需要更新长度值</span></span><br><span class="line">      <span class="keyword">if</span> (curLen &gt; maxLen) &#123;</span><br><span class="line">        maxLen = curLen;</span><br><span class="line">      &#125;</span><br><span class="line">      curLen = i - position;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 更新位置</span></span><br><span class="line">    pos[char] = i;</span><br><span class="line">  &#125;)；</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (curLen &gt; maxLen) &#123;</span><br><span class="line">    maxLen = curLen;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> maxLen;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="丑数"><a href="#丑数" class="headerlink" title="丑数"></a>丑数</h2><p><strong>前提</strong>：丑数是指只包含因子2、3、5的数。求给定位置的丑数</p>
<p>普通的思路是通过循环依次判断数字是否为丑数直到找到。在允许空间消耗时，我们用数组去存储所有的丑数，并不断更新数组。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">uglyNum</span>(<span class="params">k</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (k &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> count = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">let</span> ugly = [<span class="number">1</span>];</span><br><span class="line">  <span class="keyword">let</span> ugly2 = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">let</span> ugly3 = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">let</span> ugly5 = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span>(count &lt; k) &#123;</span><br><span class="line">    uglynums.<span class="title function_">push</span>(<span class="title class_">Math</span>.<span class="title function_">min</span>(ugly[ugly2]*<span class="number">2</span>, ugly[ugly3]*<span class="number">3</span>, ugly[ugly5]*<span class="number">5</span>));</span><br><span class="line">    <span class="keyword">while</span> (ugly[ugly2]*<span class="number">2</span> &lt;= ugly[count]) &#123;</span><br><span class="line">      ugly2++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (ugly[ugly3]*<span class="number">3</span> &lt;= ugly[count]) &#123;</span><br><span class="line">      ugly3++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (ugly[ugly5]*<span class="number">5</span> &lt;= ugly[count]) &#123;</span><br><span class="line">      ugly5++;</span><br><span class="line">    &#125;</span><br><span class="line">    count++;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> ugly.<span class="title function_">pop</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="第一个只出现一次的字符"><a href="#第一个只出现一次的字符" class="headerlink" title="第一个只出现一次的字符"></a>第一个只出现一次的字符</h2><p>哈希表，JavaScript中使用Object即可。第一次扫描时去除所有重复元素，第二次扫描时，打印第一个字符。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">firstUniqueChar</span>(<span class="params">str</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> strArr = <span class="title class_">Array</span>.<span class="title function_">from</span>(str);</span><br><span class="line">  <span class="keyword">let</span> chars = &#123;&#125;;</span><br><span class="line">  strArr.<span class="title function_">forEach</span>(<span class="function"><span class="params">char</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!chars[char]) &#123;</span><br><span class="line">      chars[char] = <span class="number">1</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      chars[char]++;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">  strArr.<span class="title function_">forEach</span>(<span class="function"><span class="params">char</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (chars[char] === <span class="number">1</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> char;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>类似问题都可以用哈希表解决。</p>
<h2 id="数组中的逆序对"><a href="#数组中的逆序对" class="headerlink" title="数组中的逆序对"></a>数组中的逆序对</h2><p>逆序对的存在是数组未排序的结果。因此使用排序算法得到交换元素的次数即可。最直观的使用冒泡排序，时间复杂度为O(n^2)。使用归并和快排可以达到O(nlogn)的时间复杂度。</p>
<p>略。</p>
<h2 id="两个链表的第一个公共节点"><a href="#两个链表的第一个公共节点" class="headerlink" title="两个链表的第一个公共节点"></a>两个链表的第一个公共节点</h2><p>因为链表从交汇节点后拥有相同的节点，所以，从后向前回溯，直到节点不同为止即可。时间复杂度O(m+n)，空间复杂度O(m+n)。若不使用辅助栈，空间复杂度还可降至O(1)。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">findFirstCommonNode</span>(<span class="params">list1, list2</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!list1 || !list2) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 遍历list1和list2到尾节点</span></span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 向前回溯直到节点不同</span></span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="排序数组中查找数字（二分查找）"><a href="#排序数组中查找数字（二分查找）" class="headerlink" title="排序数组中查找数字（二分查找）"></a>排序数组中查找数字（二分查找）</h2><h3 id="排序数组中数字出现的次数"><a href="#排序数组中数字出现的次数" class="headerlink" title="排序数组中数字出现的次数"></a>排序数组中数字出现的次数</h3><p>思路是，查找到数字第一次出现的地方和最后一次出现的地方。通过二分法查找，数字较小时，在右半边；较大时，在左半边；相等时判断左&#x2F;右是否还有该元素。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">numOfK</span>(<span class="params">arr, k</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!arr.<span class="property">length</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">findFirst</span>(<span class="params">start, end</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (start &gt; end) &#123;</span><br><span class="line">      <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> middle = (start + end) / <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">let</span> median = arr[middle];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (median &lt; k) &#123;</span><br><span class="line">      start = middle + <span class="number">1</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (median &gt; k) &#123;</span><br><span class="line">      end = middle - <span class="number">1</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (middle &gt; <span class="number">0</span> &amp;&amp; arr[middle-<span class="number">1</span>] === median) &#123;</span><br><span class="line">        end = middle - <span class="number">1</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> middle;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">findFirst</span>(start, end);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">findLast</span>(<span class="params">start, end</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (start &gt; end) &#123;</span><br><span class="line">      <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> middle = (start + end) / <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">let</span> median = arr[middle];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (median &lt; k) &#123;</span><br><span class="line">      start = middle + <span class="number">1</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (median &gt; k) &#123;</span><br><span class="line">      end = middle - <span class="number">1</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (middle &lt; arr.<span class="property">length</span>-<span class="number">1</span> &amp;&amp; arr[middle+<span class="number">1</span>] === median) &#123;</span><br><span class="line">        start = middle + <span class="number">1</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> middle;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">findLast</span>(start, end);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> first = <span class="title function_">findFirst</span>(<span class="number">0</span>, arr.<span class="property">length</span>-<span class="number">1</span>);</span><br><span class="line">  <span class="keyword">let</span> last = <span class="title function_">findLast</span>(<span class="number">0</span>, arr.<span class="property">length</span>-<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (<span class="title function_">findFirst</span>() === -<span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> last - first + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="寻找从0-n-1中缺少的数字"><a href="#寻找从0-n-1中缺少的数字" class="headerlink" title="寻找从0~n-1中缺少的数字"></a>寻找从0~n-1中缺少的数字</h3><p>数组事先排序时，借助二分法查找，时间复杂度O(logn)；未排序时，通过求和和<code>n(n-1)/2</code>求差得出（不考虑大数问题的话）。中间元素和下标相等时，在右半边寻找；不相等时，若左侧元素相等，则返回该元素，左侧元素不等时，在左半边寻找。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">findLeftNum</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> len = arr.<span class="property">length</span>;</span><br><span class="line">  <span class="keyword">if</span> (!len || len &lt; <span class="number">2</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> left = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">let</span> right = len - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (left &lt;= right) &#123;</span><br><span class="line">    <span class="keyword">let</span> middle = (left + right) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (arr[middle] === middle) &#123;</span><br><span class="line">      left = middle + <span class="number">1</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (middle &gt; <span class="number">0</span> &amp;&amp; arr[middle-<span class="number">1</span>] !== middle-<span class="number">1</span>) &#123;</span><br><span class="line">        right = middle - <span class="number">1</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> middle;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (left &gt; right) &#123;</span><br><span class="line">    <span class="keyword">return</span> len;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="数组中和下标相等的元素"><a href="#数组中和下标相等的元素" class="headerlink" title="数组中和下标相等的元素"></a>数组中和下标相等的元素</h3><p><strong>前提</strong>：数组元素都为整数，且单调递增。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">numsEqualsToIndex</span>(<span class="params">nums</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!nums.<span class="property">length</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> left = <span class="number">0</span>,</span><br><span class="line">      right = nums.<span class="property">length</span>-<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (left &lt;= right) &#123;</span><br><span class="line">    <span class="keyword">let</span> mid = (left + right) &gt;&gt; <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (nums[mid] === mid) &#123;</span><br><span class="line">      <span class="keyword">return</span> mid;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (nums[mid] &gt; mid) &#123;</span><br><span class="line">      right = middle - <span class="number">1</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      left = middle + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="二叉搜索树的第k大的节点（遍历）"><a href="#二叉搜索树的第k大的节点（遍历）" class="headerlink" title="二叉搜索树的第k大的节点（遍历）"></a>二叉搜索树的第k大的节点（遍历）</h2><p>利用二叉搜索树的中序遍历的特点，找到第k大的节点。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">findKthNode</span>(<span class="params">root, k</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (k &lt; <span class="number">1</span> || !root) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> res = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (root.<span class="property">left</span>) &#123;</span><br><span class="line">    res = <span class="title function_">findKthNode</span>(root.<span class="property">left</span>, k);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (res === <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (k === <span class="number">1</span>) &#123;</span><br><span class="line">      res = root;</span><br><span class="line">    &#125;</span><br><span class="line">    k--;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (root.<span class="property">right</span>) &#123;</span><br><span class="line">    res = <span class="title function_">findKthNode</span>(root.<span class="property">right</span>, k);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="二叉树的深度"><a href="#二叉树的深度" class="headerlink" title="二叉树的深度"></a>二叉树的深度</h2><p>使用递归，比较左右子树的深度，取较大值。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">treeDepth</span>(<span class="params">root</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!root) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> left = <span class="title function_">treeDepth</span>(root.<span class="property">left</span>);</span><br><span class="line">  <span class="keyword">let</span> right = <span class="title function_">treeDepth</span>(root.<span class="property">right</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">max</span>(left, right) + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="判断一棵树是否是平衡二叉树"><a href="#判断一棵树是否是平衡二叉树" class="headerlink" title="判断一棵树是否是平衡二叉树"></a>判断一棵树是否是平衡二叉树</h3><p>可以使用上面的思路，递归判断除叶节点外每个节点的左右子树深度。但是这样会重复遍历节点。但是如果使用后序遍历，就可以先遍历左右子树，再回到根节点。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">isBalanceTree</span>(<span class="params">root</span>) &#123;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">tree</span>(<span class="params">root</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!root) &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">depth</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">flag</span>: <span class="literal">true</span></span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> left = <span class="title function_">tree</span>(root.<span class="property">left</span>);</span><br><span class="line">    <span class="keyword">let</span> right = <span class="title function_">tree</span>(root.<span class="property">right</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (left.<span class="property">flag</span> &amp;&amp; right.<span class="property">flag</span>) &#123;</span><br><span class="line">      <span class="keyword">let</span> diff = left.<span class="property">depth</span> - right.<span class="property">depth</span>;</span><br><span class="line">      <span class="keyword">if</span> (diff &lt;= <span class="number">1</span> &amp;&amp; diff &gt;= -<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">          <span class="attr">depth</span>: <span class="number">1</span> + <span class="title class_">Math</span>.<span class="title function_">max</span>(left.<span class="property">depth</span>, right.<span class="property">depth</span>),</span><br><span class="line">          <span class="attr">flag</span>: <span class="literal">true</span></span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">flag</span>: <span class="literal">false</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">tree</span>(root);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="数组中数字出现的次数（位运算）"><a href="#数组中数字出现的次数（位运算）" class="headerlink" title="数组中数字出现的次数（位运算）"></a>数组中数字出现的次数（位运算）</h2><h3 id="在数组中找到唯二两个只出现一次的元素"><a href="#在数组中找到唯二两个只出现一次的元素" class="headerlink" title="在数组中找到唯二两个只出现一次的元素"></a>在数组中找到唯二两个只出现一次的元素</h3><p><strong>前提</strong>：数组中其他元素都出现两次。</p>
<p>还是使用异或，不过这次异或的结果是两个数组的异或结果。找到结果中第一位1，说明这一位两个数不同，据此将数组分成两部分，分别异或，得到最终结果。时间复杂度O(n)，空间复杂度O(1)。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">find2UniqueNums</span>(<span class="params">nums</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> sum = nums.<span class="title function_">reduce</span>(<span class="function">(<span class="params">sum, cur</span>) =&gt;</span> sum ^ cur);</span><br><span class="line">  <span class="keyword">let</span> index = sum &amp; -sum;</span><br><span class="line">  <span class="keyword">let</span> nums1 = nums.<span class="title function_">filter</span>(<span class="function"><span class="params">num</span> =&gt;</span> num &amp; index);</span><br><span class="line">  <span class="keyword">let</span> nums2 = nums.<span class="title function_">filter</span>(<span class="function"><span class="params">num</span> =&gt;</span> !num &amp; index);</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">unique1</span>: nums1.<span class="title function_">reduce</span>(<span class="function">(<span class="params">sum, cur</span>) =&gt;</span> sum ^ cur);</span><br><span class="line">    <span class="attr">unique2</span>: nums2.<span class="title function_">reduce</span>(<span class="function">(<span class="params">sum, cur</span>) =&gt;</span> sum ^ cur);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="在数组中找到唯一一个出现一次的数字"><a href="#在数组中找到唯一一个出现一次的数字" class="headerlink" title="在数组中找到唯一一个出现一次的数字"></a>在数组中找到唯一一个出现一次的数字</h3><p><strong>前提</strong>：其余数字都出现3次。</p>
<p>使用和上面类似的思路，使用二进制表示每一个数，用数组存储各位1出现的和，累加后，将每一位数字对3取余，得到的数字就是结果的二进制表示。</p>
<p>略</p>
<h2 id="和为s的若干数字（双指针）"><a href="#和为s的若干数字（双指针）" class="headerlink" title="和为s的若干数字（双指针）"></a>和为s的若干数字（双指针）</h2><h3 id="2个数"><a href="#2个数" class="headerlink" title="2个数"></a>2个数</h3><p><strong>前提</strong>：数组是单调递增的。因此可以在头尾放两个指针，向中间靠拢，逼近最终结果。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">sumS</span>(<span class="params">nums, s</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> len = nums.<span class="property">length</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!len || len &lt; <span class="number">3</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> [];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> left = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">let</span> right = len - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (left &lt; right) &#123;</span><br><span class="line">    <span class="keyword">let</span> sum = nums[left] + nums[right];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (sum === s) &#123;</span><br><span class="line">      <span class="keyword">return</span> [nums[left], nums[right]];</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (sum &lt; s) &#123;</span><br><span class="line">      left++;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      right--;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> [];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="正数序列"><a href="#正数序列" class="headerlink" title="正数序列"></a>正数序列</h3><p><strong>前提</strong>：打印出和为s的<strong>连续正数序列</strong>，长度最少为1。</p>
<p>若使用双指针，需要先确定上下界。这里的序列起始的上界为<code>n/2</code>，下界是1。然后使用类似的方法，确定起始后，后移后界求序列。时间复杂度O(n^2)。然而，实际上，确定下界后，连续正数序列和与序列长度满足函数关系<code>f(m, n) = (m + n)(n - m + 1) / 2</code>（其中m为起始值，n为截止值）。问题变成了检验后界是否满足一元二次方程组。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">sumSSeq</span>(<span class="params">s</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (s &lt; <span class="number">3</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">print</span>(<span class="params">i, j</span>) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> index = i; index &lt;= j; index++) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(index);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>, limit = <span class="title class_">Math</span>.<span class="title function_">floor</span>(s/<span class="number">2</span>); i &lt;= limit; i++) &#123;</span><br><span class="line">    <span class="keyword">let</span> j = i+<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (j &lt;= limit+<span class="number">1</span>) &#123;</span><br><span class="line">      <span class="keyword">let</span> sum = (i + j) * (j - i + <span class="number">1</span>) / <span class="number">2</span>;</span><br><span class="line">      <span class="keyword">if</span> (sum &gt;= s) &#123;</span><br><span class="line">        <span class="keyword">if</span> (sum === s) &#123;</span><br><span class="line">          <span class="title function_">print</span>(i, j);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      j++;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="翻转字符串（多次翻转）"><a href="#翻转字符串（多次翻转）" class="headerlink" title="翻转字符串（多次翻转）"></a>翻转字符串（多次翻转）</h2><h3 id="翻转单词的顺序"><a href="#翻转单词的顺序" class="headerlink" title="翻转单词的顺序"></a>翻转单词的顺序</h3><p><strong>要求</strong>：翻转一句话中所有单词的顺序。</p>
<p>此题可以先翻转所有字符，再翻转每个单词内的字符顺序。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">reverseByWord</span>(<span class="params">sentence</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> sentence.<span class="title function_">split</span>(<span class="string">&#x27; &#x27;</span>).<span class="title function_">reverse</span>().<span class="title function_">join</span>(<span class="string">&#x27; &#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="左旋转字符串"><a href="#左旋转字符串" class="headerlink" title="左旋转字符串"></a>左旋转字符串</h3><p><strong>要求</strong>：将字符串头部的若干字符转移到字符尾部。</p>
<p>使用类似上面的思路，可以不用<code>substring</code>方法，用翻转也可实现，不过在JS中无法对字符串自由写入，法2反而不如法1。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 法1，使用substring</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">leftReverse</span>(<span class="params">str, n</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!str || n &gt;= str.<span class="property">length</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> str;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> str.<span class="title function_">substring</span>(n) + str.<span class="title function_">substring</span>(<span class="number">0</span>, n);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 法2，使用reverse</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">leftReverse</span>(<span class="params">str, n</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!str || n &gt;= str.<span class="property">length</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> str;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> strArr = <span class="title class_">Array</span>.<span class="title function_">from</span>(str);</span><br><span class="line">  <span class="keyword">return</span> strArr.<span class="title function_">slice</span>(<span class="number">0</span>, n).<span class="title function_">reverse</span>().<span class="title function_">concat</span>(strArr.<span class="title function_">slice</span>(n).<span class="title function_">reverse</span>()).<span class="title function_">reverse</span>().<span class="title function_">join</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="队列的最大值（队列）"><a href="#队列的最大值（队列）" class="headerlink" title="队列的最大值（队列）"></a>队列的最大值（队列）</h2><h3 id="滑动窗口的最大值"><a href="#滑动窗口的最大值" class="headerlink" title="滑动窗口的最大值"></a>滑动窗口的最大值</h3><p><strong>前提</strong>：固定滑动窗口的宽度<br><strong>要求</strong>：返回窗口内的最大值组成的数组</p>
<p>使用双端队列去维护滑动窗口内的最大值。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">maxInWindow</span>(<span class="params">nums, k</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!nums.<span class="property">length</span> || k &gt; nums.<span class="property">length</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> queue = [];</span><br><span class="line">  <span class="keyword">let</span> res = [];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; k; i++) &#123;</span><br><span class="line">    <span class="keyword">while</span>(nums[queue[queue.<span class="property">length</span>-<span class="number">1</span>]] &lt; nums[i]) &#123;</span><br><span class="line">      queue.<span class="title function_">pop</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    queue.<span class="title function_">push</span>(i);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = k; i &lt; nums.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    res.<span class="title function_">push</span>(nums[queue[<span class="number">0</span>]]);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(nums[i] &gt;= nums[queue[queue.<span class="property">length</span>-<span class="number">1</span>]]) &#123;</span><br><span class="line">      queue.<span class="title function_">pop</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 出界的大值要移出</span></span><br><span class="line">    <span class="keyword">if</span> (queue[<span class="number">0</span>] &lt;= i - k) &#123;</span><br><span class="line">      queue.<span class="title function_">shift</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    queue.<span class="title function_">push</span>(i);</span><br><span class="line">  &#125;</span><br><span class="line">  res.<span class="title function_">push</span>(nums[queue[<span class="number">0</span>]]);</span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="队列的最大值"><a href="#队列的最大值" class="headerlink" title="队列的最大值"></a>队列的最大值</h3><p><strong>要求</strong>：设计队列，使max，shift和push的时间复杂度为1。</p>
<p>因为在push和shift操作时，队列就像上面的滑动窗口，可以用相同方法实现max。</p>
<p>略。</p>
<hr>
<h1 id="建模能力"><a href="#建模能力" class="headerlink" title="建模能力"></a>建模能力</h1><h2 id="n个骰子的点数（化递归为循环）"><a href="#n个骰子的点数（化递归为循环）" class="headerlink" title="n个骰子的点数（化递归为循环）"></a>n个骰子的点数（化递归为循环）</h2><p><strong>要求</strong>：输入n，返回n个骰子朝上一面的点数之和的概率分布。</p>
<p>使用循环的角度考虑，骰子递增时，点数和为k的可能性为k-6，k-5，k-4，……，k-1的可能性之和。因此我们可以得到下面的结果。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">posibilities</span>(<span class="params">n</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (n &lt; <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> [];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> res = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">2</span>; i &lt;= n; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">6</span> * n; j &gt; <span class="number">0</span>; j--) &#123;</span><br><span class="line">      res[j] = res.<span class="title function_">slice</span>(<span class="title class_">Math</span>.<span class="title function_">max</span>(<span class="number">0</span>, j-<span class="number">6</span>), j).<span class="title function_">reduce</span>(<span class="function">(<span class="params">sum, cur</span>) =&gt;</span> sum + (cur || <span class="number">0</span>), <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> res.<span class="title function_">slice</span>(<span class="number">1</span>).<span class="title function_">map</span>(<span class="function"><span class="params">num</span> =&gt;</span> num / <span class="title class_">Math</span>.<span class="title function_">pow</span>(<span class="number">6</span>, n));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="扑克牌中的顺子"><a href="#扑克牌中的顺子" class="headerlink" title="扑克牌中的顺子"></a>扑克牌中的顺子</h2><p><strong>前提</strong>：从扑克牌中随机取5张，大小王可以当做任意数字，判断是否为顺子</p>
<p>这里我们假设传入的数组已经按照扑克牌中的大小对牌进行了排序。整体分3步，首先向数组的指定项插入数字，然后判断0的数目，最后看0的数目是否能填满<code>undefined</code>的个数。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">isSeq</span>(<span class="params">nums</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!nums.<span class="property">length</span> || nums.<span class="property">length</span> &lt; <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> numbers = [];</span><br><span class="line">  <span class="keyword">let</span> zeros = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">let</span> flag = <span class="literal">false</span>;</span><br><span class="line">  <span class="keyword">let</span> index = -<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">  nums.<span class="title function_">forEach</span>(<span class="function"><span class="params">num</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (num === <span class="number">0</span>) &#123;</span><br><span class="line">      zeros++;</span><br><span class="line">      <span class="keyword">continue</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!numbers[num]) &#123;</span><br><span class="line">      numbers[num] = <span class="literal">true</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// 有对子就不是顺子</span></span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  numbers.<span class="title function_">forEach</span>(<span class="function">(<span class="params">num, idx</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (flag) &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">typeof</span> num !== <span class="string">&#x27;undefined&#x27;</span>) &#123;</span><br><span class="line">        zeros--;</span><br><span class="line">        <span class="keyword">if</span> (zeros-- &lt; <span class="number">0</span>) &#123;</span><br><span class="line">          index = idx;</span><br><span class="line">          <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">typeof</span> num !== <span class="string">&#x27;undefined&#x27;</span>) &#123;</span><br><span class="line">        flag = <span class="literal">true</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> numbers.<span class="title function_">slice</span>(index).<span class="title function_">every</span>(<span class="function"><span class="params">num</span> =&gt;</span> <span class="keyword">typeof</span> num === <span class="string">&#x27;undefined&#x27;</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="约瑟夫问题"><a href="#约瑟夫问题" class="headerlink" title="约瑟夫问题"></a>约瑟夫问题</h2><p>字面意义的解法就不说了。根据《剑指offer》上的递推公式，可以得到<code>f(n,m)=[f(n-1,m)+m]%n</code>。因此，可以用循环实现。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">joseph</span>(<span class="params">n, m</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (n &lt; <span class="number">1</span> || m &lt; <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> remains = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; n; i++) &#123;</span><br><span class="line">    remains = (remains + m) % i;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> remains;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="股票的最大利润"><a href="#股票的最大利润" class="headerlink" title="股票的最大利润"></a>股票的最大利润</h2><p>也即起始、末尾数对最大差值区间。当遍历到<code>f[i]</code>时，寻找之前的最小值，即可得到利润，遍历整个数组即可得到最大利润，时间复杂度为O(n)。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">maxBenifit</span>(<span class="params">nums</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> len = nums.<span class="property">length</span>;</span><br><span class="line">  <span class="keyword">if</span> (!len || len &lt; <span class="number">2</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> min = nums[<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">let</span> res;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; len; i++) &#123;</span><br><span class="line">    <span class="keyword">let</span> benifit = nums[i] - min;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> res === <span class="string">&#x27;undefined&#x27;</span> || res &lt; benifit) &#123;</span><br><span class="line">      res = benifit;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (benifit &lt; <span class="number">0</span>) &#123;</span><br><span class="line">      min = nums[i];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="不使用控制结构语句求解1-2-3-…-n"><a href="#不使用控制结构语句求解1-2-3-…-n" class="headerlink" title="不使用控制结构语句求解1+2+3+…+n"></a>不使用控制结构语句求解1+2+3+…+n</h2><p>使用递归等等价形式即可。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">sum</span>(<span class="params">n</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Array</span>(n).<span class="title function_">reduce</span>(<span class="function">(<span class="params">sum, i</span>) =&gt;</span> sum + i, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="不用加减乘除做加法"><a href="#不用加减乘除做加法" class="headerlink" title="不用加减乘除做加法"></a>不用加减乘除做加法</h2><p>使用异或可以得到没有进位的结果。可以通过位与运算得到都是1的位。和异或结果异或，直到位与结果都为0为止。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> sum = a ^ b,</span><br><span class="line">      extra = a &amp; b;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (!extra) &#123;</span><br><span class="line">    <span class="keyword">let</span> tmp = sum &amp; extra;</span><br><span class="line">    sum = sum ^ (extra &lt;&lt; <span class="number">1</span>);</span><br><span class="line">    extra = tmp;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="构建乘积数组"><a href="#构建乘积数组" class="headerlink" title="构建乘积数组"></a>构建乘积数组</h2><p><strong>要求</strong>：给定数组A，构建数组B，其中每个元素是A中缺少对应位元素的总乘积。不能使用除法。</p>
<p>使用两个辅助数组分别存储数组从前到后和从后到前两段元素的乘积。空间复杂度O(n)的情况下，可以在O(n)时间上得到结果。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">multiArr</span>(<span class="params">nums</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!nums.<span class="property">length</span> || nums.<span class="property">length</span> &lt; <span class="number">2</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> [];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> m1 = <span class="number">1</span>,</span><br><span class="line">      m2 = <span class="number">1</span>,</span><br><span class="line">      mArr1 = [],</span><br><span class="line">      mArr2 = [],</span><br><span class="line">      res = [];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">    m1 *= nums[i];</span><br><span class="line">    m2 *= nums[n - i - <span class="number">1</span>];</span><br><span class="line">    mArr1.<span class="title function_">push</span>(m1);</span><br><span class="line">    mArr2.<span class="title function_">unshift</span>(m2);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">    res.<span class="title function_">push</span>(mArr1[i] * mArr2[i]);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://shenlvmeng.github.com/blog/2017/07/10/hacker-and-artist/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.jpg">
      <meta itemprop="name" content="shenlvmeng">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shenlvmeng's Blog">
      <meta itemprop="description" content="Be sharp, my friend.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Shenlvmeng's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/blog/2017/07/10/hacker-and-artist/" class="post-title-link" itemprop="url">黑客与画家 —— 关于编程和创业</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-07-10 21:21:02" itemprop="dateCreated datePublished" datetime="2017-07-10T21:21:02+08:00">2017-07-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2018-11-21 21:29:43" itemprop="dateModified" datetime="2018-11-21T21:29:43+08:00">2018-11-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog/categories/%E6%80%9D%E8%80%83/" itemprop="url" rel="index"><span itemprop="name">思考</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/blog/2017/07/10/hacker-and-artist/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2017/07/10/hacker-and-artist/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>2.7k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>4 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>《黑客与画家》是Paul Graham的博文集。出版于2006年。它从一个“黑客”的角度阐述了编程，互联网程序等时兴的概念。深刻新鲜而发人深省。其对工作、语言的认识别具特色，而在学校教育和贫富分化等方面的认识却略显偏颇。</p>
<p>全书大致分为3部分</p>
<ul>
<li>1-4章解释黑客如何成长以及如何看待世界</li>
<li>5-9章介绍创业、工作的方法论</li>
<li>10-15章讨论编程语言的特点和使用方法</li>
</ul>
<p>下面仅摘出些句子。个人评注已加粗。</p>
<h2 id="为什么书呆子不受欢迎"><a href="#为什么书呆子不受欢迎" class="headerlink" title="为什么书呆子不受欢迎"></a>为什么书呆子不受欢迎</h2><ul>
<li>在人产生良知前，折磨是种娱乐。</li>
<li>学校的真正目的是把儿童都关在一个地方，以便大人们白天可以腾出手来把事情做完（<strong>哈哈哈</strong>）</li>
</ul>
<h2 id="黑客与画家"><a href="#黑客与画家" class="headerlink" title="黑客与画家"></a>黑客与画家</h2><ul>
<li>编程语言是用来帮助思考程序的，而不是用来表达你已经想好的程序</li>
<li>大多数黑客不是通过大学课程学会编程的，他们从实践中学习，13岁时就已经自己动手写程序了。</li>
<li>debug对我来说属于轻松的工作</li>
<li>软件的部分功能就是解释自身，软件的使用方式最好能符合用户的直觉，源代码应该可以自己解释自己</li>
<li>程序是写出来给人看的，附带能在机器上运行</li>
</ul>
<h2 id="不能说的话"><a href="#不能说的话" class="headerlink" title="不能说的话"></a>不能说的话</h2><ul>
<li>（流行）第一批的接收者总是带有很强的抱负心，他们有自觉的精英意识，想把自己与普通人区分开来</li>
<li>流行趋势确立以后，第二接收者就加入进来了，他们接受流行，不是因为想要与众不同，而是害怕与众不同</li>
<li>与笨蛋辩论，你也会变成笨蛋</li>
</ul>
<h2 id="良好的坏习惯"><a href="#良好的坏习惯" class="headerlink" title="良好的坏习惯"></a>良好的坏习惯</h2><ul>
<li>在我看来，一个人们拥有言论自由和行动自由的社会，往往最有可能采纳最优方案（<strong>真的么？</strong>）</li>
</ul>
<h2 id="另一条路"><a href="#另一条路" class="headerlink" title="另一条路"></a>另一条路</h2><ul>
<li>（互联网程序）不需要为新版本付出额外的费用，或者做额外的准备，甚至可能你都不知道软件已经升级了</li>
<li>互联网软件则完全不同，修改起来很方便。软件的发布过程可以分解成一系列的渐进式修改（<strong>快步小跑</strong>）</li>
<li>软件应该做到用户认为它可以做到的事情。但是，你不知道用户到底怎么想</li>
<li>没有盗版是一种“优势”，但也是一个问题。一定数量的盗版对软件公司时有好处的。因为不管你的软件定价多少，有些用户永远不会购买</li>
<li>要求用户做得越多，你担的风险就越大</li>
<li>管理企业其实很简单，只要记住两点就可以了：做出用户喜欢的产品，保证开支小于收入</li>
<li>从制造简洁的产品开始着手，首先要保证你自己愿意使用。然后，迅速作出1.0版，并不断加以改进</li>
<li><strong>无论如何，你都要使用自己的软件</strong></li>
</ul>
<h2 id="如何创造财富"><a href="#如何创造财富" class="headerlink" title="如何创造财富"></a>如何创造财富</h2><div class="tip">注意：标题不等于“如何致富”</div>

<ul>
<li>从经济学观点看，你可以把创业想象成一个压缩过程</li>
<li>如果你想赚100万美元，就不得不忍受相当于100万美元的痛苦。创业公司将你所有的压力压缩到三四年</li>
<li>通过创造有价值的东西而致富，优势不仅在于它合法，还在于它更简单，因为你只需要做出别人需要的东西就可以了</li>
<li>金钱不是财富，而只是我们用来转移财富所有权的东西</li>
<li>公司就是许多人聚在一起创造财富的地方，能够制造更多人们需要的东西</li>
<li>人们需要的东西就是财富</li>
<li>上班的日子不如上学的日子有趣，但是有人付钱给你，而不是你付钱给学校</li>
<li>创造财富是大多数公司盈利的手段</li>
<li>上班的日子为什么会差别这么大？不要搞糊涂了，你现在已经从顾客变成了仆人</li>
<li>收入和风险是对称的，所以如果有巨大的获利可能，就必然存在巨大的失败可能。如果你有一个令你感到安全的工作，你是不会致富的</li>
<li>创业的付出和回报虽然总体上是成比例的，但是在个体上是不成比例的</li>
<li>只有在快速获得巨大利益的激励下，你才会去挑战那些困难的问题，否则你根本不愿意去碰它们</li>
</ul>
<h2 id="关注贫富分化"><a href="#关注贫富分化" class="headerlink" title="关注贫富分化"></a>关注贫富分化</h2><ul>
<li>进入社会以后，你不能总是靠父母养活，如果你需要什么东西，要么你自己做出来，要么做其他东西与需要的人交换金钱，再用金钱去买你想要的东西</li>
<li>技术肯定加剧了有技术者与无技术者之间的生产效率差异</li>
<li>技术在加大收入差距的同时，缩小了大部分的其他差距</li>
</ul>
<h2 id="防止垃圾邮件的一种方法"><a href="#防止垃圾邮件的一种方法" class="headerlink" title="防止垃圾邮件的一种方法"></a>防止垃圾邮件的一种方法</h2><ul>
<li>我对贝叶斯方法寄予厚望，因为它的过滤能力可以随着垃圾邮件一起进化</li>
</ul>
<h2 id="设计者的品味"><a href="#设计者的品味" class="headerlink" title="设计者的品味"></a>设计者的品味</h2><ul>
<li>他想要的学生不仅应该技术过硬，还应当能够使用技术做出优美的产品</li>
<li>你需要的是咬牙向前冲刺的痛苦，而不是脚被钉子扎破的痛苦。解决难题的痛苦对设计师有好处，但是对付挑剔的客户的痛苦或者对付质量低劣的建材的痛苦就是另外一回事了</li>
<li>在历史的任何时刻都有一些热点项目，一些团体在这些项目上做出伟大的成绩。如果你远离这些中心，几乎不可能单靠自己就取得伟大成果</li>
</ul>
<h2 id="编程语言解析"><a href="#编程语言解析" class="headerlink" title="编程语言解析"></a>编程语言解析</h2><ul>
<li>程序员的时间要比计算机的时间昂贵得多</li>
<li>长期使用某种语言，你就会慢慢按照这种语言的思维模式进行思考</li>
<li>有些人认为编程语言应该防止程序员干蠢事，另一些人则认为程序员应该可以用编程语言干一切他们想干的事（<strong>即静态类型语言和动态类型语言</strong>）</li>
<li>事实上，有两种程度的面向对象编程：某些语言允许你以这种风格编程，另一些语言则强迫你一定要这样编程</li>
</ul>
<h2 id="一百年后的编程语言"><a href="#一百年后的编程语言" class="headerlink" title="一百年后的编程语言"></a>一百年后的编程语言</h2><ul>
<li>当我说Java不会成功时，我的意思是它和Cobol一样，进化之路已经走到了尽头（<strong>哦？</strong>）</li>
<li>一种语言的内核设计越小、越干净，它的生命力就越顽强</li>
<li>（<strong>用足够灵活的语言，聪明的程序员能写多好，笨的程序员就能写多烂</strong>）</li>
<li>一百年后的程序员最需要的编程语言就是可以让你毫不费力写出程序第一版的编程语言</li>
</ul>
<h2 id="拒绝平庸"><a href="#拒绝平庸" class="headerlink" title="拒绝平庸"></a>拒绝平庸</h2><ul>
<li>Lisp很值得学习。你掌握它之后，会感动它给你带来的极大启发</li>
<li>大概在1960年，Lisp语言引入了垃圾回收机制。……闭包是20世纪60年代Lisp语言引入的功能……宏也是60年代中期Lisp语言引入的，现在还是一片处女地（这里的“宏”为Lisp中的<code>defmacro</code>）</li>
<li>这里有一个评估竞争对手的妙招——关注他们的招聘职位</li>
</ul>
<h2 id="书呆子的复仇"><a href="#书呆子的复仇" class="headerlink" title="书呆子的复仇"></a>书呆子的复仇</h2><ul>
<li>符号（Symbol）实际上是一种指针，指向存储在散列表中的字符串</li>
<li>列表是Lisp的基本数据结构</li>
<li>让客户感到满意才是你的设计方向。只要赢得用户，其他的事情就会接踵而至</li>
<li>JavaScript的写法比Lisp和Ruby稍微长一点，因为JavaScript依然区分语句和表达式</li>
<li>所有这些语言都是图灵等价的</li>
<li>“任何C或Fortran程序复杂到一定程度之后，都会包含一个临时开发的、只有一半功能的、不完全符合规格的、到处都是bug的、运行速度很慢的Common Lisp实现。”</li>
<li>想解决一个困难的问题，有三条路：1）使用一种强大的语言，2）为这个难题写一个事实上的解释器，3）你自己变成这个难题的人肉编译器（<strong>翻译过来就是语言本身&#x2F;设计模式&#x2F;问题抽象</strong>）</li>
</ul>
<h2 id="梦寐以求的编程语言"><a href="#梦寐以求的编程语言" class="headerlink" title="梦寐以求的编程语言"></a>梦寐以求的编程语言</h2><ul>
<li>优秀的函数库的重要性将超过语言本身</li>
<li>就算委员会只有两个人，还是会妨碍“再设计”，典型例子就是软件内部的各个接口有不同的人负责。这时除非两个人都同意改变接口，否则接口就无法改变</li>
</ul>
<h2 id="设计与研究"><a href="#设计与研究" class="headerlink" title="设计与研究"></a>设计与研究</h2><ul>
<li>“用户需要的设计”≠“用户要求的设计”</li>
<li>设计必须以人为本</li>
<li>在软件领域，贴近用户的设计思想被归纳为“弱即是强”模式。</li>
<li>一种功能有限但易于使用的软件可能对用户有更大吸引力</li>
<li>先做出原型，在逐步加工做出成品，这种方式有利于鼓舞士气，因为它使得你随时都可以看到工作的成效</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://shenlvmeng.github.com/blog/2017/06/27/webpage-visit-speed-guide/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.jpg">
      <meta itemprop="name" content="shenlvmeng">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shenlvmeng's Blog">
      <meta itemprop="description" content="Be sharp, my friend.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Shenlvmeng's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/blog/2017/06/27/webpage-visit-speed-guide/" class="post-title-link" itemprop="url">H5页面性能优化方案参考</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2017-06-27 20:20:35 / 修改时间：20:25:26" itemprop="dateCreated datePublished" datetime="2017-06-27T20:20:35+08:00">2017-06-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog/categories/%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index"><span itemprop="name">技术</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/blog/2017/06/27/webpage-visit-speed-guide/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2017/06/27/webpage-visit-speed-guide/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>1.6k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>3 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>由于开发时间短，迭代速度快的特点，H5页面已大量用在各种移动端App和活动页中。响应时间作为和用户体验的重要部分，如果不能在这上面给用户可靠性和安全感，将会大大影响用户体验，进而影响用户使用产品的积极性。当页面并不复杂时，用户若能在1s内打开页面，看到信息的展示，会感觉速度还行，可以接受。当界面需要5s甚至以上才能显示时，对用户来说时不可接受的。</p>
<p>下文的标准和建议主要来自钉钉团队的<a target="_blank" rel="noopener" href="http://ddtalk.github.io/blog/2015/09/07/dingding-first/">H5性能优化方案</a></p>
<h2 id="标准"><a href="#标准" class="headerlink" title="标准"></a>标准</h2><p>通常来说首屏（onload）时间即资源加载完成时间建议在600ms内，首字时间时间在150ms内，根据网络类型做相应调整：</p>
<ul>
<li>2G，完全加载时间10s内，10s内占比80%</li>
<li>3G，完全加载时间6s内，6s内占比60%</li>
<li>4G和WiFi，完全加载时间3s内，3s内占比70%</li>
</ul>
<p><em>（标准不是死的，上面只是举个范例）</em></p>
<p>这个时间可以在Chrome开发者工具里的Network中看到，也可以通过JS的performance API查询到</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">performance.<span class="property">timing</span>.<span class="property">domContentLoadedEventEnd</span> - performance.<span class="property">timing</span>.<span class="property">connectStart</span></span><br></pre></td></tr></table></figure>

<h2 id="优化手段"><a href="#优化手段" class="headerlink" title="优化手段"></a>优化手段</h2><h3 id="资源加载"><a href="#资源加载" class="headerlink" title="资源加载"></a>资源加载</h3><ul>
<li><strong>按需加载</strong>，减少不必要资源的加载，不过这可能会增加页面的重绘</li>
<li><strong>Lazyload</strong>，延迟加载，即不影响整体效果的图片展现给用户后再加载</li>
<li><strong>滚屏加载</strong>，根据字面意义，在下拉滚屏时加载额外数据，减少翻页时的重新加载和渲染</li>
<li><strong>响应式加载</strong>，即根据用户终端媒介加载不同大小的图片资源</li>
<li><strong>异步记载</strong>，异步加载第三方资源，防止影响本身的页面性能</li>
</ul>
<p>此外，还有一些优化加载体验的方式：</p>
<ul>
<li><strong>显示loading进度条</strong>，让用户能明确感知到页面的加载进度</li>
<li><strong>避免3xx、4xx、5xx的http状态码</strong>，因为3xx的跳转会影响加载时间，4xx和5xx通常是第三方资源的问题，可能会影响整个页面的展示。</li>
<li><strong>favicon.ico</strong>，需要保证这个图标存在，且尽可能地小，并设置一个较长的缓存时间</li>
<li>首次加载资源越小越好</li>
<li>避免使用自定义中文字体（因为体积大）</li>
</ul>
<h3 id="图片使用"><a href="#图片使用" class="headerlink" title="图片使用"></a>图片使用</h3><ul>
<li><strong>格式</strong>，webp，jpg，png24&#x2F;32较常用。jpg较为常用，避免使用png的大图片</li>
<li><strong>像素</strong>，一般来说不建议宽度超过640px</li>
<li><strong>合并</strong>，使用CSS Sprites，尤其是基本不变，大小类似的操作类型图标</li>
<li><strong>避免重设大小</strong>，即展示多大就加载多大的图片</li>
<li><strong>避免DataURL</strong>，DataURL是用Base64的方式，将图片变成一串文本编码放入代码的方式。尽管它能减少一次http交互的请求，但数据体积通常比二进制图片大1&#x2F;3，且不会被缓存。</li>
<li><strong>使用替代方案</strong>，如CSS3，SVG或iconfont来完成简单的图片</li>
</ul>
<h3 id="服务端"><a href="#服务端" class="headerlink" title="服务端"></a>服务端</h3><ul>
<li><strong>Gzip</strong>，服务端要开启Gzip压缩</li>
<li><strong>设置合理的缓存时间</strong>，对静态资源，将缓存过期时间设置得长一些</li>
<li><strong>分域名部署</strong>，将动态资源和静态资源放置在不同的域名下，这样，静态资源请求时，不会带上动态域名中所设置的cookie头信息，从而减少http请求的大小</li>
<li><strong>减少Cookie</strong>，这部分数据使用的是上行流量，上行带宽更小，所以传输速度更慢，因此要尽量精简其大小。</li>
<li><strong>CDN加速</strong>，部署CDN服务器，或使用第三方CDN服务，优化不同地域的接入速度。</li>
</ul>
<h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><ul>
<li><strong>JS，CSS合并</strong>，除特殊情况外，所有JS压缩打包成一个文件，所有CSS压缩打包成一个文件，减少请求次数</li>
<li><strong>外联使用JS，CSS</strong>，有效利用缓存</li>
<li><strong>压缩HTML，JS，CSS</strong>，压缩代码可以减少大小到原来的1&#x2F;3以下</li>
<li><strong>使用版本号标注JS、CSS等资源</strong>，让用户及时获取到最新的代码</li>
<li><strong>位置</strong>，通常CSS在前，JS在后。基础的JS文件，如日志，polyfill可以放在头部</li>
<li><strong>避免空src地址</strong>，在某些浏览器中可能会导致增加一个无效的http请求</li>
<li><strong>禁止CSS表达式</strong>，会让页面多次执行计算，造成卡顿等性能问题</li>
<li><strong>避免空css规则</strong>，降低渲染成本</li>
<li><strong>避免直接设置元素style</strong>，不利于复用和缓存，不过有些情况下确实是没有办法的办法</li>
</ul>
<h3 id="后台接口"><a href="#后台接口" class="headerlink" title="后台接口"></a>后台接口</h3><ul>
<li><strong>接口合并</strong>，尽量减少http请求次数</li>
<li><strong>缓存</strong>，在一些数据新旧敏感性不高的场景下，缓存接口数据</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://shenlvmeng.github.com/blog/2017/06/23/HTML-CSS-code-style-guide/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.jpg">
      <meta itemprop="name" content="shenlvmeng">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shenlvmeng's Blog">
      <meta itemprop="description" content="Be sharp, my friend.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Shenlvmeng's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/blog/2017/06/23/HTML-CSS-code-style-guide/" class="post-title-link" itemprop="url">HTML和CSS编码规范</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-06-23 20:06:46" itemprop="dateCreated datePublished" datetime="2017-06-23T20:06:46+08:00">2017-06-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-02-05 15:54:18" itemprop="dateModified" datetime="2023-02-05T15:54:18+08:00">2023-02-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog/categories/%E5%B7%A5%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">工程</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/blog/2017/06/23/HTML-CSS-code-style-guide/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2017/06/23/HTML-CSS-code-style-guide/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>9.7k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>16 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>写个人项目是最爽的，再稀烂的代码都是自己的孩子，一把屎一把尿写出来的，总能认得。但是阅读本文的你，多半是给别人写码，面向老板编程的。你的码保不齐日后要别人维护。为了写出放心的码，提高搬砖效率，统一编码规范是必然的选择。</p>
<p><img src="/blog/images/code-quality.png" alt="Boss Oriented Programming"></p>
<p>有观众可能要问了，我们不是有lint工具吗？</p>
<p><img src="/blog/images/say-more.jpg" alt="就你话多"></p>
<h2 id="HTML"><a href="#HTML" class="headerlink" title="HTML"></a>HTML</h2><h3 id="基本"><a href="#基本" class="headerlink" title="基本"></a>基本</h3><h4 id="doctype"><a href="#doctype" class="headerlink" title="doctype"></a>doctype</h4><p>每个页面开头，使用简单的<code>&lt;!DOCTYPE html&gt;</code>来启用标准模式。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- bad --&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot;</span> <span class="string">&quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- good --&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="charset"><a href="#charset" class="headerlink" title="charset"></a>charset</h4><p>无特殊情况时，统一使用<code>UTF-8</code></p>
<h4 id="lang"><a href="#lang" class="headerlink" title="lang"></a>lang</h4><p><strong>推荐</strong>在html元素上使用<code>lang</code>属性</p>
<h4 id="viewport"><a href="#viewport" class="headerlink" title="viewport"></a>viewport</h4><p><strong>建议</strong>指定页面的viewport属性，保证移动端的友好展示</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, maximum-scale=1.0, minimum-scale=1, user-scalable=no&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="title"><a href="#title" class="headerlink" title="title"></a>title</h4><p><code>head</code>中<strong>必须</strong>要有<code>title</code>标签。</p>
<h4 id="IE兼容模式"><a href="#IE兼容模式" class="headerlink" title="IE兼容模式"></a>IE兼容模式</h4><p>如不是特殊需要，通过<strong>edge mode</strong>通知IE使用最新的兼容模式。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=Edge,chrome=1&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="CSS和JavaScript引入"><a href="#CSS和JavaScript引入" class="headerlink" title="CSS和JavaScript引入"></a>CSS和JavaScript引入</h4><ul>
<li>引入CSS和JavaScript时不需要指明<code>type</code>，因为<code>text/css</code>和<code>text/javascript</code>分别是他们的默认值。<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- bad --&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;index.css&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;index.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- good --&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;index.css&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;index.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li>CSS在<code>&lt;head&gt;&lt;/head&gt;</code>中引入，基础JS脚本在<code>&lt;head&gt;&lt;/head&gt;</code>引入，其余在<code>&lt;body&gt;</code>结束标签前引入</li>
</ul>
<h4 id="缩进"><a href="#缩进" class="headerlink" title="缩进"></a>缩进</h4><p><strong>必须</strong>使用两个空格表示一个缩进层级，<strong>禁止</strong>使用tab</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- bad --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>just a example<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- good --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>just a example<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="换行"><a href="#换行" class="headerlink" title="换行"></a>换行</h4><p>单行<strong>不能</strong>超过120个字符</p>
<h4 id="标签名称和标签属性统一使用小写"><a href="#标签名称和标签属性统一使用小写" class="headerlink" title="标签名称和标签属性统一使用小写"></a>标签名称和标签属性统一使用小写</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- bad --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Div</span> <span class="attr">Id</span>=<span class="string">&quot;foo&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">Div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- good --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;foo&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>综上，下面是一个建议的html脚手架</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge,chrome=1&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, maximum-scale=1.0, minimum-scale=1, user-scalable=no&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;renderer&quot;</span> <span class="attr">content</span>=<span class="string">&quot;webkit&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;author&quot;</span> <span class="attr">content</span>=<span class="string">&quot;shenlvmeng&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;description&quot;</span> <span class="attr">content</span>=<span class="string">&quot;描述&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;keyword&quot;</span> <span class="attr">content</span>=<span class="string">&quot;关键词&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Foo<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;index.css&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;index.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="标签"><a href="#标签" class="headerlink" title="标签"></a>标签</h3><ul>
<li>非自闭合标签<strong>必须</strong>有开始和结束标签，自动闭合标签<strong>不建议</strong>在结尾处使用斜线<code>/</code><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- bad --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;foo&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;foo.png&quot;</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- good --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;foo&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;foo.png&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><strong>建议</strong>使用语义化标签<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- good --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">header</span>&gt;</span><span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">section</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">nav</span>&gt;</span>Navbar<span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">article</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">time</span>&gt;</span>2017<span class="tag">&lt;/<span class="name">time</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">figure</span>&gt;</span><span class="tag">&lt;/<span class="name">figure</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">article</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">aside</span>&gt;</span><span class="tag">&lt;/<span class="name">aside</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">footer</span>&gt;</span><span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><strong>避免</strong>标签嵌套层级过深，尤其是无语义的嵌套<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- bad --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;foo&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bar&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="命名"><a href="#命名" class="headerlink" title="命名"></a>命名</h3><h4 id="标签名"><a href="#标签名" class="headerlink" title="标签名"></a>标签名</h4><p><strong>必须</strong>使用小写字母加连字符的命名方式</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- bad --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">MyTag</span>&gt;</span><span class="tag">&lt;/<span class="name">MyTag</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- good --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">my-tag</span>&gt;</span><span class="tag">&lt;/<span class="name">my-tag</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="class属性"><a href="#class属性" class="headerlink" title="class属性"></a><code>class</code>属性</h4><p>使用小写字母加连字符，需要在Javascript中使用时，以<code>J_</code>开头，接大驼峰命名</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- bad --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;FooBar J_foo-bar&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- good --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;foo-bar J_FooBar&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="id属性"><a href="#id属性" class="headerlink" title="id属性"></a><code>id</code>属性</h4><p>同上。<strong>建议</strong>使用<code>class</code>属性关联CSS。</p>
<h3 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h3><h4 id="使用双引号包裹"><a href="#使用双引号包裹" class="headerlink" title="使用双引号包裹"></a>使用双引号包裹</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- bad --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&#x27;foo&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- good --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;foo&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="Boolean属性"><a href="#Boolean属性" class="headerlink" title="Boolean属性"></a>Boolean属性</h4><p><strong>不要</strong>为Boolean属性指定值。</p>
<blockquote>
<p>一个元素中 Boolean 属性的存在表示取值true，不存在则表示取值false。</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- bad --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;nickname&quot;</span> <span class="attr">disabled</span>=<span class="string">&quot;disabled&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;hobbies&quot;</span> <span class="attr">value</span>=<span class="string">&quot;bicycle&quot;</span> <span class="attr">checked</span>=<span class="string">&quot;checked&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;FrontEnd&quot;</span> <span class="attr">selected</span>=<span class="string">&quot;selected&quot;</span>&gt;</span>FrontEnd<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- good --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;nickname&quot;</span> <span class="attr">disabled</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;hobbies&quot;</span> <span class="attr">value</span>=<span class="string">&quot;bicycle&quot;</span> <span class="attr">checked</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;FrontEnd&quot;</span> <span class="attr">selected</span>&gt;</span>FrontEnd<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="自定义属性"><a href="#自定义属性" class="headerlink" title="自定义属性"></a>自定义属性</h4><p><strong>必须</strong>以<code>data-</code>为前缀，保证可读</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- bad --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">age</span>=<span class="string">&quot;10&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- good --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">data-age</span>=<span class="string">&quot;10&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="顺序"><a href="#顺序" class="headerlink" title="顺序"></a>顺序</h4><p>保证可读性，一致的属性顺序可以提高压缩率。按照出现频率，依次是：</p>
<ul>
<li><code>class</code></li>
<li><code>id</code></li>
<li><code>data-*</code></li>
<li>…</li>
</ul>
<h4 id="少用style属性"><a href="#少用style属性" class="headerlink" title="少用style属性"></a>少用<code>style</code>属性</h4><p><strong>建议</strong>使用<code>class</code>来控制样式，可以提高可维护性和可读性。</p>
<h4 id="不在属性值中使用JavaScript语句"><a href="#不在属性值中使用JavaScript语句" class="headerlink" title="不在属性值中使用JavaScript语句"></a>不在属性值中使用JavaScript语句</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- bad --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">id</span>=<span class="string">&quot;hello&quot;</span> <span class="attr">href</span>=<span class="string">&quot;javascript:alert(&#x27;hi&#x27;);&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;;(function()&#123;alert(&#x27;hello&#x27;);&#125;)()&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- good --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;hello&quot;</span>).<span class="title function_">addEventListener</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">alert</span>(<span class="string">&#x27;hello&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">  &#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="多媒体"><a href="#多媒体" class="headerlink" title="多媒体"></a>多媒体</h3><ul>
<li><code>img</code>的<code>src</code>属性<strong>禁止</strong>留空</li>
<li>为<code>img</code>标签添加<code>alt</code>属性以声明替代文本</li>
<li>在多媒体标签内部提供指示浏览器不支持该标签的说明，如<code>object</code>、<code>audio</code>、<code>video</code></li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- bad --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;cat.png&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">audio</span> <span class="attr">controls</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">&quot;foo.ogg&quot;</span> <span class="attr">type</span>=<span class="string">&quot;audio/ogg&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">&quot;bar.mp3&quot;</span> <span class="attr">type</span>=<span class="string">&quot;audio/mpeg&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">audio</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- good --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;cat.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;cat&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">audio</span> <span class="attr">controls</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">&quot;baz.ogg&quot;</span> <span class="attr">type</span>=<span class="string">&quot;audio/ogg&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">&quot;qaz.mp3&quot;</span> <span class="attr">type</span>=<span class="string">&quot;audio/mpeg&quot;</span>&gt;</span></span><br><span class="line">  Your browser does not support the audio tag.</span><br><span class="line"><span class="tag">&lt;/<span class="name">audio</span>&gt;</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h2><h3 id="基本-1"><a href="#基本-1" class="headerlink" title="基本"></a>基本</h3><ul>
<li><strong>推荐</strong>使用两个空格缩进<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* bad */</span></span><br><span class="line"><span class="selector-class">.example</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* good */</span></span><br><span class="line"><span class="selector-class">.example</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#000</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>单行不能超过120个字符，除非不可分割，如URL</li>
<li>声明块左花括号前<strong>推荐</strong>添加空格<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* bad */</span></span><br><span class="line"><span class="selector-class">.example</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* good */</span></span><br><span class="line"><span class="selector-class">.example</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">15px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>声明块右花括号<strong>推荐</strong>单独成行<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* bad */</span></span><br><span class="line"><span class="selector-class">.example</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* good */</span></span><br><span class="line"><span class="selector-class">.example</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">15px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>声明语句<code>:</code>后<strong>需要</strong>有空格，前无空格<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* bad */</span></span><br><span class="line"><span class="selector-class">.example</span> &#123;</span><br><span class="line">  <span class="attribute">left</span>:<span class="number">15px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* good */</span></span><br><span class="line"><span class="selector-class">.example</span> &#123;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">15px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>声明语句<strong>必须</strong>以分号结尾<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* bad */</span></span><br><span class="line"><span class="selector-class">.example</span> &#123;</span><br><span class="line">  <span class="attribute">left</span>:<span class="number">15px</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* good */</span></span><br><span class="line"><span class="selector-class">.example</span> &#123;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">15px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h3><h4 id="文档注释"><a href="#文档注释" class="headerlink" title="文档注释"></a>文档注释</h4><p>声明在文件头部，表示文件作用</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 这个文件的作用</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>

<h4 id="代码注释"><a href="#代码注释" class="headerlink" title="代码注释"></a>代码注释</h4><p>传达代码上下文和目标，应该容易被人类理解。<strong>不要</strong>简单重复类名等冗余信息。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* bad */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* header */</span></span><br><span class="line"><span class="selector-class">.header</span> &#123;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* good */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* Wrapping contents of .title and .user-info */</span></span><br><span class="line"><span class="selector-class">.header</span> &#123;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="命名-1"><a href="#命名-1" class="headerlink" title="命名"></a>命名</h3><p>同HTML规范，小写字母加短划线<code>-</code>。在JavaScript中出现的类名用<code>J_</code>开头，后接大驼峰命名，这类的<code>class</code><strong>不能</strong>出现在CSS文件中。</p>
<h3 id="值"><a href="#值" class="headerlink" title="值"></a>值</h3><ul>
<li>文本内容<strong>必须</strong>使用双引号包裹<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* bad */</span></span><br><span class="line"><span class="selector-tag">html</span><span class="selector-attr">[lang|=zh]</span> <span class="selector-tag">q</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">    <span class="attribute">font-family</span>: <span class="string">&#x27;Microsoft YaHei&#x27;</span>, sans-serif;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&#x27;“&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* good */</span></span><br><span class="line"><span class="selector-tag">html</span><span class="selector-attr">[lang|=<span class="string">&quot;zh&quot;</span>]</span> <span class="selector-tag">q</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">    <span class="attribute">font-family</span>: <span class="string">&quot;Microsoft YaHei&quot;</span>, sans-serif;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&quot;“&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>“0”值后<strong>不要</strong>使用单位。<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* bad */</span></span><br><span class="line"><span class="selector-class">.example</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* good */</span></span><br><span class="line"><span class="selector-class">.example</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>长度数值是0 - 1间的小数时，忽略整数部分的<code>0</code><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* bad */</span></span><br><span class="line">panel &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0.8</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* good */</span></span><br><span class="line">panel &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: .<span class="number">8</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>颜色值<strong>必须</strong>使用小写的十六进制表示，<strong>禁止</strong>使用颜色名和<code>rgb()</code>，带有透明度时<strong>可以</strong>使用<code>rgba()</code><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* bad */</span></span><br><span class="line"><span class="selector-class">.success</span> &#123;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">2px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">128</span>,<span class="number">0</span>,.<span class="number">3</span>);</span><br><span class="line">  <span class="attribute">border-color</span>: <span class="built_in">rgb</span>(<span class="number">0</span>, <span class="number">128</span>, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* good */</span></span><br><span class="line"><span class="selector-class">.success</span> &#123;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">2px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">128</span>, <span class="number">0</span>, .<span class="number">3</span>);</span><br><span class="line">  <span class="attribute">border-color</span>: <span class="number">#008000</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>可以缩写时，颜色值<strong>必须</strong>缩写<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* bad */</span></span><br><span class="line"><span class="selector-class">.success</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#aaccaa</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* good */</span></span><br><span class="line"><span class="selector-class">.success</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#aca</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><code>url()</code>函数中的路径<strong>禁止</strong>带引号，绝对路径时<strong>可以</strong>省去协议名<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.logo</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">//assets/logo.png</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="选择器"><a href="#选择器" class="headerlink" title="选择器"></a>选择器</h3><ul>
<li>一个rule包含多个选择器时，每个选择器<strong>必须</strong>独占一行<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* bad */</span></span><br><span class="line"><span class="selector-class">.post</span>, <span class="selector-class">.page</span>, <span class="selector-class">.comment</span> &#123;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">1.5</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* good */</span></span><br><span class="line"><span class="selector-class">.post</span>,</span><br><span class="line"><span class="selector-class">.page</span>,</span><br><span class="line"><span class="selector-class">.comment</span> &#123;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">1.5</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>属性选择器中的值<strong>必须</strong>用双引号包裹<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span><span class="selector-attr">[lang|=<span class="string">&quot;zh&quot;</span>]</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>选择器层级<strong>不要</strong>超过5级，靠后的选择器尽量精确<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* bad */</span></span><br><span class="line"><span class="selector-class">.main</span> <span class="selector-class">.top</span> <span class="selector-class">.left</span> <span class="selector-class">.mod-a</span> <span class="selector-class">.content</span> <span class="selector-class">.detail</span> &#123;</span><br><span class="line">  <span class="attribute">padding-left</span>: <span class="number">15px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* good */</span></span><br><span class="line"><span class="selector-class">.content</span> <span class="selector-class">.detail</span> &#123;</span><br><span class="line">  <span class="attribute">padding-left</span>: <span class="number">15px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="属性-1"><a href="#属性-1" class="headerlink" title="属性"></a>属性</h3><ul>
<li><strong>建议</strong>相关的属性说明放在一组，并按下面顺序排列<ol>
<li>定位（position、left、right、top、bottom、z-index）</li>
<li>盒子模型（display、float、width、height、margin、padding、border、border-radius）</li>
<li>排印（font、color、background、line-height、text-align）<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.mod-example</span> &#123;</span><br><span class="line">  <span class="comment">/* 定位 */</span></span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">100</span>;</span><br><span class="line">  <span class="comment">/* 盒模型 */</span></span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">float</span>: right;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">15px</span> auto;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">15px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span><br><span class="line">  <span class="comment">/* 排印 */</span></span><br><span class="line">  <span class="attribute">font</span>: normal <span class="number">13px</span> <span class="string">&quot;Helvetica Neue&quot;</span>, sans-serif;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">1.5</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#333</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#f5f5f5</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
<li>可以缩写时，<strong>建议</strong>缩写属性，如<code>font</code>, <code>margin</code>等<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* good */</span></span><br><span class="line"><span class="selector-class">.post</span> &#123;</span><br><span class="line">  <span class="attribute">font</span>: <span class="number">12px</span>/<span class="number">1.5</span> arial, sans-serif;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* bad */</span></span><br><span class="line"><span class="selector-class">.post</span> &#123;</span><br><span class="line">  <span class="attribute">font-family</span>: arial, sans-serif;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">1.5</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>尽量不使用<code>!important</code>声明</li>
</ul>
<h3 id="字体"><a href="#字体" class="headerlink" title="字体"></a>字体</h3><ul>
<li><code>font-family</code>中<strong>必须</strong>使用字体族的英文名称，其中如有空格等特殊字符，<strong>必须</strong>使用双引号包裹。<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">h1</span> &#123;</span><br><span class="line">  <span class="attribute">font-family</span>: <span class="string">&quot;Microsoft YaHei&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><code>font-family</code>按效果从优到通用顺序编写<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">h1</span> &#123;</span><br><span class="line">  <span class="attribute">font-family</span>: <span class="string">&quot;Helvetica Neue&quot;</span>, Arial, <span class="string">&quot;Hiragino Sans GB&quot;</span>, <span class="string">&quot;WenQuanYi Micro Hei&quot;</span>, <span class="string">&quot;Microsoft YaHei&quot;</span>, sans-serif;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>需要在Windows平台下显示的内容，<code>font-size</code><strong>禁止</strong>小于12px，否则会模糊不清</li>
<li><code>ling-height</code><strong>建议</strong>使用数值<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.text</span> &#123;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">1.5</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>建议</strong>减少使用自定义中文字体，通常体积很大，很影响页面加载</li>
</ul>
<h3 id="响应式"><a href="#响应式" class="headerlink" title="响应式"></a>响应式</h3><ul>
<li>媒体查询<strong>必须</strong>放在尽可能相关的规则附近，不得单独编排<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* bad */</span></span><br><span class="line"><span class="comment">/* header styles */</span></span><br><span class="line"><span class="comment">/* main styles */</span></span><br><span class="line"><span class="comment">/* footer styles */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> (...) &#123;</span><br><span class="line">    <span class="comment">/* header styles */</span></span><br><span class="line">    <span class="comment">/* main styles */</span></span><br><span class="line">    <span class="comment">/* footer styles */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* good */</span></span><br><span class="line"><span class="comment">/* header styles */</span></span><br><span class="line"><span class="keyword">@media</span> (...) &#123;</span><br><span class="line">    <span class="comment">/* header styles */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* main styles */</span></span><br><span class="line"><span class="keyword">@media</span> (...) &#123;</span><br><span class="line">    <span class="comment">/* main styles */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* footer styles */</span></span><br><span class="line"><span class="keyword">@media</span> (...) &#123;</span><br><span class="line">    <span class="comment">/* footer styles */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>媒体查询有多个条件分隔时，每个条件<strong>必须</strong>另起一行<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@media</span></span><br><span class="line">(<span class="attribute">-webkit-min-device-pixel-ratio</span>: <span class="number">2</span>), /* Webkit-based browsers */</span><br><span class="line">(<span class="attribute">min--moz-device-pixel-ratio</span>: <span class="number">2</span>),    /* Older Firefox browsers (prior to Firefox <span class="number">16</span>) */</span><br><span class="line">(<span class="attribute">min-resolution</span>: <span class="number">2dppx</span>),             /* The standard way */</span><br><span class="line">(<span class="attribute">min-resolution</span>: <span class="number">192dpi</span>) &#123;           <span class="comment">/* dppx fallback */</span></span><br><span class="line">  <span class="comment">/* Retina-specific stuff here */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>媒体查询针对每一个种屏幕（大、中、小）的<strong>建议</strong>单独组织为一个文件<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* base.css */</span></span><br><span class="line"><span class="selector-class">.element</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.element-avatar</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.element-selected</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* base-media-small.css */</span></span><br><span class="line"><span class="keyword">@media</span> (<span class="attribute">min-width</span>: <span class="number">480px</span>) &#123;</span><br><span class="line">  <span class="selector-class">.element</span> &#123;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.element-avatar</span> &#123;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.element-selected</span> &#123;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><ul>
<li><strong>禁止</strong>使用JavaScript</li>
</ul>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a target="_blank" rel="noopener" href="http://groups.alidemo.cn/f2e-specs/style-guide/_book/index.html">集团前端代码规约</a><br><a target="_blank" rel="noopener" href="https://github.com/fex-team/styleguide">文档与源码编写风格</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://shenlvmeng.github.com/blog/2017/06/20/functional-programming-brief/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.jpg">
      <meta itemprop="name" content="shenlvmeng">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shenlvmeng's Blog">
      <meta itemprop="description" content="Be sharp, my friend.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Shenlvmeng's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/blog/2017/06/20/functional-programming-brief/" class="post-title-link" itemprop="url">函数式编程扫盲</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2017-06-20 19:45:44 / 修改时间：19:48:50" itemprop="dateCreated datePublished" datetime="2017-06-20T19:45:44+08:00">2017-06-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog/categories/%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index"><span itemprop="name">技术</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/blog/2017/06/20/functional-programming-brief/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2017/06/20/functional-programming-brief/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>3.4k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>6 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>名谓扫盲，实则是为自己扫盲。前些日子通过Elm的学习接触到了函数式编程的概念，发现语言风格和以C为代表的命令式编程大不相同，接触不同的编程思维还是很有助于自我提升的。在回顾的同时，这里走马观花地带过一些函数式编程的“热门词汇”。</p>
<h2 id="历史故事"><a href="#历史故事" class="headerlink" title="历史故事"></a><a target="_blank" rel="noopener" href="http://www.defmacro.org/ramblings/fp.html">历史故事</a></h2><p>什么是函数式编程（Functional Programming，FP）？它从何而来？可以吃吗？这得从20世纪30年代开始讲起：</p>
<blockquote>
<p>新建成的哥特式办公楼给普林斯顿大学带来一种天堂般的安全感。来自世界各地的逻辑学者应邀来到普林斯顿，他们将组建一个新的学部。正当大部分美国人还在为找不到一片面包做晚餐而发愁的时候，在普林斯顿却是这样一番景象：高高的天花板和木雕包覆的墙，每天品茶论道，漫步丛林。 一个名叫<a target="_blank" rel="noopener" href="http://zh.wikipedia.org/zh/%E9%98%BF%E9%9A%86%E4%BD%90%C2%B7%E9%82%B1%E5%A5%87">阿隆佐·邱奇</a>(Alonzo Church)的年轻数学家就过着这样优越的生活。阿隆佐本科毕业于普林斯顿后被留在研究院。他觉得这样的生活完全没有必要，于是他鲜少出现在那些数学茶会中也不喜欢到树林里散心。阿隆佐更喜欢独处：自己一个人的时候他的工作效率更高。尽管如此他还是和普林斯顿学者保持着联系，这些人当中有<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/zh/%E8%89%BE%E4%BC%A6%C2%B7%E5%9B%BE%E7%81%B5">艾伦·图灵</a>、<a target="_blank" rel="noopener" href="http://zh.wikipedia.org/zh/%E7%BA%A6%E7%BF%B0%C2%B7%E5%86%AF%C2%B7%E8%AF%BA%E4%BC%8A%E6%9B%BC">约翰·冯·诺伊曼</a>、<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/zh-hant/%E5%BA%93%E5%B0%94%E7%89%B9%C2%B7%E5%93%A5%E5%BE%B7%E5%B0%94">库尔特·哥德尔</a>。</p>
</blockquote>
<p>在与这些人的合作下，阿隆佐设计了一个名为<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Lambda_calculus">lambda演算</a>的形式系统。在这种语言里面，函数的参数是函数，返回值也是函数。篇幅和本人能力限制，不对lambda演算做更多讲解。</p>
<p>除了阿隆佐·邱奇，艾伦·图灵也在进行类似的研究。他设计了一种完全不同的系统（后来被称为图灵机），并用这种系统得出了和阿隆佐相似的答案。到了后来人们证明了图灵机和lambda演算的能力是一样的。</p>
<p>到了50年代末，一个叫John McCarthy的MIT教授（他也是普林斯顿的硕士）对阿隆佐的成果产生了兴趣。1958年他发明了一种列表处理语言（Lisp），这种语言是一种阿隆佐lambda演算在现实世界的实现，而且它能在冯·诺伊曼计算机上运行！而后的诸多函数式编程语言（如Haskell，ML等）也多少收到Lisp的影响。</p>
<h2 id="法则"><a href="#法则" class="headerlink" title="法则"></a><a target="_blank" rel="noopener" href="https://www.byvoid.com/upload/fl/images/FP/FP.pdf">法则</a></h2><p>函数式编程的思想来源Lambda演算在最初设计时就是用来解决计算相关问题，它是一种相对于“命令式编程”完全不同的编程范式，后者告诉计算机怎么做，前者着眼在从数学角度描述问题。它的特点也很明显：</p>
<ul>
<li><strong>变量不可变</strong>，即默认带上<code>const</code>或是<code>final</code>（当然函数式编程里压根没有<code>const</code>和<code>final</code>的概念）。这么来看，叫它为“符号”似乎更合适</li>
<li><strong>惰性求值</strong>，变量直到使用时才会真正计算它的值，因为这个特点，Haskell甚至允许无限列表的出现。同时，这也意味着语句的出现顺序和执行顺序并不相关。</li>
<li><strong>高阶函数</strong>，函数可以作为入参或是返回值，这个也被很多不那么OOP的语言借鉴去了</li>
<li><strong>无副作用</strong>，<strong>函数只负责映射数据</strong>，更像是个管道，绝不改变外部状态，同样的输入在任何时候会得到同样的输出（测试人员笑开了花）。这一点使得函数式编程语言天生支持并发执行。</li>
<li><strong>一切皆函数</strong>，函数是第一公民</li>
</ul>
<p>λ演算用来描述一种形式系统，它的语法只有三条：</p>
<table>
<thead>
<tr>
<th>语法</th>
<th>术语</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>a</td>
<td>变量</td>
<td>一个代表参数或数字&#x2F;逻辑值的符号或字符串</td>
</tr>
<tr>
<td>(λx.M)</td>
<td>定义</td>
<td>函数定义，<code>.</code>前面的标识符<code>x</code>为入参，M为表达式</td>
</tr>
<tr>
<td>(M N)</td>
<td>调用</td>
<td>应用函数到一个入参</td>
</tr>
</tbody></table>
<p>例如：<code>((λ x y. x + y) 1 2)</code>表示1和2相加。</p>
<p>λ演算公理只有两个：</p>
<table>
<thead>
<tr>
<th>操作</th>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>(λx.M[x]) → (λy.M[y])</td>
<td>α变换</td>
<td>改变入参名不影响结果</td>
</tr>
<tr>
<td>((λx.M) E) → (M[x:&#x3D;E])</td>
<td>β规约</td>
<td>将入参传入λ意味着对它做演算</td>
</tr>
</tbody></table>
<p>还以上面的相加为例，α变换就是<code>λ x y. x + y → λ a b. a + b</code>；β规约就是<code>(λ x y. x + y) a b → a + b</code>。是不是很好理解。</p>
<p>通过这两个基本的公理，结合基本变量类型可以构造各种函数。如not函数，and函数，or函数，甚至if函数。</p>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">let</span> and =</span><br><span class="line"><span class="title">true</span> value  -&gt;  value</span><br><span class="line"><span class="title">false</span> value -&gt;  false</span><br><span class="line"><span class="title">value</span> true  -&gt;  value</span><br><span class="line"><span class="title">value</span> false -&gt;  false</span><br><span class="line"></span><br><span class="line"><span class="title">let</span> <span class="keyword">if</span> =</span><br><span class="line">λ cond tvalue fvalue. (cond and tvalue) or (not cond  and fvalue)</span><br></pre></td></tr></table></figure>

<h2 id="高阶函数"><a href="#高阶函数" class="headerlink" title="高阶函数"></a>高阶函数</h2><p>高阶函数意味着，我们可以把函数直接作为入参传入，或作为返回值返回。这早已不是函数式编程语言的专利，Python，JavaScript等也吸收了这个设计理念。</p>
<p><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Currying">函数柯里化</a>即部分求值，就利用了高阶函数的特点提出的技术，它使得函数可以一个一个接受入参，返回相同的计算结果。类似于下面的感觉：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">pow</span>(<span class="params">i, j</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> i^j;</span><br><span class="line">&#125;</span><br><span class="line">funtion <span class="title function_">square</span>(<span class="params">j</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">pow</span>(i, <span class="number">2</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>square</code>函数返回的函数需要指定<code>i</code>才可执行。柯里的名字来自于第一次提出这个技巧的逻辑学家<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Haskell_Curry">Haskell Curry</a>。</p>
<p>另外，值得注意的是，在函数式编程下，高阶函数通过将函数作为参数惰性求值实现。那命令式编程下呢，答案是<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Closure_(computer_programming)">闭包</a>（lexical closure）。</p>
<h2 id="递归？"><a href="#递归？" class="headerlink" title="递归？"></a>递归？</h2><p>函数式编程里没有状态变量（可以用其他方式实现），因此自然没有循环结构。实际上，函数式编程中的循环都是通过递归实现的。比如，斐波那契数列函数像下面这样：</p>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">let</span> fact = λ n. <span class="keyword">if</span> (n == <span class="number">0</span>) <span class="number">1</span> (n * fact n-<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<p>这里<code>fact</code>函数引用了自身，虽然编译器可以识别这种写法，但是显然它并不符合严格的数学公理。</p>
<p>重新审视这个变换，我们可以通过传入自身的方式来让它“数学化”。<code>let P = λ self n. if (n == 0) 1 (n * self(self n-1))</code>，然后在令<code>let fact n = P (P n)</code>。如此这般：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">fact 4</span><br><span class="line">-&gt; P (P 4)</span><br><span class="line">-&gt; if (4 == 0) (1) (4 * P(P 3))</span><br><span class="line">-&gt; 4 * P(P 3)</span><br><span class="line">-&gt; 4 * 3 * P(P 2)</span><br><span class="line">-&gt; 4 * 3 * 2 * P(P 1)</span><br><span class="line">-&gt; 4 * 3 * 2 * 1</span><br></pre></td></tr></table></figure>

<p>可是，这个函数看上去并不自然，不像一个真正的递归函数，且λ演算的公理里并没有这样一条公理可以让你在定义函数的时候引用本身。还好，已经有人做了<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Fixed-point_combinator">研究</a>，借助Y组合子的帮助，可以实现真正的递归函数。</p>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">let</span> <span class="type">Y</span> = λ <span class="type">F</span>. <span class="type">G</span>(<span class="type">G</span>)</span><br><span class="line"><span class="type">G</span> = λ self. <span class="type">F</span>(self(self))</span><br></pre></td></tr></table></figure>

<p>这相当于我们在λ演算公理体系中添加了一条“可以在函数调用时引用自身”。这也是证明λ演算图灵等价的关键一步。这意味着它的计算能力和计算机是一致的，能通过λ演算描述的函数一定可以由计算机计算。</p>
<h2 id="Haskell"><a href="#Haskell" class="headerlink" title="Haskell"></a>Haskell</h2><p><a target="_blank" rel="noopener" href="https://www.zhihu.com/question/27355585">Haskell</a>是一个纯函数式编程语言，它得名于上面提到过的Haskell Curry。Y组合子也是他发现的。</p>
<p>Haskell中一切都是函数，甚至没有指令式编程中变量的概念，它的变量全部都是只允许一次赋值，不可改变。</p>
<p>Haskell还没有一般意义上的控制流结构，如for循环，取而代之的是递归。同样，Haskell还有两个重要的特性，即无副作用和惰<br>性求值。偏数学的问题，用Haskell解决通常代码量都很小。下面是一个列表去重例子</p>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">cut</span> cond  []  = []</span><br><span class="line"><span class="title">cut</span> cond  (elem:rest) = <span class="keyword">if</span>  cond elem <span class="keyword">then</span></span><br><span class="line"><span class="title">cut</span> cond  rest  <span class="keyword">else</span>  elem:rest</span><br><span class="line"><span class="title">compress</span>  []  = []</span><br><span class="line"><span class="title">compress</span>  (elem:rest) = elem  : compress</span><br><span class="line">(cut  (== elem) rest)</span><br></pre></td></tr></table></figure>
<p>还有一个快排（不过借助了filter函数）的例子，也是短得不行</p>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">qsort</span> (elem:rest) = (qsort lesser) ++ [elem] ++ (qsort greater)</span><br><span class="line">  <span class="keyword">where</span></span><br><span class="line">    lesser = filter (&lt; elem) rest</span><br><span class="line">    greater = filter (&gt;= elem) rest</span><br></pre></td></tr></table></figure>
<p>Haskell中还可以定义无穷列表，如[1..]表示所有正整数。这也是惰性求值特性带来的。<code>[1,3..] !! 42</code>将会返回85。</p>
<h2 id="Monad"><a href="#Monad" class="headerlink" title="Monad"></a>Monad</h2><blockquote>
<p>Monad其实就是自函子范畴上的一个幺半群而已</p>
</blockquote>
<p>这节将展示一个图文并茂的说明但并不致力于解释清楚monad到底是个什么（因为我自己也不明白）。这篇对比<a target="_blank" rel="noopener" href="http://adit.io/posts/2013-04-17-functors,_applicatives,_and_monads_in_pictures.html">functor，applicatives，monad</a>的文章写得很透彻易懂，尽管这可能并不能描述一个100%的monad。要更深刻了解monad还是需要学习范畴论的内容。</p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a target="_blank" rel="noopener" href="https://www.byvoid.com/upload/fl/images/FP/FP.pdf">函数式编程.pdf</a><br><a target="_blank" rel="noopener" href="http://www.defmacro.org/ramblings/fp.html">Functional Programming For The Rest of Us</a><br><a target="_blank" rel="noopener" href="http://adit.io/posts/2013-04-17-functors,_applicatives,_and_monads_in_pictures.html">Functors, Applicatives, And Monads In Pictures</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" title="上一页" aria-label="上一页" href="/blog/page/20/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/blog/">1</a><span class="space">&hellip;</span><a class="page-number" href="/blog/page/20/">20</a><span class="page-number current">21</span><a class="page-number" href="/blog/page/22/">22</a><span class="space">&hellip;</span><a class="page-number" href="/blog/page/30/">30</a><a class="extend next" rel="next" title="下一页" aria-label="下一页" href="/blog/page/22/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 2014 – 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">shenlvmeng</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="站点总字数">1m</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">29:03</span>
  </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/blog/js/comments.js"></script><script src="/blog/js/utils.js"></script><script src="/blog/js/motion.js"></script><script src="/blog/js/schemes/muse.js"></script><script src="/blog/js/next-boot.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/algoliasearch/4.14.3/algoliasearch-lite.umd.js" integrity="sha256-dyJcbGuYfdzNfifkHxYVd/rzeR6SLLcDFYEidcybldM=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/instantsearch.js/4.49.2/instantsearch.production.min.js" integrity="sha256-Nu8yqoXoRZEVYyZf4/eY1V4FsenbiCw85RY3gWjN3zQ=" crossorigin="anonymous"></script><script src="/blog/js/third-party/search/algolia-search.js"></script>





  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/blog/js/third-party/math/mathjax.js"></script>


<script class="next-config" data-name="disqus" type="application/json">{"enable":true,"shortname":"shenlvmengs-blog","count":true,"i18n":{"disqus":"disqus"}}</script>
<script src="/blog/js/third-party/comments/disqus.js"></script>

</body>
</html>
