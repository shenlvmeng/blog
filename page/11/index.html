<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/blog/favicon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/blog/favicon.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/blog/favicon.png">
  <link rel="mask-icon" href="/blog/favicon.png" color="#222">

<link rel="stylesheet" href="/blog/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" integrity="sha256-Z1K5uhUaJXA7Ll0XrZ/0JhX4lAtZFpT6jkKrEDT0drU=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"shenlvmeng.github.com","root":"/blog/","images":"/blog/images","scheme":"Muse","darkmode":false,"version":"8.14.1","exturl":false,"sidebar":{"position":"right","display":"always","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"algolia":{"appID":"N573WZGUR1","apiKey":"f4b654279103617a4cefb92a132ff0c3","indexName":"blog","hits":{"per_page":10}}}</script><script src="/blog/js/config.js"></script>

    <meta name="description" content="Be sharp, my friend.">
<meta property="og:type" content="website">
<meta property="og:title" content="Shenlvmeng&#39;s Blog">
<meta property="og:url" content="http://shenlvmeng.github.com/blog/page/11/">
<meta property="og:site_name" content="Shenlvmeng&#39;s Blog">
<meta property="og:description" content="Be sharp, my friend.">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="shenlvmeng">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://shenlvmeng.github.com/blog/page/11/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/11/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Shenlvmeng's Blog</title>
  






  <script async defer data-website-id="" src=""></script>

  <script defer data-domain="" src=""></script>

  <noscript>
    <link rel="stylesheet" href="/blog/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/blog/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Shenlvmeng's Blog</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Blog</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container"></div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container">
  <div class="algolia-stats"><hr></div>
  <div class="algolia-hits"></div>
  <div class="algolia-pagination"></div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="shenlvmeng"
      src="/blog/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">shenlvmeng</p>
  <div class="site-description" itemprop="description">Be sharp, my friend.</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/blog/archives/">
          <span class="site-state-item-count">146</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/blog/categories/">
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/blog/tags/">
        <span class="site-state-item-count">438</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/shenlvmeng" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;shenlvmeng" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="http://weibo.com/shenlvmeng" title="Weibo → http:&#x2F;&#x2F;weibo.com&#x2F;shenlvmeng" rel="noopener me" target="_blank"><i class="fab fa-weibo fa-fw"></i>Weibo</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://shenlvmeng.github.com/blog/2019/05/07/principles-of-microeconomics/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.jpg">
      <meta itemprop="name" content="shenlvmeng">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shenlvmeng's Blog">
      <meta itemprop="description" content="Be sharp, my friend.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Shenlvmeng's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/blog/2019/05/07/principles-of-microeconomics/" class="post-title-link" itemprop="url">《经济学原理》 - 微观经济学原理笔记</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-05-07 00:46:47" itemprop="dateCreated datePublished" datetime="2019-05-07T00:46:47+08:00">2019-05-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2020-06-01 23:57:49" itemprop="dateModified" datetime="2020-06-01T23:57:49+08:00">2020-06-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog/categories/%E6%80%9D%E8%80%83/" itemprop="url" rel="index"><span itemprop="name">思考</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/blog/2019/05/07/principles-of-microeconomics/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/05/07/principles-of-microeconomics/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>8.7k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>15 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote>
<p>全文参考自《经济学原理》曼昆版 微观经济学分册<br>术语：<a target="_blank" rel="noopener" href="//shenlvmeng.github.io/blog/2019/05/07/principles-of-microeconomics-terms/">《经济学原理》 - 微观经济学原理笔记 附：术语</a><br>宏观经济学：<a target="_blank" rel="noopener" href="//shenlvmeng.github.io/blog/2020/06/01/principles-of-macroeconomics/">《经济学原理》 - 宏观经济学原理笔记</a></p>
</blockquote>
<h2 id="导言"><a href="#导言" class="headerlink" title="导言"></a>导言</h2><h3 id="经济学十大原理"><a href="#经济学十大原理" class="headerlink" title="经济学十大原理"></a>经济学十大原理</h3><ul>
<li><strong>稀缺性</strong>指社会资源有限，不能生产人们希望的所有物品和服务。</li>
<li><strong>经济学</strong>研究社会如何管理自己的稀缺资源</li>
</ul>
<p>经济学有些核心思想，<strong>十大原理</strong>可以做一个简要的概括。经济由群体中的个人组成，因此个人的行为可以反映经济的行为。下面从个人角度分类举出这些原理。</p>
<h4 id="人们如何做出决策"><a href="#人们如何做出决策" class="headerlink" title="人们如何做出决策"></a>人们如何做出决策</h4><ul>
<li><strong>原理1：人们总会面临权衡取舍</strong></li>
<li><strong>原理2：某种东西的成本是为了得到它需要舍弃的东西</strong>（机会成本）</li>
<li><strong>原理3：理性人考虑边际量</strong>。一个人对任何物品的支付意愿基于增加1单位物品获得的<strong>边际收益</strong>。当且仅当一个行为的边际收益大于边际成本时，理性决策者才会采取这个行为</li>
<li><strong>原理4：人们会对激励做出反应</strong>。因为理性人会通过比较成本和收益做出决策。比如降息会激励人们取出储蓄拿来投资。我们在分析决策时，不仅要考虑直接影响，还应该能考虑通过激励造成的间接影响</li>
</ul>
<h4 id="人们如何相互影响"><a href="#人们如何相互影响" class="headerlink" title="人们如何相互影响"></a>人们如何相互影响</h4><ul>
<li><strong>原理5：贸易可以使每个人的状况都变得更好</strong>，即非零和。</li>
<li><strong>原理6：市场通常是组织经济活动的一种好方法</strong>。根据亚当·斯密的观察结果，市场经济中价格作为一只“看不见的手”指引经济活动。它的推论是，任何限制或阻碍这只手的行为会扭曲家庭和企业的决策，并造成不良影响。比如税收、中央计划经济。<ul>
<li>市场经济中，参与者受利己心的驱动，但往往比他处于公共利益考虑时，更能有效促进公共的利益</li>
<li>“让人们各行其是，不要让政府沉重的手知道他们的行为，结果往往会最好”</li>
</ul>
</li>
<li><strong>原理7：政府有时可以改善市场结果</strong>。<ul>
<li>政府制定制度，通过权威以便个人可以拥有并控制稀缺资源</li>
<li>“看不见的手”考虑不了<strong>外部性</strong>和<strong>市场势力</strong>这两种市场失灵的情况。因为需要政府进行干预，以促进效率或促进平等</li>
</ul>
</li>
</ul>
<h4 id="整体经济如何运行"><a href="#整体经济如何运行" class="headerlink" title="整体经济如何运行"></a>整体经济如何运行</h4><ul>
<li><strong>原理8：一国的生活水平取决于它生产物品和服务的能力</strong>。更细致地说，几乎所有生活水平的差别都可以归因于<strong>生产率</strong>的差别</li>
<li><strong>原理9：政府发行货币过多时，物价会上升</strong>，即通货膨胀。</li>
<li><strong>原理10：社会面临通货膨胀和失业间的短期权衡取舍</strong><ul>
<li>货币量增加 -&gt; 社会整体支出水平上升 -&gt; 物品服务需求增加 -&gt; 企业提高物价，雇佣更多的工人生产 -&gt; 更少的失业</li>
</ul>
</li>
</ul>
<h3 id="像经济学家一样思考"><a href="#像经济学家一样思考" class="headerlink" title="像经济学家一样思考"></a>像经济学家一样思考</h3><h4 id="作为科学家"><a href="#作为科学家" class="headerlink" title="作为科学家"></a>作为科学家</h4><p>经济学同其他科学一样，有提出理论 -&gt; 收集数据 -&gt; 分析数据几个步骤，不同的是经济学同其他社会科学一样，研究的是人。</p>
<ul>
<li>同样是观察、理论、验证；经济学的<strong>验证</strong>通常只能从真实的历史事件中入手</li>
<li>同样是简化问题，经济学中也有<strong>假设</strong>，并在假设基础上建立<strong>模型</strong>，以此了解世界</li>
<li>第一个模型：<strong>循环流量图</strong>，描述家庭和企业的货币流转<ul>
<li>在物品与服务市场，家庭是买者，企业是卖者</li>
<li>在生产要素市场，家庭是卖者，企业是买者</li>
</ul>
</li>
<li>绝大多数经济模型都通过数学工具构建，比如最简单的<strong>生产可能性边界</strong><ul>
<li>表示技术和生产要素固定时，经济所能生产的产品组合</li>
<li>曲线斜率代表某产品的机会成本</li>
<li>曲线上的某点是当前稀缺资源的生产极限，它被称为是“有效率的”。曲线面积内的点是“无效率的”，曲线面积外的点在当前条件下无法达成。</li>
<li><strong>站在原点看，边界通常是向外凸出的</strong></li>
</ul>
</li>
<li>微观经济学与宏观经济学</li>
</ul>
<h4 id="作为政策顾问"><a href="#作为政策顾问" class="headerlink" title="作为政策顾问"></a>作为政策顾问</h4><ul>
<li>经济学家分析世界时是科学家，帮助改善世界时，它们是政策顾问（工程师）</li>
<li><strong>实证表述</strong>与<strong>规范表述</strong><ul>
<li>实证表述通过证据验证；规范表述除了证据还会涉及道德、政治哲学等价值观</li>
<li>经济学中的大多数内容都是<strong>实证表述</strong>，站在科学家立场上的</li>
</ul>
</li>
<li><em>（个人感悟）世界由自然科学家们定义和主导，而“人”则由社会科学家（如经济学家、哲学家）们定义和主导</em></li>
<li>经济学家只是施政的一个影响因素而已，最终政策是多方角力的结果</li>
</ul>
<h4 id="造成经济学家矛盾的原因"><a href="#造成经济学家矛盾的原因" class="headerlink" title="造成经济学家矛盾的原因"></a>造成经济学家矛盾的原因</h4><ul>
<li>科学判断不同，这与自然科学一致。</li>
<li>价值观不一致</li>
</ul>
<h4 id="附：图表"><a href="#附：图表" class="headerlink" title="附：图表"></a>附：图表</h4><ul>
<li>通常用图形直观地说明一组事件如何引起另一组事件的发生</li>
<li>两个陷阱：变动由未画出的第三个变量引起；反向因果关系<ul>
<li>打火机和癌症的正相关</li>
<li>家用旅行车和家庭人口增加的正相关</li>
</ul>
</li>
</ul>
<h3 id="相互依存性和贸易的好处"><a href="#相互依存性和贸易的好处" class="headerlink" title="相互依存性和贸易的好处"></a>相互依存性和贸易的好处</h3><ul>
<li>出发点是：贸易可以使每个人状况都变得更好</li>
</ul>
<h4 id="简单的经济学寓言"><a href="#简单的经济学寓言" class="headerlink" title="简单的经济学寓言"></a>简单的经济学寓言</h4><ul>
<li>自给自足时，生产可能性边界即消费可能性边界。</li>
<li>相互贸易时，由于专业化，每人专注于擅长的工作，双方的消费可能性边界将大于生产可能性边界</li>
</ul>
<h4 id="比较优势：专业化的动力"><a href="#比较优势：专业化的动力" class="headerlink" title="比较优势：专业化的动力"></a>比较优势：专业化的动力</h4><ul>
<li>绝对优势和比较优势</li>
<li>比较优势用机会成本衡量，所以<strong>两个生产者间相互比较，比较优势一定是有高有低而不会都较高的</strong></li>
<li>不同的机会成本导致贸易可以增加经济总产量，每个人专门生产自己有比较优势的物品。同时由于机会成本不同，双方都可以议价，并以<strong>低于自己生产某物品机会成本的价格得到该物品从而从贸易中获益</strong>。</li>
<li>比较优势原理：<strong>贸易可以使社会上每个人都获益，因为它使人们可以专门从事他们具有比较优势的活动</strong>。这也是经济学家反对贸易限制的主要依据</li>
<li>通过上面分析还能得到一个结论：<strong>由于双方都要获益，因此贸易的价格要在两种机会成本之间才能达成交易</strong></li>
</ul>
<h4 id="比较优势的应用"><a href="#比较优势的应用" class="headerlink" title="比较优势的应用"></a>比较优势的应用</h4><ul>
<li>Tom Fordy应该雇人修剪草坪，而去拍广告</li>
<li><strong>自由贸易中，每种物品应该由生产这种物品机会成本较低的国家生产</strong></li>
</ul>
<h2 id="市场如何运行"><a href="#市场如何运行" class="headerlink" title="市场如何运行"></a>市场如何运行</h2><h3 id="供给与需求的市场力量"><a href="#供给与需求的市场力量" class="headerlink" title="供给与需求的市场力量"></a>供给与需求的市场力量</h3><h4 id="市场与竞争"><a href="#市场与竞争" class="headerlink" title="市场与竞争"></a>市场与竞争</h4><ul>
<li>比较优势说明贸易可以使双方状况都变好，而物品和服务是通过市场中的<strong>供给与需求</strong>交流的</li>
<li>供给和需求是人们在市场上相互交易的行为<ul>
<li>市场上，买者决定需求，卖者决定供给</li>
</ul>
</li>
<li>完全竞争的两个特征 &#x2F; 价格接受者 &#x2F; 垄断</li>
</ul>
<h4 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h4><ul>
<li>需求定理：需求量和价格成反比</li>
<li>区分市场需求和个人需求</li>
<li>影响需求曲线的一些因素<ul>
<li>收入：正常物品和低档物品</li>
<li>相关物品的价格：替代品</li>
<li>爱好、预期、买者总量</li>
</ul>
</li>
</ul>
<h4 id="供给"><a href="#供给" class="headerlink" title="供给"></a>供给</h4><ul>
<li>供给定理：价格和供给量成正比</li>
<li>区分市场供给和个人供给</li>
<li>影响供给曲线的一些因素<ul>
<li>投入品价格</li>
<li>技术</li>
<li>预期、卖者数量</li>
</ul>
</li>
</ul>
<h4 id="需求和供给的结合"><a href="#需求和供给的结合" class="headerlink" title="需求和供给的结合"></a>需求和供给的结合</h4><ul>
<li>市场的均衡是上述两条线的交点<ul>
<li>均衡价格（市场出清价格）</li>
<li>过剩和短缺（<strong>沿着曲线移动</strong>）</li>
<li><strong>供求定理</strong>：认为任何一种物品的价格都会自发调整并达到平衡</li>
</ul>
</li>
<li>均衡变动：曲线的移动、新平衡的达成<ul>
<li><strong>判断影响的是供给还是需求还是都有</strong></li>
<li>区分<strong>供给变动</strong>，<strong>供给量变动</strong>，<strong>需求变动</strong>，<strong>需求量变动</strong></li>
</ul>
</li>
<li>价格决定了社会稀有资源的配置 &#x2F; 一只看不见的手</li>
</ul>
<h3 id="弹性及其应用"><a href="#弹性及其应用" class="headerlink" title="弹性及其应用"></a>弹性及其应用</h3><ul>
<li>需求价格弹性和影响因素<ul>
<li>可替代品的可获得性&#x2F;必需品和奢侈品&#x2F;市场和时间的范围</li>
</ul>
</li>
<li>计算方式：需求量<strong>变动</strong>百分比 &#x2F; 价格<strong>变动</strong>百分比<ul>
<li><strong>中点法</strong>，避免同一场景的不同方向得到不同结果</li>
</ul>
</li>
<li>弹性值和需求曲线的斜率<ul>
<li>富有弹性、缺乏弹性、单位弹性</li>
</ul>
</li>
<li>收益的计算：数目 * 价格<ul>
<li>富有弹性时，价格上升引起收益增加</li>
<li>缺乏弹性时，价格上升引起收益减少</li>
</ul>
</li>
<li>需求收入弹性和需求交叉价格弹性</li>
</ul>
<p>一些应用的例子：</p>
<ul>
<li>小麦技术的进步减少了农民收入，鼓励人们离开农业</li>
<li>OPEC不能长期维持高油价</li>
<li>禁毒在短期内会增加毒品相关犯罪</li>
</ul>
<h3 id="供给、需求和政府政策"><a href="#供给、需求和政府政策" class="headerlink" title="供给、需求和政府政策"></a>供给、需求和政府政策</h3><h4 id="价格控制"><a href="#价格控制" class="headerlink" title="价格控制"></a>价格控制</h4><ul>
<li><strong>限制性约束</strong>的价格上限（低于均衡价格）将造成物品短缺，引起稀缺物品分配效率的降低<ul>
<li>限制油价</li>
<li>长期的租金控制引起人们租不到房，房东不愿意优化自己的房</li>
</ul>
</li>
<li>同样地，<strong>限制性约束</strong>的价格下限很容易引起过剩<ul>
<li>劳动力市场的最低工资会导致失业</li>
<li>计划经济导致生活必需品的缺乏</li>
</ul>
</li>
</ul>
<h4 id="税收"><a href="#税收" class="headerlink" title="税收"></a>税收</h4><ul>
<li>税收抑制了市场活动，导致物品销售量减少，减少了市场规模，同时买者和卖者分摊了税收负担。</li>
<li><strong>对买者征税和对卖者征税是相同的</strong>，税收归宿决定于供给和需求的力量。</li>
<li><strong>税收楔子</strong>与相对弹性<ul>
<li>更有弹性的一方承担较少的部分，<strong>税收负担更多由缺乏弹性的市场一方承担</strong></li>
<li>应用：工薪税更多由劳动者承担；奢侈品税由奢侈品供应者承担</li>
</ul>
</li>
</ul>
<h2 id="市场和福利"><a href="#市场和福利" class="headerlink" title="市场和福利"></a>市场和福利</h2><h3 id="消费者、生产者、市场效率"><a href="#消费者、生产者、市场效率" class="headerlink" title="消费者、生产者、市场效率"></a>消费者、生产者、市场效率</h3><ul>
<li>福利经济学，讨论资源配置和经济福利的关系</li>
<li>消费者参与市场的收益 - 支付意愿和消费者剩余<ul>
<li>图表表示：<strong>需求曲线以下和价格以上的面积</strong></li>
<li>实际意义：衡量买者从一件物品中得到<strong>自我感觉</strong>的利益，通常情况下，也可以反映经济福利程度</li>
</ul>
</li>
<li>生产者参与市场的收益 - 成本和生产者剩余<ul>
<li>图表表示：<strong>价格以下和供给曲线以上的面积</strong></li>
<li>实际意义：衡量卖者的福利程度</li>
</ul>
</li>
<li>市场效率、平等<ul>
<li>总剩余：生产者剩余 + 消费者剩余</li>
<li>效率和平等</li>
<li>自由市场把物品供给分配给对这些物品评价最高的买者，评价用购买意愿衡量</li>
<li>自由市场把物品的需求分配给能够以最低成本生产这些物品的卖者</li>
<li><strong>自由市场生产出使消费者和生产者剩余总和最大化的物品量</strong></li>
</ul>
</li>
<li>之前的讨论都建立在假设的基础上、市场失灵时，市场无法有效地配置资源<ul>
<li>非完全竞争：市场势力</li>
<li>外部性</li>
</ul>
</li>
<li>应用<ul>
<li>不论是供给提高（技术演进、成本降低）还是需求提高，都能提高生产者、消费者剩余，即市场效率。间接地，，也会促进互补品的繁荣，引起替代品的消亡</li>
</ul>
</li>
</ul>
<h3 id="赋税的代价"><a href="#赋税的代价" class="headerlink" title="赋税的代价"></a>赋税的代价</h3><ul>
<li>税收收入的矩形表示 &#x3D;&gt; 社会总剩余的下降</li>
<li><strong>买者和卖者因税收遭受的损失大于政府筹集到的收入</strong></li>
<li>税收引起的<strong>无谓损失</strong>因为它使卖者和买者不能实现贸易的好处，这个好处可以用税收楔子的三角形衡量。三角形内的贸易带来的剩余由于小于税收被阻止。</li>
<li><strong>供给和需求的弹性越大，税收带来的无谓损失就越大</strong><ul>
<li>无谓损失越大，政府实施一项计划的成本就越高</li>
</ul>
</li>
<li>政府的税收收入随着征税的增长会<strong>先变大再变小</strong>，而无谓损失是<strong>一直扩大的</strong></li>
</ul>
<h3 id="国际贸易"><a href="#国际贸易" class="headerlink" title="国际贸易"></a>国际贸易</h3><ul>
<li>国内价格反映了物品的机会成本，即国内具有比较优势的商品</li>
<li>假定世界价格是既定的，用世界价格线和供求线形成的三角形表示进出口国收益<ul>
<li>世界价格较低时，消费者剩余增加，生产者剩余减少，总体收益</li>
<li>世界价格较高时，消费者剩余降低，生产者剩余增加，总体收益</li>
<li>贸易<strong>可以</strong>使每个人的情况都变好</li>
</ul>
</li>
<li>关税和无谓损失<ul>
<li>关税使价格更逼近均衡价格，减少了进口量，但带来了无谓损失</li>
<li>无谓损失来自过度生产和消费不足</li>
</ul>
</li>
<li><strong>贸易在消灭一些工作岗位的同时，也创造了比较优势行业上的工作岗位</strong>（保护主义）</li>
<li>自由贸易在提高效率的同时，可以会牺牲平等</li>
</ul>
<h2 id="公共部门经济学"><a href="#公共部门经济学" class="headerlink" title="公共部门经济学"></a>公共部门经济学</h2><h3 id="外部性"><a href="#外部性" class="headerlink" title="外部性"></a>外部性</h3><ul>
<li>正外部性和负外部性</li>
<li>外部性内在化<ul>
<li><strong>负外部性使市场生产数量大于社会合意数量，正外部性则相反</strong></li>
<li>对正外部性补贴，负外部性征税</li>
</ul>
</li>
<li>如何针对<ul>
<li>命令和控制 —— 管制</li>
<li>以市场为基础 —— 矫正税和补贴</li>
<li>可交易的污染量 —— 污染许可证</li>
</ul>
</li>
<li>矫正税鼓励公司开发更环保的技术，比管制更灵活，同时还能增加政府收入</li>
<li><strong>矫正税决定了污染价格，污染许可证决定了污染量</strong></li>
<li>外部性的私人解决办法<ul>
<li>道德规范 &amp; 慈善行为</li>
<li>外部性内在化是一些企业进行多类型经营的一个原因</li>
</ul>
</li>
<li>科斯定理：私人可以有效率地解决外部性<ul>
<li>交易成本影响科斯定理</li>
</ul>
</li>
</ul>
<h3 id="公共物品和公共资源"><a href="#公共物品和公共资源" class="headerlink" title="公共物品和公共资源"></a>公共物品和公共资源</h3><ul>
<li>私人市场不能保证没有价格的物品的适当配置</li>
<li><strong>私人物品&#x2F;公共物品&#x2F;公共资源&#x2F;俱乐部物品</strong></li>
<li>公共物品<ul>
<li>公共物品的总利益大于成本时，就可以不考虑<strong>搭便车者</strong>的存在</li>
<li>公共物品的成本-收益分析：并不像私人物品市场，买者和卖者通过出价表达物品的评价和成本</li>
</ul>
</li>
<li>公共资源<ul>
<li><strong>公地悲剧</strong>：一个人使用公共资源会减少他人使用，由于负外部性的存在，公共资源往往被过度使用</li>
<li>解决措施：征收矫正税或颁发许可证；将公共资源变为私人物品</li>
<li>举例：清洁的空气、水、拥堵的道路、动植物资源等</li>
</ul>
</li>
<li>为什么象牙的商业价值是大象的噩梦，而奶牛的商业价值却是它的护身符呢？<ul>
<li>因为<strong>大象是公共资源，而奶牛是私人物品</strong></li>
<li><strong>产权缺失</strong>引起市场失灵，政府可以释放市场的力量，从而让资源配置更有效率，增进经济福利</li>
</ul>
</li>
</ul>
<h3 id="税制"><a href="#税制" class="headerlink" title="税制"></a>税制</h3><h4 id="联邦政府"><a href="#联邦政府" class="headerlink" title="联邦政府"></a>联邦政府</h4><ul>
<li>收入：个人所得税、社会保险税（工薪税）、公司所得税、销售税</li>
<li>支出：收入保障、医疗、国防、债券利息</li>
<li>赤字和盈余<ul>
<li>赤字可以通过发行政府债券筹资，并在盈余时偿还</li>
<li>人口老龄化带来的财政挑战</li>
</ul>
</li>
</ul>
<h4 id="地方政府"><a href="#地方政府" class="headerlink" title="地方政府"></a>地方政府</h4><ul>
<li>收入：销售税、财产税、许可证收费、公共交通收费</li>
<li>支出：教育、医疗</li>
</ul>
<h4 id="税收的效率"><a href="#税收的效率" class="headerlink" title="税收的效率"></a>税收的效率</h4><ul>
<li>税收的成本来自于扭曲决策时的<strong>无谓损失</strong>和纳税人承担的<strong>管理负担</strong></li>
<li>消费税的转型</li>
<li>边际税率和平均税率</li>
<li>定额税：<strong>有效率但无法保证平等</strong></li>
</ul>
<h4 id="税收的平等"><a href="#税收的平等" class="headerlink" title="税收的平等"></a>税收的平等</h4><ul>
<li>受益原则：认为人们应该根据从政府服务的收益多少来纳税</li>
<li>支付能力原则：认为应该根据人们可承受负担来纳税<ul>
<li><strong>纵向平等</strong>：支付能力强的人多纳税</li>
<li>比例税、累进税、累退税</li>
<li><strong>横向平等</strong>：相似支付能力的人纳税相似</li>
</ul>
</li>
<li>税收归宿和税收平等<ul>
<li>粘蝇纸理论</li>
</ul>
</li>
</ul>
<h2 id="企业行为和产业组织"><a href="#企业行为和产业组织" class="headerlink" title="企业行为和产业组织"></a>企业行为和产业组织</h2><h3 id="生产成本"><a href="#生产成本" class="headerlink" title="生产成本"></a>生产成本</h3><ul>
<li>我们通常可以假设：<strong>企业的目标就是利润最大化</strong></li>
<li>收益、成本、利润的计算</li>
<li>机会成本：显性、隐性成本<ul>
<li>容易被忽略的隐性成本</li>
</ul>
</li>
<li>经济利润与会计利润<ul>
<li>区别：是否考虑隐性成本</li>
<li><strong>经济利润是企业经营者供给物品或服务的动机源泉</strong></li>
</ul>
</li>
</ul>
<h4 id="生产与成本"><a href="#生产与成本" class="headerlink" title="生产与成本"></a>生产与成本</h4><ul>
<li>生产函数：投入量和产量的函数</li>
<li>边际产量、边际产量递减</li>
<li>总成本曲线：产量和总成本的关系函数<ul>
<li>在边际产量递减时，生产函数越来越平坦，而总成本曲线越来越陡峭</li>
<li><strong>由于投入量和成本的近似性，生产函数几乎是总成本曲线的反函数</strong></li>
</ul>
</li>
<li>固定成本：租金、人力等</li>
<li>可变成本：投入品、时薪</li>
<li>平均总成本（ATC）、平均可变成本（AVC）、边际成本（MC）<ul>
<li>递增的边际成本</li>
<li>U形的平均总成本</li>
<li>U形平均总成本的最低点对应的产量叫做<strong>有效规模</strong></li>
</ul>
</li>
<li><strong>边际成本曲线和平均总成本曲线在有效规模处相交</strong></li>
<li>典型的成本曲线三个特征<ul>
<li>最终递增的边际成本曲线</li>
<li>U形的平均总成本曲线</li>
<li>两者相交于有效规模处</li>
</ul>
</li>
</ul>
<h4 id="短期和长期成本"><a href="#短期和长期成本" class="headerlink" title="短期和长期成本"></a>短期和长期成本</h4><ul>
<li>企业的长期成本曲线不同于短期成本曲线<ul>
<li>大、中、小型工程的ATC曲线</li>
</ul>
</li>
<li>规模经济、规模不经济、规模收益不变<ul>
<li>长期平均总成本随产量增加的几种变化情况</li>
<li>规模经济通常来自<strong>专业化和分工</strong>，规模不经济通常来自<strong>沟通成本和协调问题</strong></li>
</ul>
</li>
<li><strong>愈精细的分工（专业化）愈容易带来规模经济</strong></li>
</ul>
<h3 id="竞争市场上的企业"><a href="#竞争市场上的企业" class="headerlink" title="竞争市场上的企业"></a>竞争市场上的企业</h3><h4 id="竞争市场"><a href="#竞争市场" class="headerlink" title="竞争市场"></a>竞争市场</h4><ul>
<li>竞争市场<ul>
<li>市场上有众多买家、卖家</li>
<li>交易的物品大体相同</li>
<li><strong>企业可以自由进入或退出市场</strong></li>
</ul>
</li>
<li>平均收益：物品的价格</li>
<li>边际收益：<strong>对竞争企业来说</strong>，边际收益等于物品价格</li>
</ul>
<h4 id="利润最大化"><a href="#利润最大化" class="headerlink" title="利润最大化"></a>利润最大化</h4><ul>
<li>通过比较边际收益和边际成本，可以找到利润最大化的产量，因此对于竞争企业来说，利润最大化的产量点即价格和边际成本曲线的交点<ul>
<li>边际成本小于边际收益时，增加产量</li>
<li>边际成本大于边际收益时，减少产量</li>
<li>两者相等时，利润最大化</li>
</ul>
</li>
<li><strong>实际上，企业的边际曲线决定了企业在任何价格时愿意供给的物品数量，即供给曲线</strong></li>
</ul>
<h4 id="短期-x2F-长期决策"><a href="#短期-x2F-长期决策" class="headerlink" title="短期&#x2F;长期决策"></a>短期&#x2F;长期决策</h4><ul>
<li>短期供给曲线：价格（平均收益）小于平均可变成本（AVC）时，企业<strong>停止营业</strong>，大于AVC时，产量沿着MC曲线移动</li>
<li><strong>沉没成本的无关性</strong>：<strong>短期内</strong>，供给曲线和固定成本没有关系<ul>
<li>应用：弄丢了电影票不影响再买一张的决定、淡季的餐馆和高尔夫球场的决策</li>
</ul>
</li>
<li>长期供给曲线：价格（平均收益）小于平均总成本（ATC）时，企业<strong>退出市场</strong>，进入的标准刚好相反</li>
<li>利润的图形表示</li>
</ul>
<h4 id="竞争市场的供给曲线"><a href="#竞争市场的供给曲线" class="headerlink" title="竞争市场的供给曲线"></a>竞争市场的供给曲线</h4><p>上面讨论的单个企业的短期、长期供给决策，下面看下市场上短期和长期的供给曲线</p>
<ul>
<li>短期：企业数目固定，供给曲线等于边际成本曲线的叠加</li>
<li>长期：企业可以自由离开和加入，达到均衡时，留在市场中的企业利润必定为0。此时，<strong>价格&#x3D;ATC</strong>，而对企业而言，会选择让<strong>价格&#x3D;MC</strong>保证利润最大化，所以最终使<strong>ATC&#x3D;MC</strong>，让市场中每个企业都达到<strong>有效规模</strong>，供给曲线等于固定价格，<strong>完全富有弹性</strong>。</li>
<li>由于这里的成本是<strong>机会成本</strong>，实际上<strong>会计成本</strong>是大于0的，所以企业还会留在市场中</li>
<li>短期、长期内的需求移动<ul>
<li>短期内带来企业的盈利、亏损</li>
<li>长期内随着企业离开和进入市场，价格回到长期均衡</li>
</ul>
</li>
<li>长期供给曲线可能会向右上方倾斜<ul>
<li>生产资源数量有限</li>
<li>鼓励新企业加入，就需要提高价格 -&gt; 甚至能有企业长期盈利</li>
</ul>
</li>
</ul>
<h3 id="垄断"><a href="#垄断" class="headerlink" title="垄断"></a>垄断</h3><ul>
<li>垄断企业是<strong>价格决定者</strong></li>
<li>垄断企业的<strong>进入壁垒</strong><ul>
<li>垄断资源</li>
<li>政府管制：版权和专利</li>
<li>生产流程：规模经济产生的自然垄断，一个企业能够以低于其他企业的成本供应产品</li>
</ul>
</li>
<li>为保证能卖出产品，垄断企业的需求曲线斜向右下方<ul>
<li><strong>垄断者的边际收益总小于物品价格</strong></li>
</ul>
</li>
<li>在垄断企业利润最大化时，P &gt; MR &#x3D; MC<ul>
<li>先找到MC &#x3D; MR的生产数量点，再对应需求曲线找到合适定价的价格</li>
<li>在市场竞争者增多时，价格会逐渐回落到等于边际成本</li>
</ul>
</li>
</ul>
<h4 id="垄断的福利代价"><a href="#垄断的福利代价" class="headerlink" title="垄断的福利代价"></a>垄断的福利代价</h4><ul>
<li>无谓损失：垄断者生产的产量总小于社会有效率的产量<ul>
<li>类似于收税：这里私人企业得到的“税收”正是<strong>垄断利润</strong></li>
<li>对应到现实生活，无谓损失即无效率的低产量</li>
</ul>
</li>
</ul>
<h4 id="价格歧视"><a href="#价格歧视" class="headerlink" title="价格歧视"></a>价格歧视</h4><p>根据消费者对商品的评价差异化确定价格。</p>
<ul>
<li><strong>竞争市场中，不会出现物品的价格歧视</strong></li>
<li>价格歧视可以实现垄断者的利润最大化</li>
<li>价格歧视要求能够根据支付意愿划分顾客</li>
<li>价格歧视可以增进社会福利，不过是生产者的剩余</li>
<li>价格歧视增加了垄断利润，<strong>完全价格歧视可以让生产者获取市场的全部剩余，避免无谓损失</strong>，然而实际中通常做不到<ul>
<li>举例：电影票、飞机票、折扣券、数量折扣</li>
</ul>
</li>
</ul>
<h4 id="针对垄断的公共政策"><a href="#针对垄断的公共政策" class="headerlink" title="针对垄断的公共政策"></a>针对垄断的公共政策</h4><ul>
<li><strong>增加市场竞争性</strong>：反托拉斯法</li>
<li><strong>管制</strong>：直接限制垄断企业的定价</li>
<li><strong>公有制</strong>：政府自己经营 -&gt; 带来市场效率下降</li>
<li><strong>不作为</strong></li>
</ul>
<h3 id="垄断竞争"><a href="#垄断竞争" class="headerlink" title="垄断竞争"></a>垄断竞争</h3><p>既有竞争性又有垄断性的市场，比如小说。</p>
<ul>
<li>寡头，集中率衡量</li>
<li>垄断竞争：<strong>许多卖者</strong>，<strong>产品有差别</strong>，<strong>自由进出</strong></li>
<li>市场组织的分类<ul>
<li>垄断</li>
<li>寡头</li>
<li>垄断竞争</li>
<li>完全竞争</li>
</ul>
</li>
</ul>
<h4 id="差别产品竞争"><a href="#差别产品竞争" class="headerlink" title="差别产品竞争"></a>差别产品竞争</h4><ul>
<li><strong>短期中</strong>，垄断竞争的分析方式和垄断一样</li>
<li><strong>长期中</strong>，企业可以自由进出，并最终达到利润为0的情况，即MR&#x3D;MC，P&#x3D;ATC。价格曲线和平均总成本曲线相切</li>
<li>一些结论，均衡点在ATC变小的部分，此时MC &lt; ATC<ul>
<li>在长期均衡下，对比完全竞争，产量是小于有效规模的，即<strong>有过剩生产能力</strong></li>
<li><strong>高于边际成本的价格加成</strong>，因此此时，每新增一个客户，都会使生产者利润增加，生产者有激励去吸引更多顾客</li>
</ul>
</li>
<li>因为P &gt; ATC，垄断竞争也会带来无谓损失</li>
</ul>
<h4 id="广告"><a href="#广告" class="headerlink" title="广告"></a>广告</h4><ul>
<li>由于垄断企业出售价格大于边际成本，因此都有激励做广告来吸引买者买自己的特定产品<ul>
<li>产品间差异越大的行业，收益中用于广告的成本越大</li>
<li>总体来说，广告促进了竞争</li>
</ul>
</li>
<li>广告本身的质量与否影响着人们对产品质量的评价</li>
</ul>
<h3 id="寡头"><a href="#寡头" class="headerlink" title="寡头"></a>寡头</h3><ul>
<li>勾结、卡特尔：禁止卡特尔内协商生产数目或价格是困难的</li>
<li><strong>纳什均衡</strong>的达成<ul>
<li>寡头价格低于垄断价格，但高于竞争价格</li>
<li>随着企业的增多，市场会越来越接近竞争市场</li>
</ul>
</li>
<li>寡头和囚徒困境：<strong>维持合作是困难的</strong><ul>
<li>军备竞赛</li>
<li>公共资源</li>
<li>寡头的囚徒困境对社会是有益的</li>
</ul>
</li>
<li>多次合作能让合作者更关注长远利益、而避免囚徒困境</li>
<li>贸易限制、托拉斯法</li>
<li>一些看似的反竞争操作，可能有合理的经营目的<ul>
<li>转售价格维持</li>
<li>掠夺性定价</li>
<li>搭售</li>
</ul>
</li>
</ul>
<h2 id="劳动市场经济学"><a href="#劳动市场经济学" class="headerlink" title="劳动市场经济学"></a>劳动市场经济学</h2><h3 id="生产要素市场"><a href="#生产要素市场" class="headerlink" title="生产要素市场"></a>生产要素市场</h3><p>生产要素需求是<strong>派生需求</strong>，是通过<strong>向另外的市场供给物品所产生的需求</strong></p>
<h4 id="劳动的需求和供给"><a href="#劳动的需求和供给" class="headerlink" title="劳动的需求和供给"></a>劳动的需求和供给</h4><ul>
<li>分析前提：<strong>企业具有竞争性、企业追求利润最大化</strong></li>
<li>边际产量值：一种投入的边际产量乘以产品价格</li>
<li>边际产量、边际产量递减 &#x3D;&gt; <strong>向右下方倾斜的边际产量值曲线</strong></li>
<li>竞争性、追求利润最大化的企业雇佣的工人数会达到使<strong>劳动边际产量等于工资</strong>的那一点，即<strong>边际产量值曲线也是劳动需求曲线</strong></li>
<li>工作和闲暇的权衡</li>
</ul>
<h4 id="劳动的均衡"><a href="#劳动的均衡" class="headerlink" title="劳动的均衡"></a>劳动的均衡</h4><p>这里的均衡建立在<strong>竞争市场</strong>的基础上，即工资对买卖双方来说是既定的。买方垄断的情况较少出现。</p>
<ul>
<li>均衡时，<strong>工资等于劳动的边际产量值</strong></li>
<li>供给、需求的移动</li>
</ul>
<h4 id="其他生产要素"><a href="#其他生产要素" class="headerlink" title="其他生产要素"></a>其他生产要素</h4><ul>
<li><strong>劳动、土地和资本</strong></li>
<li><strong>租赁价格</strong>和<strong>购买价格</strong><ul>
<li>对于租赁价格，劳动、土地、资本各自赚到了他们在生产过程中的边际贡献的价值</li>
<li>对比劳动收入、资本收入是通过多种方式支付给家庭的，如股利等</li>
</ul>
</li>
<li>生产要素间相互联系</li>
</ul>
<p>工人的工资反映了他们所所生产的物品&#x2F;服务的市场价格。这也解释了为何程序员的工资比加油站服务员高，IT服务业者的收入比便利店收银员高。</p>
<h3 id="收入和歧视"><a href="#收入和歧视" class="headerlink" title="收入和歧视"></a>收入和歧视</h3><p>产生收入差距的原因</p>
<ul>
<li>补偿性工资差别</li>
<li>人力资本：对人的投资的积累。<ul>
<li>受教育程度高的工人往往有着较高的边际生产率</li>
<li>工作效率、工具的提升，和非熟练劳动需求的转移拉开的熟练、非熟练工资的差距</li>
<li>高等教育也是一种投资</li>
</ul>
</li>
<li>教育作为一种信号</li>
<li>能力、努力和机遇</li>
<li>超级明星<ul>
<li><strong>市场上每个人都想享受最优生产者提供的物品</strong></li>
<li><strong>生产物品的技术使最优生产者低成本提供物品成为可能</strong></li>
</ul>
</li>
<li>最低工资法、工会、效率工资</li>
</ul>
<h4 id="歧视经济学"><a href="#歧视经济学" class="headerlink" title="歧视经济学"></a>歧视经济学</h4><ul>
<li>劳动市场上的歧视并不能直观地分析</li>
<li>竞争市场会对雇主的歧视做“自然的矫正”，<strong>那些只对赚钱有兴趣的企业占据优势地位</strong><ul>
<li>这种歧视只有在<strong>顾客偏好</strong>和<strong>政府政策</strong>存在时，才能维持下去</li>
</ul>
</li>
</ul>
<h3 id="收入不平等和贫困"><a href="#收入不平等和贫困" class="headerlink" title="收入不平等和贫困"></a>收入不平等和贫困</h3><ul>
<li>贫困率、贫困线<ul>
<li>影响衡量不平等的因素：<strong>实物转移支付、生命周期、暂时收入和持久收入</strong></li>
<li>实质生活水平上的不平等比年收入的不平等要小得多</li>
</ul>
</li>
<li>收入再分配的政治哲学<ul>
<li>功利主义：社会效用最大化</li>
<li>自由主义：政策需要客观公正，即由对社会现状一无所知的社会参与者得出<ul>
<li>最大最小准则：主张应该使社会上状况最差的人福利最大化</li>
</ul>
</li>
<li>自由至上主义：预先设定规则，惩罚违规者，强调过程而非结果，不进行收入再分配</li>
</ul>
</li>
<li>减少不平等的政策<ul>
<li>最低工资</li>
<li>福利</li>
<li>负所得税、劳动所得税减免</li>
<li>实物转移支付</li>
<li>反贫困计划、工作激励</li>
</ul>
</li>
</ul>
<h2 id="深入探讨的论题"><a href="#深入探讨的论题" class="headerlink" title="深入探讨的论题"></a>深入探讨的论题</h2><h3 id="消费者选择理论"><a href="#消费者选择理论" class="headerlink" title="消费者选择理论"></a>消费者选择理论</h3><ul>
<li>预算约束曲线：在既定收入下，消费某种物品引起另一种物品消费量的变化</li>
<li>消费者偏好：<strong>无差异曲线、边际替代率</strong></li>
<li>无差异曲线的4个特征<ul>
<li>较高的无差异曲线给消费者的满足感更高</li>
<li>无差异曲线向右下方倾斜</li>
<li>无差异曲线不相交</li>
<li>无差异曲线凸向原点</li>
</ul>
</li>
<li>完全替代品和完全互补品<ul>
<li>完全替代品：边际替代率为定值，一条直线</li>
<li>完全互补品：无差异曲线为直角</li>
</ul>
</li>
</ul>
<h4 id="消费者选择什么"><a href="#消费者选择什么" class="headerlink" title="消费者选择什么"></a>消费者选择什么</h4><ul>
<li>消费者选择什么：最优点<ul>
<li>最优点处，消费者选择的两种物品组合要使<strong>边际替代率</strong>等于<strong>相对价格</strong></li>
<li>相对价格和边际交换率分别代表市场和消费者对两种物品的评价</li>
<li>用<strong>效用</strong>来描述最优点的平衡状态：对X物品支出的每美元的边际效用等于用于Y物品支出的每美元的边际效用</li>
</ul>
</li>
<li>收入变动对选择的影响<ul>
<li>正常物品和低档物品</li>
</ul>
</li>
<li>价格变动对选择的影响<ul>
<li>预算约束线的外扩</li>
<li>收入效应：向更高无差异曲线移动引起的消费变动</li>
<li>替代效应：沿着无差异曲线变动到不同标记替代率的点的消费变动</li>
</ul>
</li>
<li>收入效应、替代效应的应用<ul>
<li>吉芬物品：价格上升引起需求增加，和物品的低档程度有关</li>
<li>工资如何影响劳动供给：取决于劳动者如何衡量收入效应和替代效应</li>
</ul>
</li>
</ul>
<h3 id="微观经济学前沿"><a href="#微观经济学前沿" class="headerlink" title="微观经济学前沿"></a>微观经济学前沿</h3><h4 id="不对称信息"><a href="#不对称信息" class="headerlink" title="不对称信息"></a>不对称信息</h4><ul>
<li>隐蔽性行为和道德风险：代理人和委托人<ul>
<li>公司管理中，股东、董事会和管理层就分属委托人和代理人，道德风险即管理层可以做出违背股东利益的公司决策</li>
</ul>
</li>
<li>隐蔽性特征：逆向选择<ul>
<li>卖者了解得更多，买者承担风险</li>
<li>有信息一方披露信息：<strong>发信号</strong></li>
<li>无信息一方迫使有信息一方披露信息：<strong>筛选</strong></li>
</ul>
</li>
</ul>
<h4 id="政府经济学"><a href="#政府经济学" class="headerlink" title="政府经济学"></a>政府经济学</h4><p>用经济学的方法分析政府</p>
<ul>
<li><strong>康多塞悖论</strong>：（多于两种选择时）多数原则没有产生可传递的社会偏好<ul>
<li>投票顺序会影响结果</li>
<li>多数投票本身可能并不能告诉我们社会想要什么结果</li>
</ul>
</li>
<li><strong>阿罗不可能定理</strong>：没有一种投票制度可以满足下列所有条件<ul>
<li>确定性</li>
<li>传递性</li>
<li>不相关选择的独立性：任何两个结果之间的排序不取决于别的结果</li>
<li>没有独裁者</li>
</ul>
</li>
<li>阿罗不可能定理意味着<strong>无法把社会成员的个人偏好加总成社会偏好</strong></li>
<li><strong>中值选民定理</strong>：多数原则将产生中值选民最偏好的结果<ul>
<li><a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E4%B8%AD%E9%97%B4%E9%80%89%E6%B0%91%E5%AE%9A%E7%90%86/10025349#3">前提</a></li>
<li>应用：大选时，两党都会尽量争取中值选民的支持，因此政治主张也会趋同</li>
</ul>
</li>
</ul>
<h4 id="行为经济学"><a href="#行为经济学" class="headerlink" title="行为经济学"></a>行为经济学</h4><p>社会心理学和经济学的融合</p>
<ul>
<li>人不总是理性：左位偏差</li>
<li>人想要公平</li>
<li>人是善变的</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://shenlvmeng.github.com/blog/2019/03/12/wisdom-of-life-pessimistic-life/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.jpg">
      <meta itemprop="name" content="shenlvmeng">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shenlvmeng's Blog">
      <meta itemprop="description" content="Be sharp, my friend.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Shenlvmeng's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/blog/2019/03/12/wisdom-of-life-pessimistic-life/" class="post-title-link" itemprop="url">《人生的智慧》 ——幸福与人生</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-03-12 00:14:51" itemprop="dateCreated datePublished" datetime="2019-03-12T00:14:51+08:00">2019-03-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2019-03-16 01:23:07" itemprop="dateModified" datetime="2019-03-16T01:23:07+08:00">2019-03-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog/categories/%E6%80%9D%E8%80%83/" itemprop="url" rel="index"><span itemprop="name">思考</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/blog/2019/03/12/wisdom-of-life-pessimistic-life/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/03/12/wisdom-of-life-pessimistic-life/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>9.2k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>15 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote>
<p>“在读完叔本华的书第一页以后，就知道得很清楚，我要把他写的所有东西都读完为止；他说的每一个字词我都要听” —— 尼采</p>
</blockquote>
<p>尽管是出自腰封上的促销的话，尼采的推介语比“当代名家们”写的“此书甚好读世之绝有”格调就要高很多了。《人生的智慧》一书取自于叔本华晚年最后一部巨著《附录和补遗》的一部分，包含了他对《作为意欲和表象的世界》其中哲学观点的补充，以及回首一生的一些更广泛的思考。对比哲学形而上学的深奥探讨，这本书讨论的事情与世俗生活甚是接近，叔本华在书中放弃了居高临下的审视态度，用他擅长的冷峻客观的笔法努力将讨论变得清晰简明。</p>
<blockquote>
<p>“看到我最后的小孩的诞生，我是多么的高兴。随着这一部著作的完成，我在这个世界上的使命也就终于完成了。我的却感到了如释重负，这一重负在24年来，一直沉重地压在我的双肩。 —— 叔本华”</p>
</blockquote>
<p>《人生的智慧》书中延续了叔本华形而上学和悲观主义哲学。叔本华认为：</p>
<ul>
<li>意志可以脱离客观实在而存在，甚至能超越人的理性</li>
<li>同时他将极端悲观主义与之联系，认为人意志的存在是一切痛苦的根源</li>
<li>世界为意志表象，而人生只是表象的一种状态；从而生活在表象的世界中，一切都是虚幻泡影，现实的生活没有任何意义</li>
</ul>
<p>在这本书中字里行间都渗透着他上面的认识，幸运的是，书写的角度足够世俗，逐一探讨关于人性、人格、地位、荣耀、名声等长久困惑人们的问题，认为<strong>有智慧的人应该以超然而明智的态度对待世务</strong>。通篇在论述道理时，并不像苦口婆心的教导或谆谆教诲的指引。你能感受到他只是静静地表达自己的思想，不把它强加给你；但当你合上书后，那些思想结晶却已让你心悦诚服地接受。</p>
<p>全书分为下面几节展开。</p>
<h2 id="基本的划分"><a href="#基本的划分" class="headerlink" title="基本的划分"></a>基本的划分</h2><p>除开外在的财与名外，内在的健壮充实、精神世界的高追求和高禀赋更有助于找到幸福。</p>
<ul>
<li>人的命运决定于<strong>人的自身</strong>，<strong>人拥有的身外之物</strong>，<strong>人向其他人展示的样子</strong>；这也是后面论述的划分</li>
<li>人的内心快乐异或痛苦首先都是人的感觉、意愿、思想的结果，人身外的所有事物都只是间接地发挥作用</li>
<li>一个人精神能力的界限决定性地限定了他领略高级快乐的能力</li>
<li>人的自身是具有<strong>绝对价值</strong>且<strong>他人无法得到的</strong>，这和后两点完全不同。<strong>人的自身对人的幸福而言比人所拥有的财富重要得多。</strong></li>
<li>我们不应该把这一说法错误地理解为：我们应该忽略赚取那些必须和适合的东西，但真正的财富，亦即过分的丰裕盈余，对我们幸福帮助不大</li>
<li>人拥有的财产、物品和人的名誉、声望是互为影响、促进的关系</li>
</ul>
<h2 id="人的自身"><a href="#人的自身" class="headerlink" title="人的自身"></a>人的自身</h2><blockquote>
<p>无论身在何处，我们只能在我们自身寻找或者获得幸福 ——《旅行者》</p>
</blockquote>
<p>每个人都必须成为和做最好的自己，一个人越能做到这一点，在身上就越能够找到乐趣和幸福的源泉。精神需求（即陶冶自己）有助于摆脱无聊、摆脱庸俗，追求真正的幸福。</p>
<ul>
<li>对人的幸福起着首要和关键作用的是主体的好处，即健康的身体和心灵。</li>
<li>让我们幸福或者不幸福的事情不是那些客观、真实的事物本身，而是我们对这些事物的理解和把握</li>
<li><strong>人类幸福的两个死敌就是痛苦和无聊。还有我们成功远离其中一个的时候，也就在同等程度接近了另一个</strong>。外在原因是生活的艰辛和匮乏造成了痛苦，而相反丰裕和安定就会产生无聊；内在原因是<strong>一个人对痛苦的感受能力与对无聊的感受能力成反比</strong>。精神迟钝就不易感到痛苦的忧伤，后果就是内在空虚，外在体现一刻不停地关注外在世界的各种事情；精神敏锐的人思想活跃，奔涌不息，很少感到无聊，但相反更易提高了对精神痛苦的敏感性。</li>
<li>正是由于内在空虚，人们才追求社交、娱乐和五花八门的奢侈</li>
<li><strong>一个人自身拥有越丰富，对身外之物的需求就越少，别人对他来说就越不重要</strong></li>
</ul>
<blockquote>
<p>愚蠢的人饱受无聊之苦 —— 塞内加<br>愚人的生活比死亡还要糟糕 —— 耶稣·西拉克</p>
</blockquote>
<ul>
<li>思想狭隘的人更容易受到无聊侵袭，他们会为意欲找到一些琐碎、微小和暂时的动因，以图刺激意欲并以此刺激智力活动起来。因为没有动因时意欲就休息了，智力也就放假了。对于这种人，<strong>闲暇</strong>只会造就无用的家伙。</li>
<li>为了争取外在之物而失去了内在的东西，比如为了荣耀、地位、排场、头衔、名声牺牲自己全部或大部分的宁静、闲暇和独立——这是极度愚蠢的行为</li>
<li>人的快乐分三种：<strong>机体新陈代谢能力带来的快乐</strong>，如吃喝；<strong>发挥肌肉力量带来的快乐</strong>，如狩猎；<strong>施展感觉能力方面的快乐</strong>，如思考观察。感受能力约卓越，我们享受的精神快乐就越大。</li>
<li>精神生活是“天才”的唯一目标，生活知识他们实现自己目标的一种手段。这类人即使有最良好的性格脾气，也不会对朋友、家庭、集体表现出其他人都有的休戚与共。因为他们自给自足，只有拥有自身内在，失去了其他一切也能得到安慰。</li>
<li><strong>一个内在丰富的人需要闲暇去培养和发展自己的精神才能，享受自己的内在财富。</strong>闲暇即自我。</li>
<li>闲暇是反命运的。因为人的天然使命就是花费时间去获得自己和家人赖以生存的东西，而不是自由发挥自己的智力。因此需要闲暇是一个人的幸运。因为这体现了他不同常人的禀赋。</li>
</ul>
<h2 id="人所拥有的财产"><a href="#人所拥有的财产" class="headerlink" title="人所拥有的财产"></a>人所拥有的财产</h2><p>财富应该是手段而不是目的。</p>
<ul>
<li>一个人拥有财产的方面是否得到满足由他期待得到的财产和他已经拥有的财产之间的关系所决定</li>
<li>我们感到不满足的根源，在于我们不断推高我们的期望。</li>
<li>我们应把现有的财富视为抵御众多可能发生的不行和灾祸的城墙</li>
<li>（赚钱）这苦役本是凡夫俗子的天然命运。只有得到命运如此垂青和眷顾的人，才可能是真正自由的人，是“自己的主人”。</li>
</ul>
<h2 id="人所展现的表象"><a href="#人所展现的表象" class="headerlink" title="人所展现的表象"></a>人所展现的表象</h2><p>正视、珍视自我认知，不要狂热地活在他人的看法里。珍惜自己的个性，尤其是较好的一面。</p>
<ul>
<li>他人的看法就其本身而言，对我们的幸福并非至关重要。（我们会受到他人看法的影响）从我们的角度出发，应该抑制这一人性的弱点，尽量降低我们对待别人意见的敏感程度。</li>
<li>每个人首要并确实是活在自己的皮囊里，而不是活在他人的见解中。据此，<strong>正确评估自己本身的价值和看待他人对自己的看法，对我们的幸福大有裨益</strong>。把别人的意见和看法看得太过重要是人们普遍犯下的错误</li>
<li>虚荣使人健谈，骄傲使人沉默</li>
<li>如果我们善意地忽略自己的优点，他人就会真心、坦率地把我们认定为就是这个样子</li>
<li>个性远远优于民族性</li>
</ul>
<blockquote>
<p>你必须强迫自己接受应有的骄傲 —— 贺拉斯</p>
</blockquote>
<p><em>（注：即对自己应有的心安理得）</em></p>
<h3 id="地位"><a href="#地位" class="headerlink" title="地位"></a>地位</h3><p>地位对于增进幸福的目的而言，没有什么意义。然而大众缺乏判断力，记忆力也不强，这也是地位意义不大的原因。</p>
<h3 id="名誉"><a href="#名誉" class="headerlink" title="名誉"></a>名誉</h3><p><strong>名誉在客观上是他人对我们的价值的看法，主观上则是我们对于他人看法的顾忌</strong>。每一个人为了维持名誉，需要完成在他所占据的独特位置上，人们要求他和期望他做好的事情。而他通常也会重视别人的这些看法，即“名誉感”或“羞耻感”。</p>
<h4 id="公民名誉"><a href="#公民名誉" class="headerlink" title="公民名誉"></a>公民名誉</h4><ul>
<li>之所以有名誉，归根到底是因为人们确信一个人的性格是不会改变的</li>
<li>公民名誉即道德</li>
<li>名誉只是标明这个人不是一个例外，声望却标明这个人是一个例外。因此，声望是要争取的，而名誉只需保有就行了。</li>
<li>名誉的价值是间接的</li>
</ul>
<h4 id="公职名誉"><a href="#公职名誉" class="headerlink" title="公职名誉"></a>公职名誉</h4><ul>
<li>公职名誉要求担任公职的人，除了保有公民名誉，还要对其职位保持尊敬</li>
<li>自愿为国家服务的人亦都享有公职荣誉</li>
</ul>
<h4 id="性别名誉"><a href="#性别名誉" class="headerlink" title="性别名誉"></a>性别名誉</h4><p><em>（注：这一部分论述的是传统社会中的性别名誉）</em></p>
<ul>
<li>女性名誉远比男性名誉重要，因为女性与异性之间的关系在女性生活中是头等大事</li>
<li>女性从男性哪里要求和期待一切东西，而男性从女性哪里首要和直接地只要求得到一样东西——女性本身。可以说，女性名誉的价值只是一种习俗的常规意义上的价值</li>
</ul>
<h4 id="骑士名誉"><a href="#骑士名誉" class="headerlink" title="骑士名誉"></a>骑士名誉</h4><p>这类名誉在西方历史中较为典型。</p>
<ul>
<li>骑士名誉跟一个人自身价值或道德本性没有关系，只和他人对我们的看法和行为有关。只要因为他人的污言秽语或行动冒犯丧失了骑士名誉，我们能做的只有诉诸身体和暴力，通过决斗的方式恢复名誉。</li>
<li>骑士名誉是自大和愚蠢的象征。看似匪夷所思，实际也在我们生活中时常出现。一个真正珍视自己价值的人，面对空穴来风的侮辱、诋毁会淡然处之，但如果做不到这一点，那精明和修养会帮他掩藏起怒气</li>
<li>我们应该避免对一些身体冲撞做过度解读，这会带来真正的祸害</li>
</ul>
<h4 id="民族荣誉"><a href="#民族荣誉" class="headerlink" title="民族荣誉"></a>民族荣誉</h4><p>民族荣誉上，武力是唯一的裁决者。相比可信任来说，令人生畏是民族荣誉和国家荣誉更需要的。</p>
<h3 id="名声"><a href="#名声" class="headerlink" title="名声"></a>名声</h3><blockquote>
<p>石头扔进泥淖，是不会弄出涟漪的 —— 谚语</p>
</blockquote>
<ul>
<li>名誉包含人们在同等处境下必须具备的素质；而名声涉及的素质是我们不可能要求人们一定具备的。这可以是行为业绩或思想作品。行为业绩一方面有赖机遇，另一方面总是跟随动因，所以往往不能持久。而思想作品通常开始声音微弱，而后历久弥新逐渐响亮起来。</li>
<li>名声维持的越久，到来得就越迟。人类精神思想最高级的产物一般都不会受大众欢迎，根本原因就是每一个人只能真正理解和欣赏自己同类</li>
<li>名誉是作为信用预先支付的，而名声只能是顶住嫉妒，经过争取得来的。要创作优秀的作品，避免低劣的作品，创作者就必须地址和鄙视大众和其代言人的批判。从而<strong>名声总是逃离追逐它的人，却会尾随对它毫不在意的人</strong>。</li>
<li><strong>有价值和让人幸福的不是名声，而是借以获得名声的东西</strong>，或更准确的说，让人得到幸福的是产生这些优点和贡献的思想与能力。</li>
<li>大众的头脑是可怜、凄凉的舞台，这里不可能有真正的幸福。既然人们一般都缺乏独立判断，尤其缺乏欣赏高级别和高难度成就的能力，所以，人们总是听从他人的权威</li>
</ul>
<h2 id="建议和格言"><a href="#建议和格言" class="headerlink" title="建议和格言"></a>建议和格言</h2><p>聊了上面一些原则性的话题，下面谈一些建议。</p>
<h3 id="泛论"><a href="#泛论" class="headerlink" title="泛论"></a>泛论</h3><blockquote>
<p>理性的人寻求的不是快乐，而只是没有痛苦</p>
</blockquote>
<p><em>（注：叔本华的悲观主义认知）</em></p>
<ul>
<li>缺少痛苦的程度是衡量一个人生活幸福的标准。而没有痛苦的状态是真正的最大的幸福。</li>
<li>正是奋力争取幸福快乐、荣耀排场带来了巨大的不幸</li>
</ul>
<blockquote>
<p>我们所说的社交、聚会、沙龙，是悲惨的一出戏，一台糟糕的话剧，乏味、无趣，依靠机械、服饰和包装暂时地撑持。 ——《格言和随想》</p>
</blockquote>
<ul>
<li>一般来说，人们常做的一大蠢事就是过分地为生活未雨绸缪</li>
</ul>
<h3 id="对待自己"><a href="#对待自己" class="headerlink" title="对待自己"></a>对待自己</h3><p>对自己负责，自给自足。冷静、理性地使用自己的思想能力。</p>
<ul>
<li>对自己生命计划有一个大概的了解，能够比任何一切都更有效地增强自己的勇气</li>
<li><strong>人生智慧的重要一点是在关注现在和计划将来两者之间达成恰到好处的平衡</strong>。我们的存在唯独就在这一时间。</li>
<li>只有人挣脱了所有各种可能的期望和要求<em>（注：这当然不现实）</em>，返回赤裸和冰冷的存在本身，人才领会精神上的安宁，而精神上的安宁却是幸福的构成基础</li>
<li>思想活动要和实际活动相结合<em>（注：学而不思则罔，思而不学则殆）</em></li>
<li>要<strong>勤于反省</strong>，不要随波逐流</li>
<li><strong>谁要是不热爱独处，他也就不热爱自由</strong>。社交聚会要求人们做出牺牲，而一个人越具备独特的个性，他就越难做出这样的牺牲。社交聚会一旦人多势众，平庸就会占据上风。有深度的交谈和充满思想的想法，只能属于有思想丰富的人所组成的聚会。而在泛泛的社交聚会上，人们对有思想见识的谈话绝对深恶痛绝，所以在这种社交场合要取悦他人。</li>
</ul>
<blockquote>
<p>一个完全依靠自己，一切称得上属于他的东西都存在于他的自身的人是不可能不幸福的 —— 西塞罗</p>
</blockquote>
<ul>
<li><strong>只有那些依靠自己，总的来说能够成为自己的人才是处境最妙的</strong>。促使人们热衷与人交往的原因，就是人们无法忍受孤独或无法在孤独中忍受自己。而人们单调的个性使他们无法忍受自己，人的群居生活可被视为人与人相互间的精神取暖。</li>
<li>一个人的高贵本性首先反映在这个人无法从他人的交往中得到乐趣<em>（注：持保留意见）</em>。虽然生活在众人之中，但他不可以成为众人的一份子，而是要与众人更多地保持某种纯粹客观的联系<em>（注：从某种角度讲，就是缺乏人情味。我认为在叔本华所推介的精神高尚境界以及世俗感情间找到一个平衡点才是最适宜的）</em>。</li>
<li>嫉妒对人来说是自然的，但嫉妒既是一种罪恶又是一种不行。<em>（注：叔本人也没有给出有效地克服这种感情的办法）</em></li>
<li>不要老是紧张兮兮不断回头重新考虑已经付诸实行的事情和担忧可能遭遇到的危险，应该给思考贴上封条，确信已经考虑到了一切，并以此得到安慰</li>
<li>遭遇不幸时，要能积极主动地面对生活，把握住自己的情绪，改变能改变的</li>
<li><strong>任何关乎我们痛苦和快乐的事情都应该以理性和判断力去观察和考虑</strong>，对其不掺杂个人情绪的思考。与此同时，<strong>千万不要让想象力介入思考</strong>，因为想象力无法对事情做出判断，智慧毫无益处地扰乱我们的情绪。</li>
<li>在夜晚，我们的理解力和判断力就变得疲倦和呆滞，已无法深入事情的本质。因此<strong>夜晚并不适宜思考严肃的，尤其令人不悦的事情</strong>。早上适合人们从事工作和创造，不管是精神上还是体力上的。因为早晨是一天的青年期，一切都是明亮、新鲜和轻松的。</li>
<li>只在恰当的时间里操心、享受、忍耐一样事情，其他的则完全不要想<em>（注：想清楚自己为何烦忧，逐个击破，不要带着包袱前进）</em></li>
</ul>
<blockquote>
<p>生命在于运动 —— 亚里士多德</p>
</blockquote>
<ul>
<li>我们的生存从本质上就是不停歇、不安的。<strong>去操劳、去克服困难是人的一种需要。持久的享受和完全的满足所带来的停滞和静态，会让人无法忍受</strong>。克服障碍是人的本能，没有机会时，人们也会依照自己的个性去制造这样的机会</li>
<li>肌肉会疲劳，精神操劳得厉害也会变衰弱。我们不应强制性地、持续不停顿和在不适宜的时间用脑，<strong>我们一定要给予大脑必需的、充足的睡眠，借此修养、恢复</strong>。睡眠是我们提前借取的一小段死亡，以此获得和更新被白天所耗尽了的生命。</li>
</ul>
<h3 id="看待他人"><a href="#看待他人" class="headerlink" title="看待他人"></a>看待他人</h3><p>他人是固执的，不要抱太高的期望。要谨慎机灵，避免受伤。</p>
<ul>
<li>为了在人群中生存，我们必须容许和承认别人以既定的个性存在。<strong>我们关心的只是如何以一个人的本性和特质所允许的方式利用这个人，既不应该希望改变也不可以干脆谴责这个人的本性</strong></li>
<li>人与人在精神、气质上的同声相应或大相径庭，会轻易和很快在人们的交谈中显现出来。同类的两个人很容易就谈论的一切达成某种程度的和谐一致。</li>
<li>记忆中人会被理念化，这个美化工作需要很长时间才能完成。要想得到这个好处，方法之一就是尽量不要与人见面</li>
<li>和别人说话时，会自然地把自己降到他人的水平。因此<strong>和庸俗的人交谈时，自己不同时变得庸俗简直就是不可能的事情</strong>。</li>
</ul>
<blockquote>
<p>很难在高度尊敬一个人的同时，有非常喜爱他 —— 拉罗什富科<br>取悦我们所必需的思想深度刚好就是我们自己的思想深度 —— 《论精神》 第2篇，第10章</p>
</blockquote>
<ul>
<li><strong>我们只能选择得到别人的尊敬，或是他们的喜爱。</strong>别人对我们的喜爱总是出于私心，且并不总是值得我们自豪的。别人对我们的尊敬，情况相反，因为这是我们强行从别人哪里、违背他们意愿获得的。别人通常都把这尊敬掩藏起来。尊敬和我们的价值紧密相关，而喜爱则不是，因为<strong>喜爱是主观的，尊敬是客观的</strong></li>
<li>大部分人都是如此主观，根本上除了他们自己外不会对别的感兴趣，结果就是别人说什么话马上就能让他们联想到自己。在这些人身上，意欲远远压倒了认识力，他们微弱的智力完全服务于意欲们甚至片刻也摆脱不了意欲的控制。<strong>占星术是一个极好的证明，由于人这种可鄙的主体性，所以把一切都与自己搭上关联。占星术把天体的运行和寒酸的自己拉上关系，也把它与尘世间的俗事、丑行联系在一起。这种情况古已有之</strong>。</li>
<li><strong>对任何人都不可太过迁就和热情</strong>。如果我们太过友好、礼貌和殷勤，我们反而有可能失去这些朋友。与人交往的优势全在于任何方面都不需要对方，<strong>并且让他们看到这一点</strong>。</li>
</ul>
<blockquote>
<p>不尊崇别人的人会受到别人的尊崇 —— 意大利谚语</p>
</blockquote>
<ul>
<li>谁要是以为这世上魔鬼就是头上长角或者傻瓜就是身挂铃铛，他就会永远成为他们的猎物和玩物。与他人交往时，人们只是露出其中的一面。无论如何，对刚认识不久的人，都应注意不要评估太高。否则十有八九我们都会失望甚至蒙受损失。<strong>一个人会在细节小事上疏于防备，从而表露出自己的性格</strong>。</li>
</ul>
<blockquote>
<p>没有哪条狗是坏到不会摇尾巴的 —— 意大利谚语</p>
</blockquote>
<ul>
<li>要具备某种不发自我们与生俱来的本性，而只是出自理想思考，完全从外在获得的性格，是件很困难的事。人的天性从来没有完全停止过对此的抗争。<strong>造作是我们对自己的某种自我谴责和贬低</strong>。我们不能无条件放任自流，完全表现自己的样子。<strong>对否定属性的隐瞒是合理的，但是对肯定属性的冒充是不对的</strong>。</li>
<li>以他人为镜，从中能清楚看到自己的缺点</li>
<li>人与人最重要的关系和由此产生的联系不是理念上的<em>（注：即兴致相投）</em>，而是以某种物质利益为基础。这点认识上的转变通常在年长时才会认识到。因为<strong>在这个贫穷和匮乏的世界，应付匮乏和需求的手段无论在何处都是最重要的，因此也是压倒一切的。</strong></li>
<li>在这个世界上流行的不是真正的尊重和真正的友谊，只是做得尽量逼真和自然地显示尊重和友谊的表面功夫。朋友间分隔太远或长时间不见会有损友情，<strong>甚至我们最亲爱的朋友随着岁月的流逝会逐渐变成抽象的概念，我们对他们的关切也越来越变得纯粹只是理性上的</strong>。</li>
</ul>
<blockquote>
<p>从我们最好的朋友所遭遇的不幸，我们总能找到某样并不会使我们不悦的东西 —— 拉罗什富科</p>
</blockquote>
<ul>
<li>一个人表现出聪明和思想只能激起人们对他的憎恨和方案，并且这种感情还因为憎恨者和反感者没有正当理由说出来而变得更加强烈。<strong>显示自己的聪明智慧其实就是间接地指责别人愚蠢和无能</strong>。每个人都会本能地靠近给他带来优越感的物体。</li>
</ul>
<blockquote>
<p>要取悦别人的话，唯一的方式就是把自己裹以最傻呆的动物的外皮 —— 格拉西安</p>
</blockquote>
<ul>
<li><strong>保持礼貌就是大家心照不宣订下这样一条协议：我们都将互相忽略和避免对方在道德上和智力上的可怜本质。</strong>有礼貌是精明的做法，不礼貌的言行是愚蠢的。<em>（注：礼貌是人的一种保护措施，用光彩的外表掩饰贫乏难看，有棱有角的内在动物本性；在公众面前失去礼貌，就有如脱光衣服示众）</em></li>
<li>人的性格是不会改变的。<strong>一辈子也难改变一个人，能改变一个人的只有他自己</strong></li>
<li>所有激烈的情绪都来自意欲，而认识力在本质上是冷静的</li>
</ul>
<blockquote>
<p>你的敌人不可以知道的东西，都不能告诉你的朋友 —— 阿拉伯谚语<br>如果保持沉默，那我的秘密就是我的囚徒；如果失口说出这个秘密，那我就变成了这秘密的囚徒 —— 阿拉伯谚语<br>沉默之树结出安宁之果 —— 阿拉伯谚语</p>
</blockquote>
<ul>
<li>选择沉默是精明所致，采用说话则是虚荣心使然。我们经常都有做出这两者的机会，但通常为求得瞬间的快意而选择说话，不惜舍弃沉默所带给我们的长久好处</li>
<li>对不少人我们可以态度礼貌、声调友好地说出真正无礼的话语，而又避免直接的危险。<em>（注：因为这表示我们并没有诉诸自己的感情，没有情绪化）</em></li>
</ul>
<h3 id="看待命运"><a href="#看待命运" class="headerlink" title="看待命运"></a>看待命运</h3><p>要对可能面临的苦难有所认识和准备。</p>
<ul>
<li>通常，外在的时间和我们的根本目的犹如两股向着不同方向牵引的力，这两股力形成的对角线就成了我们的生活轨迹。</li>
<li>一个精明的人不会被事物恒久不变的表象欺骗，甚至能预见事物即将发生的变化方向</li>
<li>时间索取的利息比任何一个高利贷都夸张</li>
<li>总的来说，一个人在遭遇各种不幸横祸的时候，如果能够保持镇定自若，那就显示出他知道人生有可能遭遇的灾难是巨大和不可胜数的。</li>
<li>我们对每天人际交往中遇到的琐细烦忧，不可以放在心上，放在脑子里，而应视这些东西为前进路上的小狮子，随脚踢开，千万不要认真回想和琢磨这些事情。</li>
<li>一定程度的敬畏对于我们在这一世界的生存是必须的</li>
</ul>
<h2 id="人生的各个阶段"><a href="#人生的各个阶段" class="headerlink" title="人生的各个阶段"></a>人生的各个阶段</h2><h3 id="童年期"><a href="#童年期" class="headerlink" title="童年期"></a>童年期</h3><p>懵懂，上帝视角观察生活，不被意欲牵扰。</p>
<ul>
<li>童年期我们更多处于认知而不是意欲的状态，因此也充满了幸福。这个时候，生活以其全部以呈现在我们眼前，一切都是那样的新颖、鲜活。在童年期和青年早期对事物的经验和认识构成了以后所有认识和经验的固定原型和类别。</li>
<li>教育也忙于向我们灌输概念。不过这些概念并不会给我们真正本质的东西。这些东西就在我们对这个世界所作的直观把握中</li>
<li><strong>所有事物的客体存在，亦即其纯粹在表象中的存在，总是令人愉快的，而这些事物的主体存在，亦即作为意欲存在时，却都沉浸在痛苦和悲哀中</strong>。</li>
<li>在稍后的日子，我们有了对现实生活的渴望，急切期盼做事和受苦，这把我们拉进了喧嚷、骚动的人生。我们逐渐了解事物的另一面，即意欲的一面。</li>
</ul>
<h3 id="青年期"><a href="#青年期" class="headerlink" title="青年期"></a>青年期</h3><ul>
<li>在青年期困扰我们造成我们不幸福的原因是，我们对幸福的<strong>刻意追求</strong>。无论处在何种环境，我们通常都会感到不满，那是因为我们把现在才首次了解到的、无处不在的人生的空虚和可怜归咎于我们的环境</li>
<li>如果人的前半生特征是苦苦追求幸福而又无法满足，那人的后半生特征则变成了害怕遭遇不幸</li>
<li>一个成熟的人从自己生活经验中获得的，首先是不再先入为主和想当然</li>
<li><strong>在年轻的时候，我们误以为生活中的重要人物和重要意义的时间会大张旗鼓地露面和轰轰烈烈地发生。到了老年后，对生活的回顾却显示这些人物和事件都是悄无声息、不为人注意地从后门进入我们的生活</strong></li>
</ul>
<h3 id="中老年"><a href="#中老年" class="headerlink" title="中老年"></a>中老年</h3><ul>
<li>到了人生后半部分的人，看到了刺绣的背面，背面不那么美丽，但给人以教益，因为它让人看到刺绣品的总体针线</li>
<li>我们在青年时代感到喜悦和朝气，部分原因是我们正在走着上坡的路，并没有看见死亡。从年轻的角度看，生活就是漫长无尽的将来；从老年的角度看，那不过是一段极其短暂的过去</li>
<li>蓦然回首走过的一生，我们为什么觉得如此短暂呢？因为我们对这生活回忆不多，所以就觉得生活短暂了。这回忆漏掉了所有没多大意义和许多不愉快的事，剩下来的因此很少。很多开始有意义的事情，经过经常和无数次的重复后，慢慢成了没有意义。因为我们更能回忆我们的早年，而不是之后的时光。我们生活的时间越长，值得事后回想和重要有意义的事情就越少，唯有回想，才能让这些事留在记忆中。</li>
<li>有时我们的回忆可以把某一幕尘封已久的往事栩栩如生地重现在眼前，仿佛发生在昨天，但我们无法回想起现在和当初发生这一幕往事间所流逝的漫长时间。这段时间无法像一副图画一目了然，并且这之间发生的事情也大都忘记了；对这些事情只保留抽象中的大概认识，纯粹某一概念而已。所以那过去很久的某一往事显得那样的接近，宛如发生在昨天，而其余的时间则消失无踪。</li>
<li>青年人根据自己度过的为数不多的年岁估算将来，这些过去了的日子总是充满回忆，并因此显得漫长，因为<strong>新奇感</strong>使所有一切都显得有意义。</li>
<li><strong>有时候，我们以为自己是在怀念某一处遥远的地方，但其实，我们只是怀念着我们在年轻、朝气蓬勃的时候。</strong></li>
<li>人只有在年轻时期才是充满意识地生活，到了老年只带着一半的意识活着。人们做他们不得不做的事，之后却不知道自己是否做了那些事情</li>
<li>童年期，新奇感把一切事物都纳入我们的意识，因此每一天都是漫长的。<strong>我们在外出旅行的时候也遭遇同样的情形，所以，在旅行中度过的一个月似乎比在家的四个月还要长</strong>。</li>
<li><strong>一年的感觉长短与这一年除以我们年龄所得的商成反比</strong>；其次我们感受无聊的成都与我们的年龄成反比。在后半辈子，无聊也大都连带消失了。并且另一方面，我们的情欲及其痛苦也沉寂了。</li>
<li>青年期占优势的是直观，在老年期占优势的是思想</li>
<li>我们精神力最旺盛的时期，毫无疑问是青年期，最迟能延至35岁左右。从这个年纪开始，精神力就开始衰弱。</li>
<li>在青年期，我们的知识总是支离破碎、残缺不全的。只有到了老年，我们才能对生活获得某一完整的、恰如其分的表象认识。人们在青年时代有更多的设想，但在老年阶段，有的更多是判断力、洞察力和对事物的根本认识</li>
<li>我们经常低估我们在年轻时做出的成绩，也轻视那时候的判断力</li>
<li>最奇怪的是，只有在生命临近完结之时，一个人才会真正认清和明白，甚至他自己、他就自己的木目标和方向，尤其在他与这个世界和他人的关系方面</li>
<li><strong>每种快感的产生都只是一种需求的缓解</strong></li>
<li>不管怎么说，青年期是躁动不安的时期，老年期是安宁的时期。青年人收到缤纷世界及其丰富形态的诱惑，他的想象力马上就夸大了这一世界所能给予的东西。在老年，人们得以更正确、更清晰地认清所有一切的客观面目。</li>
<li>青年期和老年期的根本区别在青年期的前景就是生活，而老年期的前景却是死亡。</li>
</ul>
<h2 id="附：叔本华的生平轶事"><a href="#附：叔本华的生平轶事" class="headerlink" title="附：叔本华的生平轶事"></a>附：叔本华的生平轶事</h2><ul>
<li>“在孩子们从生活原型中了解到生活之前，不应该从生活的复制品中认识生活的任何方面。因此，不要匆匆忙忙只是把书本放在孩子们的手中。……让他们永远直接从现实世界里提取概念”</li>
<li>生来就注定要成就一番伟大事业的人，从青年时代起就会在内心秘密感到这一事实</li>
<li>“设立国家的必要性就在于人们已经承认：人与人之间并没有什么公正可言”。</li>
</ul>
<p><em>–END–</em></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://shenlvmeng.github.com/blog/2019/03/12/indexeddb-introduction/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.jpg">
      <meta itemprop="name" content="shenlvmeng">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shenlvmeng's Blog">
      <meta itemprop="description" content="Be sharp, my friend.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Shenlvmeng's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/blog/2019/03/12/indexeddb-introduction/" class="post-title-link" itemprop="url">Electron应用数据库选型暨indexedDB扫盲</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2019-03-12 00:01:59 / 修改时间：00:03:38" itemprop="dateCreated datePublished" datetime="2019-03-12T00:01:59+08:00">2019-03-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog/categories/%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index"><span itemprop="name">技术</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/blog/2019/03/12/indexeddb-introduction/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/03/12/indexeddb-introduction/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>6.4k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>11 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote>
<p>名谓扫盲，实则扫自己的盲</p>
</blockquote>
<h2 id="选型"><a href="#选型" class="headerlink" title="选型"></a>选型</h2><p>要说到最近的一个个人项目<a target="_blank" rel="noopener" href="https://github.com/shenlvmeng/calendone">calendone</a>，它是一个普通的Electron日历应用，有每日记录，定计划等功能，需要做数据持久化。数据量不大，不需要考虑性能问题。简单看了些方案。</p>
<h3 id="SQLite"><a href="#SQLite" class="headerlink" title="SQLite"></a>SQLite</h3><ul>
<li><strong>关系型数据库</strong>，具有关系型数据库的一切特性，事务遵循ACID属性。小巧轻便，有knex这样的库做ORM。</li>
<li>是node原生模块，需要重新编译，而且有坑</li>
</ul>
<h3 id="NeDB"><a href="#NeDB" class="headerlink" title="NeDB"></a>NeDB</h3><ul>
<li><strong>NoSQL类型数据库</strong>，可以实现本地存储，也可以作为内存存储</li>
<li><strong>API是MongoDB的一个子集</strong></li>
<li>纯js实现，一个文件对应一张表</li>
</ul>
<h3 id="Leveldb"><a href="#Leveldb" class="headerlink" title="Leveldb"></a>Leveldb</h3><ul>
<li><strong>NoSQL类型数据库</strong>，支持内存和持久化存储</li>
<li><strong>没有事务机制</strong>，默认按key查询，没有索引</li>
<li>默认保存的不是js对象，而是字符串。如果要保存为对象，可以在level函数第二个参数加入<code>&#123; valueEncoding: &quot;json&quot; &#125;</code>来让保存的js对象以json的形式读取</li>
</ul>
<h3 id="Lowdb"><a href="#Lowdb" class="headerlink" title="Lowdb"></a>Lowdb</h3><ul>
<li>基于Loadsh的<strong>纯JSON文件数据库</strong>，速度较慢</li>
<li>不支持索引&#x2F;事务&#x2F;批量操作等数据库功能</li>
</ul>
<h3 id="indexedDB"><a href="#indexedDB" class="headerlink" title="indexedDB"></a>indexedDB</h3><ul>
<li><strong>NoSQL数据库</strong>，浏览器自带，可以储存大量数据，容量为250MB以上</li>
<li>支持事务，有版本号的概念。</li>
<li>支持较多的字段类型</li>
</ul>
<p>综上考虑，最后采用浏览器自带的indexedDB，足够满足要求，漫游接入成本，升级方便，调试方便。</p>
<h2 id="indexedDB介绍"><a href="#indexedDB介绍" class="headerlink" title="indexedDB介绍"></a>indexedDB介绍</h2><p>indexedDB脱胎于HTML本地存储。</p>
<h3 id="HTML本地存储"><a href="#HTML本地存储" class="headerlink" title="HTML本地存储"></a>HTML本地存储</h3><p>上古时代中，HTML中持久化数据只有几种方法[1]：</p>
<ul>
<li>cookie。cookie的缺点很明显，最多只能存储4KB的数据，且会携带在同域名下每个HTTP请求的头部，明文传输（除非你使用SSL）。</li>
<li>IE userData。微软在上世纪90年代的浏览器大战时推出的本地存储方案，允许每个页面最多存储64K数据，每个站点最多640K数据，它不是Web标准的一部分</li>
<li>Flash cookie。它实际上和HTTP cookie并不是一回事，它的名字可能叫做”Flash本地存储”更为合适。考虑到Flash已经是要被淘汰的技术……</li>
</ul>
<p>本地存储出现后，有了下面一些标准化的更简单的方法：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API">Web Storage接口</a>，即localStorage和sessionStorage</li>
<li>Web SQL，这是一个<strong>已经废弃</strong>的规范。就跟它的名字一样，它就是浏览器端的一个SQL数据库，可以执行SQL语句。由于语法和SQLite绑定过紧，后被标准组织废弃</li>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/IndexedDB_API">indexedDB</a>，Web SQL的替代品，也是浏览器端的数据库，但他是No SQL的。有MongoDB使用体验的，对它就不会感到陌生。</li>
</ul>
<h3 id="indexedDB-1"><a href="#indexedDB-1" class="headerlink" title="indexedDB"></a>indexedDB</h3><p>indexedDB是浏览器提供的本地数据库，目标是持久化存储大量数据，提供类No SQL的增删改查体验。因此它有以下几点特色：</p>
<ul>
<li><strong>键值对存储</strong>，采用对象仓库（object store）存放数据，所有类型的数据都可以直接存入，包括 JavaScript 对象。</li>
<li><strong>支持索引</strong>，indexedDB没有表列的概念，但可以建立索引，查询数据时使用id或索引搜索</li>
<li><strong>支持事务</strong>，保证操作的原子性，事务中的任意一步失败，数据库都会回滚到操作事务前的状态</li>
<li><strong>异步操作</strong>，indexedDB操作都是异步的，在执行数据增删改查时，不会影响界面性能。</li>
<li><strong>同源限制</strong>，每一个数据库会关联创建它的域名。网页只能访问自身域名下的数据库，不能跨域访问数据库。</li>
<li><strong>其他</strong>，包括存储空间大、支持二进制存储等…</li>
</ul>
<h4 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h4><ul>
<li><strong>数据库</strong>，IDBDatabase对象类型，每个域名（协议 + 域名 + 端口）可以新建任意多个数据库。</li>
<li><strong>对象仓库</strong>，IDBObjectStore对象类型，一个数据库包含若干个对象仓库，类似于关系型数据库中的表</li>
<li><strong>数据记录</strong>，类型于关系型数据库中的行，但是只有主键和数据体两部分。<strong>数据体可以是任意数据类型，不限于对象</strong>。</li>
<li><strong>索引</strong>，IDBIndex对象类型，数据记录里除了主键以外的搜索参照</li>
<li><strong>事务</strong>，IDBTransaction数据类型，对数据库的增删改查都需要通过事务进行，执行结果通过<code>error</code>，<code>success</code>，<code>abort</code>事件回调拿到</li>
</ul>
<p>indexedDB定义了许多对象接口，即API，除了上面介绍的一些，更完善的接口介绍可以参考MDN的介绍。</p>
<h4 id="操作"><a href="#操作" class="headerlink" title="操作"></a>操作</h4><p>indexedDB 鼓励使用的基本模式如下所示：</p>
<ol>
<li>打开数据库。</li>
<li>在数据库中创建一个对象仓库（object store）。</li>
<li>启动一个事务，并发送一个请求来执行一些数据库操作，像增加或提取数据等。</li>
<li>通过监听正确类型的DOM事件以等待操作完成。</li>
<li>在操作结果上进行一些操作（可以在request对象中找到）</li>
</ol>
<p><strong>打开数据库</strong></p>
<p>使用 IndexedDB 的第一步是打开数据库，使用indexedDB.open()方法如下。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> request = <span class="variable language_">window</span>.<span class="property">indexedDB</span>.<span class="title function_">open</span>(databaseName, version);</span><br></pre></td></tr></table></figure>

<p>其中第一个参数为数据库名，第二个参数是数据库版本号。<code>indexedDB.open()</code>方法返回一个<code>IDBRequest</code>对象。这个对象通过三种事件error、success、upgradeneeded，处理打开数据库的操作结果。</p>
<p>如果数据库不存在，open操作会创建该数据库，然后<code>onupgradeneeded</code>事件被触发，需要在该事件的处理函数中创建数据库模式。如果数据库已经存在，但指定了一个更高的数据库版本，会直接触发 <code>onupgradeneeded</code>事件，允许你在处理函数中更新数据库模式。</p>
<p><strong>注意：这里的版本号是一个unsigned long long数字，使用浮点数是会被转化到最近的整数</strong></p>
<p><strong>绑定处理函数</strong></p>
<p>几乎所有我们产生的请求我们在处理的时候首先要做的就是添加成功和失败处理函数。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">request.<span class="property">onerror</span> = <span class="keyword">function</span>(<span class="params">event</span>) &#123;</span><br><span class="line">  <span class="comment">// Do something with request.errorCode!</span></span><br><span class="line">&#125;;</span><br><span class="line">request.<span class="property">onsuccess</span> = <span class="keyword">function</span>(<span class="params">event</span>) &#123;</span><br><span class="line">  <span class="comment">// Do something with request.result!</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>如果一切顺利的话，相关request的<code>onsuccess()</code>处理函数就会被触发。如果不是所有事情都成功的话，<code>error </code>事件会在request上被触发。</p>
<p><strong>新建数据库</strong></p>
<p>新建数据库与打开数据库是同一个操作。不同之处在于，后续的操作主要在<code>upgradeneeded</code>事件的监听函数里面完成。通常新建数据库后，第一件事是新建对象仓库，即下面这样：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">request.<span class="property">onupgradeneeded</span> = <span class="keyword">function</span> (<span class="params">event</span>) &#123;</span><br><span class="line">  db = event.<span class="property">target</span>.<span class="property">result</span>;</span><br><span class="line">  <span class="keyword">var</span> objectStore;</span><br><span class="line">  <span class="keyword">if</span> (!db.<span class="property">objectStoreNames</span>.<span class="title function_">contains</span>(<span class="string">&#x27;person&#x27;</span>)) &#123;</span><br><span class="line">    objectStore = db.<span class="title function_">createObjectStore</span>(<span class="string">&#x27;person&#x27;</span>, &#123; <span class="attr">keyPath</span>: <span class="string">&#x27;id&#x27;</span> &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上面这段语句使用id作为对象仓库的主键，如果没有合适作为主键的属性，可以让indexedDB自动生成主键。为了便于查询，可以在数据仓库中建立索引。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> objectStore = db.<span class="title function_">createObjectStore</span>(</span><br><span class="line">  <span class="string">&#x27;person&#x27;</span>,</span><br><span class="line">  &#123; <span class="attr">autoIncrement</span>: <span class="literal">true</span> &#125;</span><br><span class="line">);</span><br><span class="line">objectStore.<span class="title function_">createIndex</span>(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;name&#x27;</span>, &#123; <span class="attr">unique</span>: <span class="literal">false</span> &#125;);</span><br><span class="line">objectStore.<span class="title function_">createIndex</span>(<span class="string">&#x27;email&#x27;</span>, <span class="string">&#x27;email&#x27;</span>, &#123; <span class="attr">unique</span>: <span class="literal">true</span> &#125;);</span><br></pre></td></tr></table></figure>

<p><strong>增删改查</strong></p>
<p>增删改查都通过事务进行。事务来自于数据库对象，必须指定你想让这个事务跨越哪些对象仓库。事务中有三种模式，表示你想对数据库进行的操作类型：</p>
<ul>
<li><code>readonly</code> <strong>默认</strong>，只读</li>
<li><code>readwrite</code> 读写操作</li>
<li><code>versionchange</code> 修改数据库模式或结构</li>
</ul>
<p>只在必要时指定 readwrite 事务。你可以同时执行多个readonly事务，哪怕它们的作用域有重叠；但对于在一个对象仓库上只能运行一个readwrite事务。</p>
<p>增加一条数据的语句如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> transaction = db.<span class="title function_">transaction</span>([<span class="string">&quot;person&quot;</span>], <span class="string">&quot;readwrite&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在所有数据添加完毕后的处理</span></span><br><span class="line">transaction.<span class="property">oncomplete</span> = <span class="keyword">function</span>(<span class="params">event</span>) &#123;</span><br><span class="line">  <span class="title function_">alert</span>(<span class="string">&quot;成功&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">transaction.<span class="property">onerror</span> = <span class="keyword">function</span>(<span class="params">event</span>) &#123;</span><br><span class="line">  <span class="title function_">alert</span>(<span class="string">&quot;失败&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> objectStore = transaction.<span class="title function_">objectStore</span>(<span class="string">&quot;person&quot;</span>);</span><br><span class="line">    .<span class="title function_">add</span>(&#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">&#x27;foo&#x27;</span>, <span class="attr">email</span>: <span class="string">&#x27;foo@bar.com&#x27;</span> &#125;);</span><br></pre></td></tr></table></figure>

<p>在有了数据后，可以通过几种方法对它进行提取。首先是简单的 <code>get()</code>，通过键获得值。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> transaction = db.<span class="title function_">transaction</span>([<span class="string">&quot;person&quot;</span>]);</span><br><span class="line"><span class="keyword">var</span> objectStore = transaction.<span class="title function_">objectStore</span>(<span class="string">&quot;person&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> request = objectStore.<span class="title function_">get</span>(<span class="number">1</span>);</span><br><span class="line">request.<span class="property">onsuccess</span> = <span class="keyword">function</span>(<span class="params">event</span>) &#123;</span><br><span class="line">  <span class="comment">// 对 request.result 做些操作！</span></span><br><span class="line">  <span class="title function_">alert</span>(request.<span class="property">result</span>.<span class="property">name</span>);</span><br><span class="line">&#125;;</span><br><span class="line">request.<span class="property">onerror</span> = <span class="keyword">function</span>(<span class="params">event</span>) &#123;</span><br><span class="line">  <span class="title function_">alert</span>(<span class="string">&#x27;出错了&#x27;</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>在很多场景下你并不知道数据的键，这时可以用索引找到你要的数据。例子中的<code>name</code>属性可能并不是唯一的，在这种情况下，你总是得到键值最小的那个。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 前提是你已经建立了name索引</span></span><br><span class="line"><span class="keyword">var</span> index = objectStore.<span class="title function_">index</span>(<span class="string">&quot;name&quot;</span>);</span><br><span class="line"></span><br><span class="line">index.<span class="title function_">get</span>(<span class="string">&#x27;foo&#x27;</span>).<span class="property">onsuccess</span> = <span class="keyword">function</span>(<span class="params">event</span>) &#123;</span><br><span class="line">  <span class="title function_">alert</span>(<span class="string">&quot;foo&#x27;s id is &quot;</span> + event.<span class="property">target</span>.<span class="property">result</span>.<span class="property">id</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>在需要遍历某一范围的数据集合时，也可以使用<strong>游标</strong>，这里要用到<code>openCursor</code>方法。比如查询整个数据对象存储。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">objectStore.<span class="title function_">openCursor</span>().<span class="property">onsuccess</span> = <span class="keyword">function</span>(<span class="params">event</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> cursor = event.<span class="property">target</span>.<span class="property">result</span>;</span><br><span class="line">  <span class="keyword">if</span> (cursor) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(cursor.<span class="property">value</span>);</span><br><span class="line">    cursor.<span class="title function_">continue</span>();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&#x27;遍历结束&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><em>上面的功能也可以通过<code>getAll</code>完成，但是由于数据对象是懒生成的，<code>getAll</code>性能会有消耗。当然你如果想直接拿到整个数据组成的数组，还是<code>getAll</code>好点</em></p>
<p>结合索引（IDBIndex）和游标（IDBCursor）可以查询指定索引的所有记录，方法<code>openCursor</code>和<code>openKeyCursor</code>分别返回不同的数据结构。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">index.<span class="title function_">openCursor</span>().<span class="property">onsuccess</span> = <span class="keyword">function</span>(<span class="params">event</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> cursor = event.<span class="property">target</span>.<span class="property">result</span>;</span><br><span class="line">  <span class="keyword">if</span> (cursor) &#123;</span><br><span class="line">    <span class="comment">// cursor.key 是一个 name, 就像 &quot;Bill&quot;, 然后 cursor.value 是整个对象。</span></span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&quot;Name: &quot;</span> + cursor.<span class="property">key</span> + <span class="string">&quot;, email: &quot;</span> + cursor.<span class="property">value</span>.<span class="property">email</span>);</span><br><span class="line">    cursor.<span class="title function_">continue</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">index.<span class="title function_">openKeyCursor</span>().<span class="property">onsuccess</span> = <span class="keyword">function</span>(<span class="params">event</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> cursor = event.<span class="property">target</span>.<span class="property">result</span>;</span><br><span class="line">  <span class="keyword">if</span> (cursor) &#123;</span><br><span class="line">    <span class="comment">// cursor.key 是一个 name, 就像 &quot;Bill&quot;, 然后 cursor.value是主键的值。</span></span><br><span class="line">    <span class="comment">// 没办法得到存储对象的其余部分。</span></span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&quot;Name: &quot;</span> + cursor.<span class="property">key</span> + <span class="string">&quot;, id: &quot;</span> + cursor.<span class="property">value</span>);</span><br><span class="line">    cursor.<span class="title function_">continue</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>更多游标设置参考<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/IndexedDB_API/Using_IndexedDB#%E6%8C%87%E5%AE%9A%E6%B8%B8%E6%A0%87%E7%9A%84%E8%8C%83%E5%9B%B4%E5%92%8C%E6%96%B9%E5%90%91">mdn</a>的介绍。</p>
<p>更新和删除数据，分别使用<code>put</code>和<code>delete</code>方法。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> request = db.<span class="title function_">transaction</span>([<span class="string">&#x27;person&#x27;</span>], <span class="string">&#x27;readwrite&#x27;</span>)</span><br><span class="line">  .<span class="title function_">objectStore</span>(<span class="string">&#x27;person&#x27;</span>)</span><br><span class="line">  .<span class="title function_">put</span>(&#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">&#x27;李四&#x27;</span>, <span class="attr">age</span>: <span class="number">35</span>, <span class="attr">email</span>: <span class="string">&#x27;lisi@example.com&#x27;</span> &#125;);</span><br><span class="line"></span><br><span class="line">request.<span class="property">onsuccess</span> = <span class="keyword">function</span> (<span class="params">event</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;数据更新成功&#x27;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">request.<span class="property">onerror</span> = <span class="keyword">function</span> (<span class="params">event</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;数据更新失败&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> request = db.<span class="title function_">transaction</span>([<span class="string">&#x27;person&#x27;</span>], <span class="string">&#x27;readwrite&#x27;</span>)</span><br><span class="line">  .<span class="title function_">objectStore</span>(<span class="string">&#x27;person&#x27;</span>)</span><br><span class="line">  .<span class="title function_">delete</span>(<span class="number">1</span>);</span><br><span class="line"> </span><br><span class="line">request.<span class="property">onsuccess</span> = <span class="keyword">function</span> (<span class="params">event</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;数据删除成功&#x27;</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>其中put的数据为全量替换，可以通过get方法拿到数据后，修改特定值再交给put完成增量替换。</p>
<h2 id="indexedDB封装库"><a href="#indexedDB封装库" class="headerlink" title="indexedDB封装库"></a>indexedDB封装库</h2><p>indexedDB虽然强大，但是有些API对于用户来说还是不够方便，下面是几个indexedDB的封装库：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://localforage.github.io/localForage/">localForage</a>，支持类Storage API语法的客户端数据存储polyfill，支持回退到Storage和Web SQL</li>
<li><a target="_blank" rel="noopener" href="https://dexie.org/">dexie.js</a>，提供更友好和简单的语法便于快速的编码开发，<strong>有Typescript支持</strong>。</li>
<li><a target="_blank" rel="noopener" href="https://github.com/erikolson186/zangodb">ZangoDB</a>，提供类MongoDB的接口实现，提供了许多MangoDB的特性实现</li>
<li><a target="_blank" rel="noopener" href="http://jsstore.net/">JsStore</a>，提供基于indexedDB的类SQL的语法实现。</li>
</ul>
<p>综上，考虑到dexie.js的语法更加友善，文档页较完善。最终选择它作为客户端存储的实现。</p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul>
<li><a target="_blank" rel="noopener" href="https://jiangzhenghua.iteye.com/blog/1225201">HTML5本地存储不完全指南</a></li>
<li><a target="_blank" rel="noopener" href="https://wangdoc.com/javascript/bom/indexeddb.html">IndexedDB API</a></li>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/IndexedDB_API/Using_IndexedDB">使用 IndexedDB - Web API接口参考 | MDN</a></li>
<li><a target="_blank" rel="noopener" href="https://dexie.org/docs/API-Reference">Dexie.js API Reference</a></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://shenlvmeng.github.com/blog/2019/02/13/1587-a-year-of-no-significance/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.jpg">
      <meta itemprop="name" content="shenlvmeng">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shenlvmeng's Blog">
      <meta itemprop="description" content="Be sharp, my friend.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Shenlvmeng's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/blog/2019/02/13/1587-a-year-of-no-significance/" class="post-title-link" itemprop="url">关于《万历十五年》的一些思考</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-02-13 23:18:30" itemprop="dateCreated datePublished" datetime="2019-02-13T23:18:30+08:00">2019-02-13</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2019-02-14 00:34:44" itemprop="dateModified" datetime="2019-02-14T00:34:44+08:00">2019-02-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog/categories/%E6%80%9D%E8%80%83/" itemprop="url" rel="index"><span itemprop="name">思考</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/blog/2019/02/13/1587-a-year-of-no-significance/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/02/13/1587-a-year-of-no-significance/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>2k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>3 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote>
<p>作为读书后的感受记录，照例先做概要，再谈感受。</p>
</blockquote>
<p>我是在大学阶段知道《万历十五年》这本书的，当时作为《形势与政策》课的读书笔记建议书目之一。可见尽管写的四百多年前的事，对于当今还是有参考意义。如作者所说，全书介于学术著作和商业书籍之间，用有趣的具有复古气息的口气，从点到面地讲述了万历年间的诸多史事和几个典型人物，由浅入深、抽丝剥茧地探讨了传统社会存在的僵化问题，并给出现代社会以经验和教训。读毕感叹黄仁宇先生功底之深厚，著学之审慎。</p>
<h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><ul>
<li>归根到底，还是过于依托世俗道德约束百官和平民，缺少法律的规矩约束，使得整个社会制度很容易跟不上经济发展和科学进步，而最终走向窠臼被淘汰。</li>
<li>明朝的皇帝即使贵为天子，也不过是制度所需要的产物，他作为“天命”的象征，有天赋的最终仲裁和决定权，需要调和百官之间的关系；但同时也是传统道德的完美象征和百官楷模，需要严格依从传统和道德行事。</li>
<li>文官们熟读孔孟之书，研究历史兴亡之道，从伦理道德出发解释日常事务，在面对违反伦常的虚伪矫情时，如果不力加诤谏而听之任之，必然会影响本朝安危</li>
<li>宦官是皇帝和文官之间的协调者，一个优秀的皇帝会成为文官和太监间的平衡者，相互掣肘</li>
</ul>
<h2 id="申时行"><a href="#申时行" class="headerlink" title="申时行"></a>申时行</h2><ul>
<li>在这种制度下，道德至高无上，它不仅可以指导行政，还可以代替行政</li>
<li>一项政策能否付诸实施，实施后或成或败，全看它与所有文官的共同习惯是否相安无事。</li>
<li>文官作为政策的实施者，朝廷最大的任务就是促进文官之间的互相信赖与和谐，鼓舞士气，发挥精神上的力量。</li>
<li>理想和现实是脱节的，人们口头上的理想即为“阳”，人们不可告人的私欲即为“阴”，调节阴阳是一件麻烦事。因此，<strong>与其暴露各人的阴，毋宁提倡他们的阳</strong>。</li>
<li>身为首辅最大的贡献，则在于是各种人才都能在政府中发挥长处，对他们起感化和领导的作用。</li>
<li>申时行尽管意识到阴阳难以调节，问题症结所在，却没有能力改变制度。他决心做和事佬来调和阴阳，生平不愿宣扬别人的缺点，对于提拔自己的人，更不会妄加批判。</li>
</ul>
<h2 id="万历"><a href="#万历" class="headerlink" title="万历"></a>万历</h2><ul>
<li>本朝的司法制度极为简单，缺乏判决争端的依据。以立储为例，假如帝国真正实行法治，继承皇位一事由一个独立性的法庭作出判决，那么皇帝委托律师根据文法和不成文法来做辩护，立幼而不立长是有胜诉可能的。但是<strong>本朝不是以法律治理臣民，而是以“四书”中的伦理作为主宰</strong>。</li>
<li>文官已成一种强大的力量，强迫宝座上的皇帝在处理政务时摈弃他个人的意志，历任首辅又都以群臣的代言人自居。万历却无能为力，因为在制度中，皇帝作为仲裁者而非实施者，没有制定法律的力量，不能改造制度避免冲突发生。因此消极怠工的报复，目的并非恢复皇帝的权威而只是单纯发泄</li>
<li>体制上有欠缺，文官们就需要精神力量来弥补组织上的不足。一方面，这些熟读经史的人以仁义道德相标榜，以治国平天下为己任；另一方面，体制上有存在如此多罅隙，给这些人强烈的引诱</li>
<li><strong>长期的道德沦丧，即标志社会形态何其组织制度的脱节</strong></li>
</ul>
<h2 id="海瑞"><a href="#海瑞" class="headerlink" title="海瑞"></a>海瑞</h2><ul>
<li><strong>海瑞的一生体现了一个有教养的读书人服务公众牺牲自我的精神，但这种精神的实际作用却至为微薄。</strong></li>
<li>抽象的道德代替了法律，上至官僚下至村民，其判断是非的标准是“善恶”而非合法或非法。</li>
<li>以熟读诗书的文人治理农民，他们不可能改进这个司法制度</li>
<li>财政制度弊病在于缺乏弹性，不能适应环境而调整。政府不用技术和经济的力量来扶植民众，而单纯依靠政治上的压力和道德上的宣传，结果只能是事与愿违</li>
<li>海瑞不相信为人处世应该有阴阳的分别，因此被称为奇特、怪僻而执拗。</li>
</ul>
<h2 id="戚继光"><a href="#戚继光" class="headerlink" title="戚继光"></a>戚继光</h2><ul>
<li>明朝文官地位高于武官。大多数文官以中庸之道为处事的原则，标榜稳健和平，这和武官克敌制胜征战沙场的常态相矛盾。</li>
<li>戚继光功成名遂，固然是本身的卓越才能使然，但是得到谭纶的支持也是必不可少的因素。</li>
<li>戚继光是个复杂的人物，不能把她强行安放在用传统道德构成的标准框架里。他的天才，在于他发现面对落后的军事制度，帝国不允许也没有能力做全面的改革，能做的只有妥协；而他的成功也在于他善于在技术上调和各种矛盾，<strong>在组织制度上没办法，就在私人关系上寻找出路</strong>。</li>
<li>戚继光的长处在于他没有把人事上的才能当成投机取巧和升官发财的本钱，而只是作为建立新军和保卫国家的手段</li>
</ul>
<h2 id="李贽"><a href="#李贽" class="headerlink" title="李贽"></a>李贽</h2><ul>
<li>大凡高度的概括，总带有想象的成分</li>
<li>李贽视舍小节而顾大局的作法为正当，其前提是以公共利益为依托，在伦理上的解释则是公众道德不同于私人道德，目的纯正不妨手段不纯</li>
<li>李贽是提倡实践的理论家，但并不表示自己有意于实践；他攻击虚伪的伦理道德，也拒绝以传统的历史观为自己的历史观，但更广泛的范围里仍然是儒家的信徒。</li>
<li>张居正意识到必须要在组织上作部分的调整和改革，但是在理论上找不到更好的学说，就只能以自己的一身挺立于合法合合理之间。</li>
<li>混合阴阳，在长时间里造成了法律和道德的脱节</li>
</ul>
<p>当一个人口众多的国家，个人行动全凭儒家简单粗浅而又无法固定的原则所限制，法律又毫无创造性，则社会发展的程度必然受到限制。<strong>即使宗旨善良，也不能补助技术之不及</strong>。</p>
<p><em>–END–</em></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://shenlvmeng.github.com/blog/2019/02/12/some-tips-6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.jpg">
      <meta itemprop="name" content="shenlvmeng">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shenlvmeng's Blog">
      <meta itemprop="description" content="Be sharp, my friend.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Shenlvmeng's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/blog/2019/02/12/some-tips-6/" class="post-title-link" itemprop="url">工作中的遇到的一些小知识 6</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2019-02-12 22:29:56 / 修改时间：22:48:15" itemprop="dateCreated datePublished" datetime="2019-02-12T22:29:56+08:00">2019-02-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog/categories/%E5%B7%A5%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">工程</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/blog/2019/02/12/some-tips-6/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/02/12/some-tips-6/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>3.9k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>6 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="React-Hooks和React-Hot-Loader默认配置相冲突"><a href="#React-Hooks和React-Hot-Loader默认配置相冲突" class="headerlink" title="React Hooks和React Hot Loader默认配置相冲突"></a>React Hooks和React Hot Loader默认配置相冲突</h2><p>设置RHL的<code>pureSFC</code>配置为true，详见<a target="_blank" rel="noopener" href="https://github.com/gaearon/react-hot-loader/issues/1088#issuecomment-434862175">讨论</a>。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setConfig(&#123; pureSFC: true &#125;)</span><br></pre></td></tr></table></figure>

<h2 id="一个简单的rollup配置样例"><a href="#一个简单的rollup配置样例" class="headerlink" title="一个简单的rollup配置样例"></a>一个简单的rollup配置样例</h2><p>最近有一个开发前端录音库（严格来说是改进）的需求，目标是发布到npm管理平台上，在打包库上<a target="_blank" rel="noopener" href="https://rollupjs.org/guide/en">rollup</a>的发挥要优于webpack。刚好想用用试试，就用了rollup作为打包工具。因为场景比webpack更简单，配置上也比webpack好配很多，基本看看<a target="_blank" rel="noopener" href="https://rollupjs.org/guide/zh#tutorial">官方文档</a>就可以上手了。</p>
<p>不过，文档里用的babel版本还是6.x，使用新版本babel后，配置文件<code>rollup.config.js</code>和<code>.babelrc</code>有些改动，这里列在下面。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// rollup.config.js</span></span><br><span class="line"><span class="keyword">import</span> resolve <span class="keyword">from</span> <span class="string">&#x27;rollup-plugin-node-resolve&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> commonjs <span class="keyword">from</span> <span class="string">&#x27;rollup-plugin-commonjs&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> babel <span class="keyword">from</span> <span class="string">&#x27;rollup-plugin-babel&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; terser &#125; <span class="keyword">from</span> <span class="string">&quot;rollup-plugin-terser&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">input</span>: <span class="string">&#x27;src/index.js&#x27;</span>,</span><br><span class="line">    <span class="attr">output</span>: &#123;</span><br><span class="line">        <span class="attr">file</span>: <span class="string">&#x27;index.js&#x27;</span>,</span><br><span class="line">        <span class="attr">format</span>: <span class="string">&#x27;es&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="title function_">resolve</span>(),</span><br><span class="line">        <span class="title function_">commonjs</span>(),</span><br><span class="line">        <span class="title function_">babel</span>(&#123;</span><br><span class="line">            <span class="attr">exclude</span>: <span class="string">&#x27;node_modules/**&#x27;</span></span><br><span class="line">        &#125;),</span><br><span class="line">        <span class="title function_">terser</span>()</span><br><span class="line">    ]</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// .babelrc</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">presets</span>: [</span><br><span class="line">        [</span><br><span class="line">            <span class="string">&#x27;@babel/env&#x27;</span>,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">loose</span>: <span class="literal">true</span>,</span><br><span class="line">                <span class="attr">modules</span>: <span class="literal">false</span></span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        [<span class="string">&#x27;@babel/proposal-object-rest-spread&#x27;</span>, &#123; <span class="attr">loose</span>: <span class="literal">true</span> &#125;]</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="mouseout和mouseleave事件的区别"><a href="#mouseout和mouseleave事件的区别" class="headerlink" title="mouseout和mouseleave事件的区别"></a><code>mouseout</code>和<code>mouseleave</code>事件的区别</h2><blockquote>
<p>mouseout: <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/Events/mouseout">https://developer.mozilla.org/en-US/docs/Web/Events/mouseout</a><br>mouseleave: <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/Events/mouseleave">https://developer.mozilla.org/en-US/docs/Web/Events/mouseleave</a></p>
</blockquote>
<ul>
<li><code>mouseout</code>在鼠标离开该元素表面时触发，<strong>包括进入到该元素的子元素中</strong></li>
<li><code>mouseleave</code>在鼠标离开该元素区域时触发，<strong>即离开该元素和所有子元素区域</strong></li>
</ul>
<h2 id="sublime-goto-definition-快捷键"><a href="#sublime-goto-definition-快捷键" class="headerlink" title="sublime goto definition 快捷键"></a>sublime goto definition 快捷键</h2><blockquote>
<p>参考<a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/16235706/sublime-3-set-key-map-for-function-goto-definition">这里</a></p>
</blockquote>
<h2 id="只lint-changed-file的脚本方案"><a href="#只lint-changed-file的脚本方案" class="headerlink" title="只lint changed file的脚本方案"></a>只lint changed file的脚本方案</h2><p>利用<code>git diff-index</code>。下面以tslint为例。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">files=$(git diff-index --relative --name-only --cached HEAD | grep -e <span class="string">&#x27;\\.ts$&#x27;</span> -e <span class="string">&#x27;\\.tsx$&#x27;</span>);</span><br><span class="line"><span class="keyword">if</span> <span class="built_in">test</span> -n \&quot;<span class="variable">$files</span>\&quot;;</span><br><span class="line">    <span class="keyword">then</span> <span class="built_in">echo</span> <span class="variable">$files</span> | xargs tslint --fix -t codeFrame;</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<h3 id="升级版"><a href="#升级版" class="headerlink" title="升级版"></a>升级版</h3><p>使用<a target="_blank" rel="noopener" href="https://www.npmjs.com/package/lint-staged">lint-staged</a>，只lint staged的文件内容，代替上面冗长的脚本。</p>
<h2 id="吸顶样式效果"><a href="#吸顶样式效果" class="headerlink" title="吸顶样式效果"></a>吸顶样式效果</h2><h3 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h3><blockquote>
<p>参考：<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/position">MDN</a></p>
</blockquote>
<p>最简洁的实现方式，缺点是<a target="_blank" rel="noopener" href="https://caniuse.com/#search=sticky">支持度</a>较差，只在iOS平台支持度较好。除非做中后台，否则需要谨慎使用。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.stick</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: sticky;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="JS"><a href="#JS" class="headerlink" title="JS"></a>JS</h3><p>不用赘述，检查滚动元素的<code>scrollTop</code>属性做判断即可，在指定位置上，设置<code>position:fixed</code>配合<code>z-index</code>等实现吸顶。</p>
<p>另外有意思的一点是，在<code>position:fixed</code>的情况下，<strong>如果没有设置<code>left</code>，<code>left</code>将相对当前元素相对定位</strong>。</p>
<h2 id="一个更友好的图片加载组件"><a href="#一个更友好的图片加载组件" class="headerlink" title="一个更友好的图片加载组件"></a>一个更友好的图片加载组件</h2><h3 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h3><p>提供类似知乎App内的体验：</p>
<ul>
<li>在图片加载时有<strong>相同大小</strong>的占位图和文案提示</li>
<li>图片加载失败后有<strong>相同大小</strong>的占位图和文案提示，点击文案可以重新加载图片</li>
</ul>
<h2 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h2><p>重点在需要图片大小相同的占位图，这通常意味着：</p>
<ul>
<li>图片的大小需要伴随图片下发</li>
<li>客户端的图片宽度或高度固定（通常是宽度）</li>
</ul>
<p>点击重新加载可以通过在图片url后拼接每次不一样的参数实现，例如时间戳。</p>
<p>遮罩可以用图片背景色 + <code>:after</code>伪元素或另外的元素实现。剩下的把loading、loaded、failed状态处理好，工作并不困难。</p>
<p>下面是粗略实现的一个demo。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@desc</span> smart image provide more friendly image loading experience inspired by zhihu</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> shenlvmeng&lt;xin_yuanming@163.com&gt;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; <span class="title class_">Component</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./index.less&#x27;</span>;</span><br><span class="line"></span><br><span class="line">interface <span class="title class_">IProps</span> &#123;</span><br><span class="line">    <span class="attr">width</span>: number;</span><br><span class="line">    <span class="attr">height</span>: number;</span><br><span class="line">    <span class="attr">src</span>: string;</span><br><span class="line">    onLoad?: <span class="function">() =&gt;</span> <span class="keyword">void</span>;</span><br><span class="line">    onError?: <span class="function">() =&gt;</span> <span class="keyword">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">interface <span class="title class_">IState</span> &#123;</span><br><span class="line">    <span class="attr">src</span>: string;</span><br><span class="line">    <span class="attr">loaded</span>: boolean;</span><br><span class="line">    <span class="attr">failed</span>: boolean;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SmartImage</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span>&lt;<span class="title class_">IProps</span>, <span class="title class_">IState</span>&gt; &#123;</span><br><span class="line">    public readonly <span class="attr">state</span>: <span class="title class_">IState</span> = &#123;</span><br><span class="line">        <span class="attr">src</span>: <span class="variable language_">this</span>.<span class="property">props</span>.<span class="property">src</span>,</span><br><span class="line">        <span class="attr">loaded</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">failed</span>: <span class="literal">false</span></span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    public <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; width, height &#125; = <span class="variable language_">this</span>.<span class="property">props</span>;</span><br><span class="line">        <span class="keyword">const</span> &#123; src, loaded, failed &#125; = <span class="variable language_">this</span>.<span class="property">state</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;smart-image-container&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">img</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">className</span>=<span class="string">&quot;smart-image&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">width</span>=<span class="string">&#123;750&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">height</span>=<span class="string">&#123;750</span> * <span class="attr">height</span> / <span class="attr">width</span>&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">src</span>=<span class="string">&#123;src&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onLoad</span>=<span class="string">&#123;this.handleSuccess&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onError</span>=<span class="string">&#123;this.handleError&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                /&gt;</span></span></span><br><span class="line"><span class="language-xml">                &#123;!loaded</span></span><br><span class="line"><span class="language-xml">                    ? (</span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;smart-image-hint&quot;</span> <span class="attr">onClick</span>=<span class="string">&#123;this.handleRetry&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                            &#123;failed</span></span><br><span class="line"><span class="language-xml">                                ? <span class="tag">&lt;<span class="name">span</span>&gt;</span>图片加载失败，点此重试<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                                : <span class="tag">&lt;<span class="name">span</span>&gt;</span>图片加载中...<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                            &#125;</span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    )</span></span><br><span class="line"><span class="language-xml">                    : null</span></span><br><span class="line"><span class="language-xml">                &#125;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private handleSuccess = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">            <span class="attr">failed</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="attr">loaded</span>: <span class="literal">true</span></span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">props</span>.<span class="property">onLoad</span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">props</span>.<span class="title function_">onLoad</span>();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private handleError = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123; <span class="attr">failed</span>: <span class="literal">true</span> &#125;);</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">props</span>.<span class="property">onError</span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">props</span>.<span class="title function_">onError</span>();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private handleRetry = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="property">props</span>.<span class="property">src</span>.<span class="title function_">startsWith</span>(<span class="string">&#x27;http&#x27;</span>) || !<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">failed</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">            <span class="attr">failed</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="attr">src</span>: <span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.props.src&#125;</span>?ts=<span class="subst">$&#123;<span class="built_in">Date</span>.now()&#125;</span>`</span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">SmartImage</span>;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" title="上一页" aria-label="上一页" href="/blog/page/10/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/blog/">1</a><span class="space">&hellip;</span><a class="page-number" href="/blog/page/10/">10</a><span class="page-number current">11</span><a class="page-number" href="/blog/page/12/">12</a><span class="space">&hellip;</span><a class="page-number" href="/blog/page/30/">30</a><a class="extend next" rel="next" title="下一页" aria-label="下一页" href="/blog/page/12/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 2014 – 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">shenlvmeng</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="站点总字数">1m</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">27:55</span>
  </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/blog/js/comments.js"></script><script src="/blog/js/utils.js"></script><script src="/blog/js/motion.js"></script><script src="/blog/js/schemes/muse.js"></script><script src="/blog/js/next-boot.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/algoliasearch/4.14.3/algoliasearch-lite.umd.js" integrity="sha256-dyJcbGuYfdzNfifkHxYVd/rzeR6SLLcDFYEidcybldM=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/instantsearch.js/4.49.2/instantsearch.production.min.js" integrity="sha256-Nu8yqoXoRZEVYyZf4/eY1V4FsenbiCw85RY3gWjN3zQ=" crossorigin="anonymous"></script><script src="/blog/js/third-party/search/algolia-search.js"></script>





  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/blog/js/third-party/math/mathjax.js"></script>


<script class="next-config" data-name="disqus" type="application/json">{"enable":true,"shortname":"shenlvmengs-blog","count":true,"i18n":{"disqus":"disqus"}}</script>
<script src="/blog/js/third-party/comments/disqus.js"></script>

</body>
</html>
